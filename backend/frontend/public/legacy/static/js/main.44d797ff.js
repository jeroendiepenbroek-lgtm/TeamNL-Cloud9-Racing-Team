/*! For license information please see main.44d797ff.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},82:(e,t)=>{var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function _(e){return x(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return _(e)||x(e)===u},t.isConcurrentMode=_,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===s},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===d||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===v||e.$$typeof===b||e.$$typeof===w||e.$$typeof===y)},t.typeOf=x},86:(e,t,n)=>{e.exports=n(82)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+T(l,0):s,x(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),I(o,t,i,"",function(e){return e})):null!=o&&(N(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+T(a=e[c],c);l+=I(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,i,u=s+T(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},j={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:j,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},219:(e,t,n)=>{var r=n(86),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);d&&(o=o.concat(d(n)));for(var a=l(t),m=l(n),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=h(n,y);try{c(t,y,v)}catch(b){}}}}return t}},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,j(_);else{var t=r(u);null!==t&&O(x,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,v(N),N=-1),p=!0;var s=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(x,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,k=null,N=-1,C=5,T=-1;function I(){return!(t.unstable_now()-T<C)}function A(){if(null!==k){var e=t.unstable_now();T=e;var n=!0;try{n=k(!0,e)}finally{n?S():(E=!1,k=null)}}else E=!1}if("function"===typeof b)S=function(){b(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,S=function(){R.postMessage(null)}}else S=function(){y(A,0)};function j(e){k=e,E||(E=!0,S())}function O(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,j(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(N),N=-1):g=!0,O(x,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,j(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},330:(e,t,n)=>{var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useState,o=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return a(function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})},[e,n,t]),o(function(){return c(i)&&u({inst:i}),e(function(){c(i)&&u({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},358:(e,t)=>{var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case s:case a:case o:case h:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case m:case p:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},443:(e,t,n)=>{e.exports=n(717)},461:(e,t,n)=>{e.exports=n(330)},579:(e,t,n)=>{e.exports=n(153)},706:(e,t,n)=>{n(358)},717:(e,t,n)=>{var r=n(43),i=n(461);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,a=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=a(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c(function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return a=t}return a=e}if(t=a,s(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(o=e,t):(o=e,a=n)}var o,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]);var f=o(e,d[0],d[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),u(f),f}},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(Ke){var t=Ke.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Ye){var r=Ye}Reflect.construct(e,[],t)}else{try{t.call()}catch(Ye){r=Ye}e.call(t.prototype)}else{try{throw Error()}catch(Ye){r=Ye}e()}}catch(Ye){if(Ye&&r&&"string"===typeof Ye.stack){for(var i=Ye.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case k:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(Ke){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(tt){return e.body}}function $(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Se=null;function Ee(e){if(e=Ai(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=Ri(t),xe(e.stateNode,e.type,t))}}function ke(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Ne(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Te(){}var Ie=!1;function Ae(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ce(e,t,n)}finally{Ie=!1,(null!==_e||null!==Se)&&(Te(),Ne())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=Ri(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){Re=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(We){Re=!1}function Oe(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(nt){this.onError(nt)}}var De=!1,Le=null,Me=!1,Fe=null,Ue={onError:function(e){De=!0,Le=e}};function Be(e,t,n,r,i,s,o,a,l){De=!1,Le=null,Oe.apply(Ue,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(qe(e)!==e)throw Error(s(188))}function $e(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Qe(i),e;if(o===r)return Qe(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var et=i.unstable_scheduleCallback,rt=i.unstable_cancelCallback,it=i.unstable_shouldYield,st=i.unstable_requestPaint,ot=i.unstable_now,at=i.unstable_getCurrentPriorityLevel,lt=i.unstable_ImmediatePriority,ct=i.unstable_UserBlockingPriority,ut=i.unstable_NormalPriority,dt=i.unstable_LowPriority,ht=i.unstable_IdlePriority,ft=null,pt=null;var gt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(yt(e)/vt|0)|0},yt=Math.log,vt=Math.LN2;var bt=64,xt=4194304;function _t(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function St(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=_t(a):0!==(s&=o)&&(r=_t(s))}else 0!==(o=n&~i)?r=_t(o):0!==s&&(r=_t(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-gt(t)),r|=e[n],t&=~i;return r}function Et(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function kt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Nt(){var e=bt;return 0===(4194240&(bt<<=1))&&(bt=64),e}function Ct(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Tt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-gt(t)]=n}function It(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-gt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var At=0;function Pt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Rt,jt,Ot,Dt,Lt,Mt=!1,Ft=[],Ut=null,Vt=null,zt=null,Bt=new Map,qt=new Map,Ht=[],Wt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gt(e,t){switch(e){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Vt=null;break;case"mouseover":case"mouseout":zt=null;break;case"pointerover":case"pointerout":Bt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qt.delete(t.pointerId)}}function Kt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Ai(t))&&jt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Qt(e){var t=Ii(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Lt(e.priority,function(){Ot(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function $t(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=an(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ai(n))&&jt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Xt(e,t,n){$t(e)&&n.delete(t)}function Yt(){Mt=!1,null!==Ut&&$t(Ut)&&(Ut=null),null!==Vt&&$t(Vt)&&(Vt=null),null!==zt&&$t(zt)&&(zt=null),Bt.forEach(Xt),qt.forEach(Xt)}function Jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Mt||(Mt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Yt)))}function Zt(e){function t(t){return Jt(t,e)}if(0<Ft.length){Jt(Ft[0],e);for(var n=1;n<Ft.length;n++){var r=Ft[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ut&&Jt(Ut,e),null!==Vt&&Jt(Vt,e),null!==zt&&Jt(zt,e),Bt.forEach(t),qt.forEach(t),n=0;n<Ht.length;n++)(r=Ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ht.length&&null===(n=Ht[0]).blockedOn;)Qt(n),null===n.blockedOn&&Ht.shift()}var en=w.ReactCurrentBatchConfig,tn=!0;function nn(e,t,n,r){var i=At,s=en.transition;en.transition=null;try{At=1,sn(e,t,n,r)}finally{At=i,en.transition=s}}function rn(e,t,n,r){var i=At,s=en.transition;en.transition=null;try{At=4,sn(e,t,n,r)}finally{At=i,en.transition=s}}function sn(e,t,n,r){if(tn){var i=an(e,t,n,r);if(null===i)ti(e,t,r,on,n),Gt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ut=Kt(Ut,e,t,n,r,i),!0;case"dragenter":return Vt=Kt(Vt,e,t,n,r,i),!0;case"mouseover":return zt=Kt(zt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Bt.set(s,Kt(Bt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qt.set(s,Kt(qt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Gt(e,r),4&t&&-1<Wt.indexOf(e)){for(;null!==i;){var s=Ai(i);if(null!==s&&Rt(s),null===(s=an(e,t,n,r))&&ti(e,t,r,on,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else ti(e,t,r,null,n)}}var on=null;function an(e,t,n,r){if(on=null,null!==(e=Ii(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return on=e,null}function ln(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(at()){case lt:return 1;case ct:return 4;case ut:case dt:return 16;case ht:return 536870912;default:return 16}default:return 16}}var cn=null,un=null,dn=null;function hn(){if(dn)return dn;var e,t,n=un,r=n.length,i="value"in cn?cn.value:cn.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return dn=i.slice(e,1<t?1-t:void 0)}function fn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function pn(){return!0}function mn(){return!1}function gn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?pn:mn,this.isPropagationStopped=mn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=pn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=pn)},persist:function(){},isPersistent:pn}),t}var yn,vn,bn,wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xn=gn(wn),_n=M({},wn,{view:0,detail:0}),Sn=gn(_n),En=M({},_n,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ln,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bn&&(bn&&"mousemove"===e.type?(yn=e.screenX-bn.screenX,vn=e.screenY-bn.screenY):vn=yn=0,bn=e),yn)},movementY:function(e){return"movementY"in e?e.movementY:vn}}),kn=gn(En),Nn=gn(M({},En,{dataTransfer:0})),Cn=gn(M({},_n,{relatedTarget:0})),Tn=gn(M({},wn,{animationName:0,elapsedTime:0,pseudoElement:0})),In=M({},wn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),An=gn(In),Pn=gn(M({},wn,{data:0})),Rn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},On={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=On[e])&&!!t[e]}function Ln(){return Dn}var Mn=M({},_n,{key:function(e){if(e.key){var t=Rn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=fn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ln,charCode:function(e){return"keypress"===e.type?fn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?fn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Fn=gn(Mn),Un=gn(M({},En,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Vn=gn(M({},_n,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ln})),zn=gn(M({},wn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Bn=M({},En,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qn=gn(Bn),Hn=[9,13,27,32],Wn=u&&"CompositionEvent"in window,Gn=null;u&&"documentMode"in document&&(Gn=document.documentMode);var Kn=u&&"TextEvent"in window&&!Gn,Qn=u&&(!Wn||Gn&&8<Gn&&11>=Gn),$n=String.fromCharCode(32),Xn=!1;function Yn(e,t){switch(e){case"keyup":return-1!==Hn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Zn=!1;var er={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!er[e.type]:"textarea"===t}function nr(e,t,n,r){ke(r),0<(t=ri(t,"onChange")).length&&(n=new xn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var rr=null,ir=null;function sr(e){$r(e,0)}function or(e){if(K(Pi(e)))return e}function ar(e,t){if("change"===e)return t}var lr=!1;if(u){var cr;if(u){var ur="oninput"in document;if(!ur){var dr=document.createElement("div");dr.setAttribute("oninput","return;"),ur="function"===typeof dr.oninput}cr=ur}else cr=!1;lr=cr&&(!document.documentMode||9<document.documentMode)}function hr(){rr&&(rr.detachEvent("onpropertychange",fr),ir=rr=null)}function fr(e){if("value"===e.propertyName&&or(ir)){var t=[];nr(t,ir,e,we(e)),Ae(sr,t)}}function pr(e,t,n){"focusin"===e?(hr(),ir=n,(rr=t).attachEvent("onpropertychange",fr)):"focusout"===e&&hr()}function mr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return or(ir)}function gr(e,t){if("click"===e)return or(t)}function yr(e,t){if("input"===e||"change"===e)return or(t)}var vr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function br(e,t){if(vr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!vr(e[i],t[i]))return!1}return!0}function wr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xr(e,t){var n,r=wr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wr(r)}}function _r(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?_r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Sr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(Je){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function Er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function kr(e){var t=Sr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&_r(n.ownerDocument.documentElement,n)){if(null!==r&&Er(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=xr(n,s);var o=xr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Nr=u&&"documentMode"in document&&11>=document.documentMode,Cr=null,Tr=null,Ir=null,Ar=!1;function Pr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Ar||null==Cr||Cr!==Q(r)||("selectionStart"in(r=Cr)&&Er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Ir&&br(Ir,r)||(Ir=r,0<(r=ri(Tr,"onSelect")).length&&(t=new xn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Cr)))}function Rr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jr={animationend:Rr("Animation","AnimationEnd"),animationiteration:Rr("Animation","AnimationIteration"),animationstart:Rr("Animation","AnimationStart"),transitionend:Rr("Transition","TransitionEnd")},Or={},Dr={};function Lr(e){if(Or[e])return Or[e];if(!jr[e])return e;var t,n=jr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Dr)return Or[e]=n[t];return e}u&&(Dr=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);var Mr=Lr("animationend"),Fr=Lr("animationiteration"),Ur=Lr("animationstart"),Vr=Lr("transitionend"),zr=new Map,Br="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(e,t){zr.set(e,t),l(t,[e])}for(var Hr=0;Hr<Br.length;Hr++){var Wr=Br[Hr];qr(Wr.toLowerCase(),"on"+(Wr[0].toUpperCase()+Wr.slice(1)))}qr(Mr,"onAnimationEnd"),qr(Fr,"onAnimationIteration"),qr(Ur,"onAnimationStart"),qr("dblclick","onDoubleClick"),qr("focusin","onFocus"),qr("focusout","onBlur"),qr(Vr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gr));function Qr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Be.apply(this,arguments),De){if(!De)throw Error(s(198));var u=Le;De=!1,Le=null,Me||(Me=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function $r(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Qr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Qr(i,a,c),s=l}}}if(Me)throw e=Fe,Me=!1,Fe=null,e}function Xr(e,t){var n=t[Ni];void 0===n&&(n=t[Ni]=new Set);var r=e+"__bubble";n.has(r)||(ei(t,e,2,!1),n.add(r))}function Yr(e,t,n){var r=0;t&&(r|=4),ei(n,e,r,t)}var Jr="_reactListening"+Math.random().toString(36).slice(2);function Zr(e){if(!e[Jr]){e[Jr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Kr.has(t)||Yr(t,!1,e),Yr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Jr]||(t[Jr]=!0,Yr("selectionchange",!1,t))}}function ei(e,t,n,r){switch(ln(t)){case 1:var i=nn;break;case 4:i=rn;break;default:i=sn}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ti(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=Ii(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ae(function(){var r=s,i=we(n),o=[];e:{var a=zr.get(e);if(void 0!==a){var l=xn,c=e;switch(e){case"keypress":if(0===fn(n))break e;case"keydown":case"keyup":l=Fn;break;case"focusin":c="focus",l=Cn;break;case"focusout":c="blur",l=Cn;break;case"beforeblur":case"afterblur":l=Cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Nn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Vn;break;case Mr:case Fr:case Ur:l=Tn;break;case Vr:l=zn;break;case"scroll":l=Sn;break;case"wheel":l=qn;break;case"copy":case"cut":case"paste":l=An;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Un}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(ni(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!Ii(c)&&!c[ki])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ii(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=kn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Un,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:Pi(l),f=null==c?a:Pi(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,Ii(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=ii(f))p++;for(f=0,m=h;m;m=ii(m))f++;for(;0<p-f;)u=ii(u),p--;for(;0<f-p;)h=ii(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=ii(u),h=ii(h)}u=null}else u=null;null!==l&&si(o,a,l,u,!1),null!==c&&null!==d&&si(o,d,c,u,!0)}if("select"===(l=(a=r?Pi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=ar;else if(tr(a))if(lr)g=yr;else{g=mr;var y=pr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=gr);switch(g&&(g=g(e,r))?nr(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?Pi(r):window,e){case"focusin":(tr(y)||"true"===y.contentEditable)&&(Cr=y,Tr=r,Ir=null);break;case"focusout":Ir=Tr=Cr=null;break;case"mousedown":Ar=!0;break;case"contextmenu":case"mouseup":case"dragend":Ar=!1,Pr(o,n,i);break;case"selectionchange":if(Nr)break;case"keydown":case"keyup":Pr(o,n,i)}var v;if(Wn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Zn?Yn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Qn&&"ko"!==n.locale&&(Zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Zn&&(v=hn()):(un="value"in(cn=i)?cn.value:cn.textContent,Zn=!0)),0<(y=ri(r,b)).length&&(b=new Pn(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Jn(n))&&(b.data=v))),(v=Kn?function(e,t){switch(e){case"compositionend":return Jn(t);case"keypress":return 32!==t.which?null:(Xn=!0,$n);case"textInput":return(e=t.data)===$n&&Xn?null:e;default:return null}}(e,n):function(e,t){if(Zn)return"compositionend"===e||!Wn&&Yn(e,t)?(e=hn(),dn=un=cn=null,Zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=ri(r,"onBeforeInput")).length&&(i=new Pn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}$r(o,t)})}function ni(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ri(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(ni(e,s,i)),null!=(s=Pe(e,t))&&r.push(ni(e,s,i))),e=e.return}return r}function ii(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function si(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,s))&&o.unshift(ni(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(ni(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var oi=/\r\n?/g,ai=/\u0000|\uFFFD/g;function li(e){return("string"===typeof e?e:""+e).replace(oi,"\n").replace(ai,"")}function ci(e,t,n){if(t=li(t),li(e)!==t&&n)throw Error(s(425))}function ui(){}var di=null,hi=null;function fi(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var pi="function"===typeof setTimeout?setTimeout:void 0,mi="function"===typeof clearTimeout?clearTimeout:void 0,gi="function"===typeof Promise?Promise:void 0,yi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof gi?function(e){return gi.resolve(null).then(e).catch(vi)}:pi;function vi(e){setTimeout(function(){throw e})}function bi(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Zt(t)}function wi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function xi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var _i=Math.random().toString(36).slice(2),Si="__reactFiber$"+_i,Ei="__reactProps$"+_i,ki="__reactContainer$"+_i,Ni="__reactEvents$"+_i,Ci="__reactListeners$"+_i,Ti="__reactHandles$"+_i;function Ii(e){var t=e[Si];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ki]||n[Si]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=xi(e);null!==e;){if(n=e[Si])return n;e=xi(e)}return t}n=(e=n).parentNode}return null}function Ai(e){return!(e=e[Si]||e[ki])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Pi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Ri(e){return e[Ei]||null}var ji=[],Oi=-1;function Di(e){return{current:e}}function Li(e){0>Oi||(e.current=ji[Oi],ji[Oi]=null,Oi--)}function Mi(e,t){Oi++,ji[Oi]=e.current,e.current=t}var Fi={},Ui=Di(Fi),Vi=Di(!1),zi=Fi;function Bi(e,t){var n=e.type.contextTypes;if(!n)return Fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function qi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Hi(){Li(Vi),Li(Ui)}function Wi(e,t,n){if(Ui.current!==Fi)throw Error(s(168));Mi(Ui,t),Mi(Vi,n)}function Gi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return M({},n,r)}function Ki(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fi,zi=Ui.current,Mi(Ui,e),Mi(Vi,Vi.current),!0}function Qi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Gi(e,t,zi),r.__reactInternalMemoizedMergedChildContext=e,Li(Vi),Li(Ui),Mi(Ui,e)):Li(Vi),Mi(Vi,n)}var $i=null,Xi=!1,Yi=!1;function Ji(e){null===$i?$i=[e]:$i.push(e)}function Zi(){if(!Yi&&null!==$i){Yi=!0;var e=0,t=At;try{var n=$i;for(At=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}$i=null,Xi=!1}catch(i){throw null!==$i&&($i=$i.slice(e+1)),et(lt,Zi),i}finally{At=t,Yi=!1}}return null}var es=[],ts=0,ns=null,rs=0,is=[],ss=0,os=null,as=1,ls="";function cs(e,t){es[ts++]=rs,es[ts++]=ns,ns=e,rs=t}function us(e,t,n){is[ss++]=as,is[ss++]=ls,is[ss++]=os,os=e;var r=as;e=ls;var i=32-gt(r)-1;r&=~(1<<i),n+=1;var s=32-gt(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,as=1<<32-gt(t)+i|n<<i|r,ls=s+e}else as=1<<s|n<<i|r,ls=e}function ds(e){null!==e.return&&(cs(e,1),us(e,1,0))}function hs(e){for(;e===ns;)ns=es[--ts],es[ts]=null,rs=es[--ts],es[ts]=null;for(;e===os;)os=is[--ss],is[ss]=null,ls=is[--ss],is[ss]=null,as=is[--ss],is[ss]=null}var fs=null,ps=null,ms=!1,gs=null;function ys(e,t){var n=Bc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function vs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,fs=e,ps=wi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,fs=e,ps=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==os?{id:as,overflow:ls}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Bc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,fs=e,ps=null,!0);default:return!1}}function bs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ws(e){if(ms){var t=ps;if(t){var n=t;if(!vs(e,t)){if(bs(e))throw Error(s(418));t=wi(n.nextSibling);var r=fs;t&&vs(e,t)?ys(r,n):(e.flags=-4097&e.flags|2,ms=!1,fs=e)}}else{if(bs(e))throw Error(s(418));e.flags=-4097&e.flags|2,ms=!1,fs=e}}}function xs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;fs=e}function _s(e){if(e!==fs)return!1;if(!ms)return xs(e),ms=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!fi(e.type,e.memoizedProps)),t&&(t=ps)){if(bs(e))throw Ss(),Error(s(418));for(;t;)ys(e,t),t=wi(t.nextSibling)}if(xs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ps=wi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ps=null}}else ps=fs?wi(e.stateNode.nextSibling):null;return!0}function Ss(){for(var e=ps;e;)e=wi(e.nextSibling)}function Es(){ps=fs=null,ms=!1}function ks(e){null===gs?gs=[e]:gs.push(e)}var Ns=w.ReactCurrentBatchConfig;function Cs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ts(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Is(e){return(0,e._init)(e._payload)}function As(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Hc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Qc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&Is(s)===t.type)?((r=i(t,n.props)).ref=Cs(e,t,n),r.return=e,r):((r=Wc(n.type,n.key,n.props,null,e.mode,r)).ref=Cs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$c(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Gc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Qc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Wc(t.type,t.key,t.props,null,e.mode,n)).ref=Cs(e,null,t),n.return=e,n;case _:return(t=$c(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Gc(t,e.mode,n,null)).return=e,t;Ts(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);Ts(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);Ts(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(i,d),ms&&cs(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return ms&&cs(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),ms&&cs(i,m),c}function g(i,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),ms&&cs(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return ms&&cs(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),ms&&cs(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Is(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Cs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Gc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Wc(o.type,o.key,o.props,null,r.mode,l)).ref=Cs(r,s,o),l.return=r,r=l)}return a(r);case _:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=$c(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(D(o))return g(r,s,o,l);Ts(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Qc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Ps=As(!0),Rs=As(!1),js=Di(null),Os=null,Ds=null,Ls=null;function Ms(){Ls=Ds=Os=null}function Fs(e){var t=js.current;Li(js),e._currentValue=t}function Us(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Vs(e,t){Os=e,Ls=Ds=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Aa=!0),e.firstContext=null)}function zs(e){var t=e._currentValue;if(Ls!==e)if(e={context:e,memoizedValue:t,next:null},null===Ds){if(null===Os)throw Error(s(308));Ds=e,Os.dependencies={lanes:0,firstContext:e}}else Ds=Ds.next=e;return t}var Bs=null;function qs(e){null===Bs?Bs=[e]:Bs.push(e)}function Hs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,qs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ws(e,r)}function Ws(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Gs=!1;function Ks(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $s(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ul)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ws(e,n)}return null===(i=r.interleaved)?(t.next=t,qs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ws(e,n)}function Ys(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,It(e,n)}}function Js(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zs(e,t,n,r){var i=e.updateQueue;Gs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Gs=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Kl|=o,e.lanes=o,e.memoizedState=d}}function eo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var to={},no=Di(to),ro=Di(to),io=Di(to);function so(e){if(e===to)throw Error(s(174));return e}function oo(e,t){switch(Mi(io,t),Mi(ro,e),Mi(no,to),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Li(no),Mi(no,t)}function ao(){Li(no),Li(ro),Li(io)}function lo(e){so(io.current);var t=so(no.current),n=le(t,e.type);t!==n&&(Mi(ro,e),Mi(no,n))}function co(e){ro.current===e&&(Li(no),Li(ro))}var uo=Di(0);function ho(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fo=[];function po(){for(var e=0;e<fo.length;e++)fo[e]._workInProgressVersionPrimary=null;fo.length=0}var mo=w.ReactCurrentDispatcher,go=w.ReactCurrentBatchConfig,yo=0,vo=null,bo=null,wo=null,xo=!1,_o=!1,So=0,Eo=0;function ko(){throw Error(s(321))}function No(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!vr(e[n],t[n]))return!1;return!0}function Co(e,t,n,r,i,o){if(yo=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mo.current=null===e||null===e.memoizedState?ua:da,e=n(r,i),_o){o=0;do{if(_o=!1,So=0,25<=o)throw Error(s(301));o+=1,wo=bo=null,t.updateQueue=null,mo.current=ha,e=n(r,i)}while(_o)}if(mo.current=ca,t=null!==bo&&null!==bo.next,yo=0,wo=bo=vo=null,xo=!1,t)throw Error(s(300));return e}function To(){var e=0!==So;return So=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wo?vo.memoizedState=wo=e:wo=wo.next=e,wo}function Ao(){if(null===bo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=bo.next;var t=null===wo?vo.memoizedState:wo.next;if(null!==t)wo=t,bo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(bo=e).memoizedState,baseState:bo.baseState,baseQueue:bo.baseQueue,queue:bo.queue,next:null},null===wo?vo.memoizedState=wo=e:wo=wo.next=e}return wo}function Po(e,t){return"function"===typeof t?t(e):t}function Ro(e){var t=Ao(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=bo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((yo&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,vo.lanes|=d,Kl|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,vr(r,t.memoizedState)||(Aa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Kl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function jo(e){var t=Ao(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);vr(o,t.memoizedState)||(Aa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Oo(){}function Do(e,t){var n=vo,r=Ao(),i=t(),o=!vr(r.memoizedState,i);if(o&&(r.memoizedState=i,Aa=!0),r=r.queue,Ko(Fo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==wo&&1&wo.memoizedState.tag){if(n.flags|=2048,Bo(9,Mo.bind(null,n,r,i,t),void 0,null),null===Vl)throw Error(s(349));0!==(30&yo)||Lo(n,t,i)}return i}function Lo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Mo(e,t,n,r){t.value=n,t.getSnapshot=r,Uo(t)&&Vo(e)}function Fo(e,t,n){return n(function(){Uo(t)&&Vo(e)})}function Uo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vr(e,n)}catch(Je){return!0}}function Vo(e){var t=Ws(e,1);null!==t&&fc(t,e,1,-1)}function zo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:e},t.queue=e,e=e.dispatch=sa.bind(null,vo,e),[t.memoizedState,e]}function Bo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function qo(){return Ao().memoizedState}function Ho(e,t,n,r){var i=Io();vo.flags|=e,i.memoizedState=Bo(1|t,n,void 0,void 0===r?null:r)}function Wo(e,t,n,r){var i=Ao();r=void 0===r?null:r;var s=void 0;if(null!==bo){var o=bo.memoizedState;if(s=o.destroy,null!==r&&No(r,o.deps))return void(i.memoizedState=Bo(t,n,s,r))}vo.flags|=e,i.memoizedState=Bo(1|t,n,s,r)}function Go(e,t){return Ho(8390656,8,e,t)}function Ko(e,t){return Wo(2048,8,e,t)}function Qo(e,t){return Wo(4,2,e,t)}function $o(e,t){return Wo(4,4,e,t)}function Xo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Yo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wo(4,4,Xo.bind(null,t,e),n)}function Jo(){}function Zo(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&No(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ea(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&No(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ta(e,t,n){return 0===(21&yo)?(e.baseState&&(e.baseState=!1,Aa=!0),e.memoizedState=n):(vr(n,t)||(n=Nt(),vo.lanes|=n,Kl|=n,e.baseState=!0),t)}function na(e,t){var n=At;At=0!==n&&4>n?n:4,e(!0);var r=go.transition;go.transition={};try{e(!1),t()}finally{At=n,go.transition=r}}function ra(){return Ao().memoizedState}function ia(e,t,n){var r=hc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},oa(e))aa(t,n);else if(null!==(n=Hs(e,t,n,r))){fc(n,e,r,dc()),la(n,t,r)}}function sa(e,t,n){var r=hc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(oa(e))aa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,vr(a,o)){var l=t.interleaved;return null===l?(i.next=i,qs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(Ye){}null!==(n=Hs(e,t,i,r))&&(fc(n,e,r,i=dc()),la(n,t,r))}}function oa(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function aa(e,t){_o=xo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function la(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,It(e,n)}}var ca={readContext:zs,useCallback:ko,useContext:ko,useEffect:ko,useImperativeHandle:ko,useInsertionEffect:ko,useLayoutEffect:ko,useMemo:ko,useReducer:ko,useRef:ko,useState:ko,useDebugValue:ko,useDeferredValue:ko,useTransition:ko,useMutableSource:ko,useSyncExternalStore:ko,useId:ko,unstable_isNewReconciler:!1},ua={readContext:zs,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:zs,useEffect:Go,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ho(4194308,4,Xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ho(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ho(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ia.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:zo,useDebugValue:Jo,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=zo(!1),t=e[0];return e=na.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Io();if(ms){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Vl)throw Error(s(349));0!==(30&yo)||Lo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Go(Fo.bind(null,r,o,e),[e]),r.flags|=2048,Bo(9,Mo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Vl.identifierPrefix;if(ms){var n=ls;t=":"+t+"R"+(n=(as&~(1<<32-gt(as)-1)).toString(32)+n),0<(n=So++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Eo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},da={readContext:zs,useCallback:Zo,useContext:zs,useEffect:Ko,useImperativeHandle:Yo,useInsertionEffect:Qo,useLayoutEffect:$o,useMemo:ea,useReducer:Ro,useRef:qo,useState:function(){return Ro(Po)},useDebugValue:Jo,useDeferredValue:function(e){return ta(Ao(),bo.memoizedState,e)},useTransition:function(){return[Ro(Po)[0],Ao().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Do,useId:ra,unstable_isNewReconciler:!1},ha={readContext:zs,useCallback:Zo,useContext:zs,useEffect:Ko,useImperativeHandle:Yo,useInsertionEffect:Qo,useLayoutEffect:$o,useMemo:ea,useReducer:jo,useRef:qo,useState:function(){return jo(Po)},useDebugValue:Jo,useDeferredValue:function(e){var t=Ao();return null===bo?t.memoizedState=e:ta(t,bo.memoizedState,e)},useTransition:function(){return[jo(Po)[0],Ao().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Do,useId:ra,unstable_isNewReconciler:!1};function fa(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function pa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dc(),i=hc(e),s=$s(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Xs(e,s,i))&&(fc(t,e,i,r),Ys(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dc(),i=hc(e),s=$s(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Xs(e,s,i))&&(fc(t,e,i,r),Ys(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dc(),r=hc(e),i=$s(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Xs(e,i,r))&&(fc(t,e,r,n),Ys(t,e,r))}};function ga(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!br(n,r)||!br(i,s))}function ya(e,t,n){var r=!1,i=Fi,s=t.contextType;return"object"===typeof s&&null!==s?s=zs(s):(i=qi(t)?zi:Ui.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Bi(e,i):Fi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ks(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=zs(s):(s=qi(t)?zi:Ui.current,i.context=Bi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(pa(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),Zs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function wa(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(Ge){i="\nError generating stack: "+Ge.message+"\n"+Ge.stack}return{value:e,source:t,stack:i,digest:null}}function xa(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function _a(e,t){try{console.error(t.value)}catch(Ke){setTimeout(function(){throw Ke})}}var Sa="function"===typeof WeakMap?WeakMap:Map;function Ea(e,t,n){(n=$s(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){tc||(tc=!0,nc=r),_a(0,t)},n}function ka(e,t,n){(n=$s(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){_a(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){_a(0,t),"function"!==typeof r&&(null===rc?rc=new Set([this]):rc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Na(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Sa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Lc.bind(null,e,t,n),t.then(e,e))}function Ca(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ta(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=$s(-1,1)).tag=2,Xs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Ia=w.ReactCurrentOwner,Aa=!1;function Pa(e,t,n,r){t.child=null===e?Rs(t,null,n,r):Ps(t,e.child,n,r)}function Ra(e,t,n,r,i){n=n.render;var s=t.ref;return Vs(t,i),r=Co(e,t,n,r,s,i),n=To(),null===e||Aa?(ms&&n&&ds(t),t.flags|=1,Pa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,tl(e,t,i))}function ja(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||qc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Wc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Oa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:br)(o,r)&&e.ref===t.ref)return tl(e,t,i)}return t.flags|=1,(e=Hc(s,r)).ref=t.ref,e.return=t,t.child=e}function Oa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(br(s,r)&&e.ref===t.ref){if(Aa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,tl(e,t,i);0!==(131072&e.flags)&&(Aa=!0)}}return Ma(e,t,n,r,i)}function Da(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mi(Hl,ql),ql|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mi(Hl,ql),ql|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Mi(Hl,ql),ql|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Mi(Hl,ql),ql|=r;return Pa(e,t,i,n),t.child}function La(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ma(e,t,n,r,i){var s=qi(n)?zi:Ui.current;return s=Bi(t,s),Vs(t,i),n=Co(e,t,n,r,s,i),r=To(),null===e||Aa?(ms&&r&&ds(t),t.flags|=1,Pa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,tl(e,t,i))}function Fa(e,t,n,r,i){if(qi(n)){var s=!0;Ki(t)}else s=!1;if(Vs(t,i),null===t.stateNode)el(e,t),ya(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=zs(c):c=Bi(t,c=qi(n)?zi:Ui.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&va(t,o,r,c),Gs=!1;var h=t.memoizedState;o.state=h,Zs(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Vi.current||Gs?("function"===typeof u&&(pa(t,n,u,r),l=t.memoizedState),(a=Gs||ga(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Qs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:fa(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=zs(l):l=Bi(t,l=qi(n)?zi:Ui.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&va(t,o,r,l),Gs=!1,h=t.memoizedState,o.state=h,Zs(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Vi.current||Gs?("function"===typeof f&&(pa(t,n,f,r),p=t.memoizedState),(c=Gs||ga(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ua(e,t,n,r,s,i)}function Ua(e,t,n,r,i,s){La(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Qi(t,n,!1),tl(e,t,s);r=t.stateNode,Ia.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ps(t,e.child,null,s),t.child=Ps(t,null,a,s)):Pa(e,t,a,s),t.memoizedState=r.state,i&&Qi(t,n,!0),t.child}function Va(e){var t=e.stateNode;t.pendingContext?Wi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Wi(0,t.context,!1),oo(e,t.containerInfo)}function za(e,t,n,r,i){return Es(),ks(i),t.flags|=256,Pa(e,t,n,r),t.child}var Ba,qa,Ha,Wa,Ga={dehydrated:null,treeContext:null,retryLane:0};function Ka(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qa(e,t,n){var r,i=t.pendingProps,o=uo.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Mi(uo,1&o),null===e)return ws(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Kc(l,i,0,null),e=Gc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ka(n),t.memoizedState=Ga,e):$a(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Xa(e,t,a,r=xa(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Kc({mode:"visible",children:r.children},i,0,null),(o=Gc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ps(t,e.child,null,a),t.child.memoizedState=Ka(a),t.memoizedState=Ga,o);if(0===(1&t.mode))return Xa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Xa(e,t,a,r=xa(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),Aa||l){if(null!==(r=Vl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ws(e,i),fc(r,e,i,-1))}return Nc(),Xa(e,t,a,r=xa(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Fc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ps=wi(i.nextSibling),fs=t,ms=!0,gs=null,null!==e&&(is[ss++]=as,is[ss++]=ls,is[ss++]=os,as=e.id,ls=e.overflow,os=t),t=$a(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Hc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Hc(r,a):(a=Gc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ka(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ga,i}return e=(a=e.child).sibling,i=Hc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function $a(e,t){return(t=Kc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Xa(e,t,n,r){return null!==r&&ks(r),Ps(t,e.child,null,n),(e=$a(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ya(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Us(e.return,t,n)}function Ja(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Za(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Pa(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ya(e,n,t);else if(19===e.tag)Ya(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Mi(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ho(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ja(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ho(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ja(t,!0,n,null,s);break;case"together":Ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function el(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function tl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Kl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Hc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function nl(e,t){if(!ms)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function il(e,t,n){var r=t.pendingProps;switch(hs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rl(t),null;case 1:case 17:return qi(t.type)&&Hi(),rl(t),null;case 3:return r=t.stateNode,ao(),Li(Vi),Li(Ui),po(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(_s(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==gs&&(yc(gs),gs=null))),qa(e,t),rl(t),null;case 5:co(t);var i=so(io.current);if(n=t.type,null!==e&&null!=t.stateNode)Ha(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return rl(t),null}if(e=so(no.current),_s(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Si]=t,r[Ei]=o,e=0!==(1&t.mode),n){case"dialog":Xr("cancel",r),Xr("close",r);break;case"iframe":case"object":case"embed":Xr("load",r);break;case"video":case"audio":for(i=0;i<Gr.length;i++)Xr(Gr[i],r);break;case"source":Xr("error",r);break;case"img":case"image":case"link":Xr("error",r),Xr("load",r);break;case"details":Xr("toggle",r);break;case"input":X(r,o),Xr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Xr("invalid",r);break;case"textarea":ie(r,o),Xr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&ci(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&ci(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Xr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ui)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Si]=t,e[Ei]=r,Ba(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Xr("cancel",e),Xr("close",e),i=r;break;case"iframe":case"object":case"embed":Xr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Gr.length;i++)Xr(Gr[i],e);i=r;break;case"source":Xr("error",e),i=r;break;case"img":case"image":case"link":Xr("error",e),Xr("load",e),i=r;break;case"details":Xr("toggle",e),i=r;break;case"input":X(e,r),i=$(e,r),Xr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Xr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Xr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&ue(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Xr("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ui)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return rl(t),null;case 6:if(e&&null!=t.stateNode)Wa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=so(io.current),so(no.current),_s(t)){if(r=t.stateNode,n=t.memoizedProps,r[Si]=t,(o=r.nodeValue!==n)&&null!==(e=fs))switch(e.tag){case 3:ci(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ci(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Si]=t,t.stateNode=r}return rl(t),null;case 13:if(Li(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ms&&null!==ps&&0!==(1&t.mode)&&0===(128&t.flags))Ss(),Es(),t.flags|=98560,o=!1;else if(o=_s(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[Si]=t}else Es(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),o=!1}else null!==gs&&(yc(gs),gs=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Wl&&(Wl=3):Nc())),null!==t.updateQueue&&(t.flags|=4),rl(t),null);case 4:return ao(),qa(e,t),null===e&&Zr(t.stateNode.containerInfo),rl(t),null;case 10:return Fs(t.type._context),rl(t),null;case 19:if(Li(uo),null===(o=t.memoizedState))return rl(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)nl(o,!1);else{if(0!==Wl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ho(e))){for(t.flags|=128,nl(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Mi(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&ot()>Zl&&(t.flags|=128,r=!0,nl(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ho(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),nl(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ms)return rl(t),null}else 2*ot()-o.renderingStartTime>Zl&&1073741824!==n&&(t.flags|=128,r=!0,nl(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ot(),t.sibling=null,n=uo.current,Mi(uo,r?1&n|2:1&n),t):(rl(t),null);case 22:case 23:return _c(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&ql)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function sl(e,t){switch(hs(t),t.tag){case 1:return qi(t.type)&&Hi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),Li(Vi),Li(Ui),po(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return co(t),null;case 13:if(Li(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));Es()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Li(uo),null;case 4:return ao(),null;case 10:return Fs(t.type._context),null;case 22:case 23:return _c(),null;default:return null}}Ba=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qa=function(){},Ha=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,so(no.current);var s,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ui)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Xr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Wa=function(e,t,n,r){n!==r&&(t.flags|=4)};var ol=!1,al=!1,ll="function"===typeof WeakSet?WeakSet:Set,cl=null;function ul(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(Je){Dc(e,t,Je)}else n.current=null}function dl(e,t,n){try{n()}catch(Je){Dc(e,t,Je)}}var hl=!1;function fl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&dl(t,n,s)}i=i.next}while(i!==r)}}function pl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ml(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function gl(e){var t=e.alternate;null!==t&&(e.alternate=null,gl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[Si],delete t[Ei],delete t[Ni],delete t[Ci],delete t[Ti])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yl(e){return 5===e.tag||3===e.tag||4===e.tag}function vl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||yl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function bl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ui));else if(4!==r&&null!==(e=e.child))for(bl(e,t,n),e=e.sibling;null!==e;)bl(e,t,n),e=e.sibling}function wl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(wl(e,t,n),e=e.sibling;null!==e;)wl(e,t,n),e=e.sibling}var xl=null,_l=!1;function Sl(e,t,n){for(n=n.child;null!==n;)El(e,t,n),n=n.sibling}function El(e,t,n){if(pt&&"function"===typeof pt.onCommitFiberUnmount)try{pt.onCommitFiberUnmount(ft,n)}catch(Ze){}switch(n.tag){case 5:al||ul(n,t);case 6:var r=xl,i=_l;xl=null,Sl(e,t,n),_l=i,null!==(xl=r)&&(_l?(e=xl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):xl.removeChild(n.stateNode));break;case 18:null!==xl&&(_l?(e=xl,n=n.stateNode,8===e.nodeType?bi(e.parentNode,n):1===e.nodeType&&bi(e,n),Zt(e)):bi(xl,n.stateNode));break;case 4:r=xl,i=_l,xl=n.stateNode.containerInfo,_l=!0,Sl(e,t,n),xl=r,_l=i;break;case 0:case 11:case 14:case 15:if(!al&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&dl(n,t,o),i=i.next}while(i!==r)}Sl(e,t,n);break;case 1:if(!al&&(ul(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(Ze){Dc(n,t,Ze)}Sl(e,t,n);break;case 21:Sl(e,t,n);break;case 22:1&n.mode?(al=(r=al)||null!==n.memoizedState,Sl(e,t,n),al=r):Sl(e,t,n);break;default:Sl(e,t,n)}}function kl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ll),t.forEach(function(t){var r=Uc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function Nl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:xl=l.stateNode,_l=!1;break e;case 3:case 4:xl=l.stateNode.containerInfo,_l=!0;break e}l=l.return}if(null===xl)throw Error(s(160));El(o,a,i),xl=null,_l=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(Ye){Dc(i,t,Ye)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Cl(t,e),t=t.sibling}function Cl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Nl(t,e),Tl(e),4&r){try{fl(3,e,e.return),pl(3,e)}catch(ze){Dc(e,e.return,ze)}try{fl(5,e,e.return)}catch(ze){Dc(e,e.return,ze)}}break;case 1:Nl(t,e),Tl(e),512&r&&null!==n&&ul(n,n.return);break;case 5:if(Nl(t,e),Tl(e),512&r&&null!==n&&ul(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(ze){Dc(e,e.return,ze)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(i,o),ve(l,a);var u=ve(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?ue(i,h):"children"===d?de(i,h):b(i,d,h,u)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ei]=o}catch(ze){Dc(e,e.return,ze)}}break;case 6:if(Nl(t,e),Tl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(ze){Dc(e,e.return,ze)}}break;case 3:if(Nl(t,e),Tl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Zt(t.containerInfo)}catch(ze){Dc(e,e.return,ze)}break;case 4:default:Nl(t,e),Tl(e);break;case 13:Nl(t,e),Tl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Jl=ot())),4&r&&kl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(al=(u=al)||d,Nl(t,e),al=u):Nl(t,e),Tl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(cl=e,d=e.child;null!==d;){for(h=cl=d;null!==cl;){switch(p=(f=cl).child,f.tag){case 0:case 11:case 14:case 15:fl(4,f,f.return);break;case 1:ul(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(ze){Dc(r,n,ze)}}break;case 5:ul(f,f.return);break;case 22:if(null!==f.memoizedState){Rl(h);continue}}null!==p?(p.return=f,cl=p):Rl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",a))}catch(ze){Dc(e,e.return,ze)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(ze){Dc(e,e.return,ze)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Nl(t,e),Tl(e),4&r&&kl(e);case 21:}}function Tl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(yl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),wl(e,vl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;bl(e,vl(e),o);break;default:throw Error(s(161))}}catch(mt){Dc(e,e.return,mt)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Il(e,t,n){cl=e,Al(e,t,n)}function Al(e,t,n){for(var r=0!==(1&e.mode);null!==cl;){var i=cl,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||ol;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||al;a=ol;var c=al;if(ol=o,(al=l)&&!c)for(cl=i;null!==cl;)l=(o=cl).child,22===o.tag&&null!==o.memoizedState?jl(i):null!==l?(l.return=o,cl=l):jl(i);for(;null!==s;)cl=s,Al(s,t,n),s=s.sibling;cl=i,ol=a,al=c}Pl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,cl=s):Pl(e)}}function Pl(e){for(;null!==cl;){var t=cl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:al||pl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!al)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:fa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&eo(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}eo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Zt(h)}}}break;default:throw Error(s(163))}al||512&t.flags&&ml(t)}catch(Ve){Dc(t,t.return,Ve)}}if(t===e){cl=null;break}if(null!==(n=t.sibling)){n.return=t.return,cl=n;break}cl=t.return}}function Rl(e){for(;null!==cl;){var t=cl;if(t===e){cl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,cl=n;break}cl=t.return}}function jl(e){for(;null!==cl;){var t=cl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{pl(4,t)}catch(mt){Dc(t,n,mt)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(mt){Dc(t,i,mt)}}var s=t.return;try{ml(t)}catch(mt){Dc(t,s,mt)}break;case 5:var o=t.return;try{ml(t)}catch(mt){Dc(t,o,mt)}}}catch(mt){Dc(t,t.return,mt)}if(t===e){cl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,cl=a;break}cl=t.return}}var Ol,Dl=Math.ceil,Ll=w.ReactCurrentDispatcher,Ml=w.ReactCurrentOwner,Fl=w.ReactCurrentBatchConfig,Ul=0,Vl=null,zl=null,Bl=0,ql=0,Hl=Di(0),Wl=0,Gl=null,Kl=0,Ql=0,$l=0,Xl=null,Yl=null,Jl=0,Zl=1/0,ec=null,tc=!1,nc=null,rc=null,ic=!1,sc=null,oc=0,ac=0,lc=null,cc=-1,uc=0;function dc(){return 0!==(6&Ul)?ot():-1!==cc?cc:cc=ot()}function hc(e){return 0===(1&e.mode)?1:0!==(2&Ul)&&0!==Bl?Bl&-Bl:null!==Ns.transition?(0===uc&&(uc=Nt()),uc):0!==(e=At)?e:e=void 0===(e=window.event)?16:ln(e.type)}function fc(e,t,n,r){if(50<ac)throw ac=0,lc=null,Error(s(185));Tt(e,n,r),0!==(2&Ul)&&e===Vl||(e===Vl&&(0===(2&Ul)&&(Ql|=n),4===Wl&&vc(e,Bl)),pc(e,r),1===n&&0===Ul&&0===(1&t.mode)&&(Zl=ot()+500,Xi&&Zi()))}function pc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-gt(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=Et(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=St(e,e===Vl?Bl:0);if(0===r)null!==n&&rt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&rt(n),1===t)0===e.tag?function(e){Xi=!0,Ji(e)}(bc.bind(null,e)):Ji(bc.bind(null,e)),yi(function(){0===(6&Ul)&&Zi()}),n=null;else{switch(Pt(r)){case 1:n=lt;break;case 4:n=ct;break;case 16:default:n=ut;break;case 536870912:n=ht}n=Vc(n,mc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function mc(e,t){if(cc=-1,uc=0,0!==(6&Ul))throw Error(s(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var r=St(e,e===Vl?Bl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Cc(e,r);else{t=r;var i=Ul;Ul|=2;var o=kc();for(Vl===e&&Bl===t||(ec=null,Zl=ot()+500,Sc(e,t));;)try{Ic();break}catch(Ze){Ec(e,Ze)}Ms(),Ll.current=o,Ul=i,null!==zl?t=0:(Vl=null,Bl=0,t=Wl)}if(0!==t){if(2===t&&(0!==(i=kt(e))&&(r=i,t=gc(e,i))),1===t)throw n=Gl,Sc(e,0),vc(e,r),pc(e,ot()),n;if(6===t)vc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!vr(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Cc(e,r))&&(0!==(o=kt(e))&&(r=o,t=gc(e,o))),1===t))throw n=Gl,Sc(e,0),vc(e,r),pc(e,ot()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Rc(e,Yl,ec);break;case 3:if(vc(e,r),(130023424&r)===r&&10<(t=Jl+500-ot())){if(0!==St(e,0))break;if(((i=e.suspendedLanes)&r)!==r){dc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=pi(Rc.bind(null,e,Yl,ec),t);break}Rc(e,Yl,ec);break;case 4:if(vc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-gt(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=ot()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dl(r/1960))-r)){e.timeoutHandle=pi(Rc.bind(null,e,Yl,ec),r);break}Rc(e,Yl,ec);break;default:throw Error(s(329))}}}return pc(e,ot()),e.callbackNode===n?mc.bind(null,e):null}function gc(e,t){var n=Xl;return e.current.memoizedState.isDehydrated&&(Sc(e,t).flags|=256),2!==(e=Cc(e,t))&&(t=Yl,Yl=n,null!==t&&yc(t)),e}function yc(e){null===Yl?Yl=e:Yl.push.apply(Yl,e)}function vc(e,t){for(t&=~$l,t&=~Ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-gt(t),r=1<<n;e[n]=-1,t&=~r}}function bc(e){if(0!==(6&Ul))throw Error(s(327));jc();var t=St(e,0);if(0===(1&t))return pc(e,ot()),null;var n=Cc(e,t);if(0!==e.tag&&2===n){var r=kt(e);0!==r&&(t=r,n=gc(e,r))}if(1===n)throw n=Gl,Sc(e,0),vc(e,t),pc(e,ot()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rc(e,Yl,ec),pc(e,ot()),null}function wc(e,t){var n=Ul;Ul|=1;try{return e(t)}finally{0===(Ul=n)&&(Zl=ot()+500,Xi&&Zi())}}function xc(e){null!==sc&&0===sc.tag&&0===(6&Ul)&&jc();var t=Ul;Ul|=1;var n=Fl.transition,r=At;try{if(Fl.transition=null,At=1,e)return e()}finally{At=r,Fl.transition=n,0===(6&(Ul=t))&&Zi()}}function _c(){ql=Hl.current,Li(Hl)}function Sc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,mi(n)),null!==zl)for(n=zl.return;null!==n;){var r=n;switch(hs(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Hi();break;case 3:ao(),Li(Vi),Li(Ui),po();break;case 5:co(r);break;case 4:ao();break;case 13:case 19:Li(uo);break;case 10:Fs(r.type._context);break;case 22:case 23:_c()}n=n.return}if(Vl=e,zl=e=Hc(e.current,null),Bl=ql=t,Wl=0,Gl=null,$l=Ql=Kl=0,Yl=Xl=null,null!==Bs){for(t=0;t<Bs.length;t++)if(null!==(r=(n=Bs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Bs=null}return e}function Ec(e,t){for(;;){var n=zl;try{if(Ms(),mo.current=ca,xo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}xo=!1}if(yo=0,wo=bo=vo=null,_o=!1,So=0,Ml.current=null,null===n||null===n.return){Wl=1,Gl=t,zl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Bl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Ca(a);if(null!==p){p.flags&=-257,Ta(p,a,l,0,t),1&p.mode&&Na(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){Na(o,u,t),Nc();break e}c=Error(s(426))}else if(ms&&1&l.mode){var y=Ca(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),Ta(y,a,l,0,t),ks(wa(c,l));break e}}o=c=wa(c,l),4!==Wl&&(Wl=2),null===Xl?Xl=[o]:Xl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Js(o,Ea(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===rc||!rc.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Js(o,ka(o,l,t));break e}}o=o.return}while(null!==o)}Pc(n)}catch(w){t=w,zl===n&&null!==n&&(zl=n=n.return);continue}break}}function kc(){var e=Ll.current;return Ll.current=ca,null===e?ca:e}function Nc(){0!==Wl&&3!==Wl&&2!==Wl||(Wl=4),null===Vl||0===(268435455&Kl)&&0===(268435455&Ql)||vc(Vl,Bl)}function Cc(e,t){var n=Ul;Ul|=2;var r=kc();for(Vl===e&&Bl===t||(ec=null,Sc(e,t));;)try{Tc();break}catch(i){Ec(e,i)}if(Ms(),Ul=n,Ll.current=r,null!==zl)throw Error(s(261));return Vl=null,Bl=0,Wl}function Tc(){for(;null!==zl;)Ac(zl)}function Ic(){for(;null!==zl&&!it();)Ac(zl)}function Ac(e){var t=Ol(e.alternate,e,ql);e.memoizedProps=e.pendingProps,null===t?Pc(e):zl=t,Ml.current=null}function Pc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=il(n,t,ql)))return void(zl=n)}else{if(null!==(n=sl(n,t)))return n.flags&=32767,void(zl=n);if(null===e)return Wl=6,void(zl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(zl=t);zl=t=e}while(null!==t);0===Wl&&(Wl=5)}function Rc(e,t,n){var r=At,i=Fl.transition;try{Fl.transition=null,At=1,function(e,t,n,r){do{jc()}while(null!==sc);if(0!==(6&Ul))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-gt(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Vl&&(zl=Vl=null,Bl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ic||(ic=!0,Vc(ut,function(){return jc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Fl.transition,Fl.transition=null;var a=At;At=1;var l=Ul;Ul|=4,Ml.current=null,function(e,t){if(di=tn,Er(e=Sr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(wt){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(hi={focusedElem:e,selectionRange:n},tn=!1,cl=t;null!==cl;)if(e=(t=cl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,cl=e;else for(;null!==cl;){t=cl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:fa(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(wt){Dc(t,t.return,wt)}if(null!==(e=t.sibling)){e.return=t.return,cl=e;break}cl=t.return}m=hl,hl=!1}(e,n),Cl(n,e),kr(hi),tn=!!di,hi=di=null,e.current=n,Il(n,e,i),st(),Ul=l,At=a,Fl.transition=o}else e.current=n;if(ic&&(ic=!1,sc=e,oc=i),o=e.pendingLanes,0===o&&(rc=null),function(e){if(pt&&"function"===typeof pt.onCommitFiberRoot)try{pt.onCommitFiberRoot(ft,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),pc(e,ot()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(tc)throw tc=!1,e=nc,nc=null,e;0!==(1&oc)&&0!==e.tag&&jc(),o=e.pendingLanes,0!==(1&o)?e===lc?ac++:(ac=0,lc=e):ac=0,Zi()}(e,t,n,r)}finally{Fl.transition=i,At=r}return null}function jc(){if(null!==sc){var e=Pt(oc),t=Fl.transition,n=At;try{if(Fl.transition=null,At=16>e?16:e,null===sc)var r=!1;else{if(e=sc,sc=null,oc=0,0!==(6&Ul))throw Error(s(331));var i=Ul;for(Ul|=4,cl=e.current;null!==cl;){var o=cl,a=o.child;if(0!==(16&cl.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(cl=u;null!==cl;){var d=cl;switch(d.tag){case 0:case 11:case 15:fl(8,d,o)}var h=d.child;if(null!==h)h.return=d,cl=h;else for(;null!==cl;){var f=(d=cl).sibling,p=d.return;if(gl(d),d===u){cl=null;break}if(null!==f){f.return=p,cl=f;break}cl=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}cl=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,cl=a;else e:for(;null!==cl;){if(0!==(2048&(o=cl).flags))switch(o.tag){case 0:case 11:case 15:fl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,cl=v;break e}cl=o.return}}var b=e.current;for(cl=b;null!==cl;){var w=(a=cl).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,cl=w;else e:for(a=b;null!==cl;){if(0!==(2048&(l=cl).flags))try{switch(l.tag){case 0:case 11:case 15:pl(9,l)}}catch(_){Dc(l,l.return,_)}if(l===a){cl=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,cl=x;break e}cl=l.return}}if(Ul=i,Zi(),pt&&"function"===typeof pt.onPostCommitFiberRoot)try{pt.onPostCommitFiberRoot(ft,e)}catch(_){}r=!0}return r}finally{At=n,Fl.transition=t}}return!1}function Oc(e,t,n){e=Xs(e,t=Ea(0,t=wa(n,t),1),1),t=dc(),null!==e&&(Tt(e,1,t),pc(e,t))}function Dc(e,t,n){if(3===e.tag)Oc(e,e,n);else for(;null!==t;){if(3===t.tag){Oc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===rc||!rc.has(r))){t=Xs(t,e=ka(t,e=wa(n,e),1),1),e=dc(),null!==t&&(Tt(t,1,e),pc(t,e));break}}t=t.return}}function Lc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=dc(),e.pingedLanes|=e.suspendedLanes&n,Vl===e&&(Bl&n)===n&&(4===Wl||3===Wl&&(130023424&Bl)===Bl&&500>ot()-Jl?Sc(e,0):$l|=n),pc(e,t)}function Mc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=xt,0===(130023424&(xt<<=1))&&(xt=4194304)));var n=dc();null!==(e=Ws(e,t))&&(Tt(e,t,n),pc(e,n))}function Fc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mc(e,n)}function Uc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Mc(e,n)}function Vc(e,t){return et(e,t)}function zc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bc(e,t,n,r){return new zc(e,t,n,r)}function qc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hc(e,t){var n=e.alternate;return null===n?((n=Bc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)qc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Gc(n.children,i,o,t);case E:a=8,i|=8;break;case k:return(e=Bc(12,n,t,2|i)).elementType=k,e.lanes=o,e;case I:return(e=Bc(13,n,t,i)).elementType=I,e.lanes=o,e;case A:return(e=Bc(19,n,t,i)).elementType=A,e.lanes=o,e;case j:return Kc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:a=10;break e;case C:a=9;break e;case T:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Bc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Gc(e,t,n,r){return(e=Bc(7,e,r,t)).lanes=n,e}function Kc(e,t,n,r){return(e=Bc(22,e,r,t)).elementType=j,e.lanes=n,e.stateNode={isHidden:!1},e}function Qc(e,t,n){return(e=Bc(6,e,null,t)).lanes=n,e}function $c(e,t,n){return(t=Bc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ct(0),this.expirationTimes=Ct(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ct(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Yc(e,t,n,r,i,s,o,a,l){return e=new Xc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Bc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ks(s),e}function Jc(e){if(!e)return Fi;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(qi(n))return Gi(e,n,t)}return t}function Zc(e,t,n,r,i,s,o,a,l){return(e=Yc(n,r,!0,e,0,s,0,a,l)).context=Jc(null),n=e.current,(s=$s(r=dc(),i=hc(n))).callback=void 0!==t&&null!==t?t:null,Xs(n,s,i),e.current.lanes=i,Tt(e,i,r),pc(e,r),e}function eu(e,t,n,r){var i=t.current,s=dc(),o=hc(i);return n=Jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=$s(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Xs(i,t,o))&&(fc(e,i,o,s),Ys(e,i,o)),o}function tu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ru(e,t){nu(e,t),(e=e.alternate)&&nu(e,t)}Ol=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Vi.current)Aa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Aa=!1,function(e,t,n){switch(t.tag){case 3:Va(t),Es();break;case 5:lo(t);break;case 1:qi(t.type)&&Ki(t);break;case 4:oo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Mi(js,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Mi(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Qa(e,t,n):(Mi(uo,1&uo.current),null!==(e=tl(e,t,n))?e.sibling:null);Mi(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Za(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mi(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Da(e,t,n)}return tl(e,t,n)}(e,t,n);Aa=0!==(131072&e.flags)}else Aa=!1,ms&&0!==(1048576&t.flags)&&us(t,rs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;el(e,t),e=t.pendingProps;var i=Bi(t,Ui.current);Vs(t,n),i=Co(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qi(r)?(o=!0,Ki(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ks(t),i.updater=ma,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Ua(null,t,r,!0,o,n)):(t.tag=0,ms&&o&&ds(t),Pa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(el(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return qc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(r),e=fa(r,e),i){case 0:t=Ma(null,t,r,e,n);break e;case 1:t=Fa(null,t,r,e,n);break e;case 11:t=Ra(null,t,r,e,n);break e;case 14:t=ja(null,t,r,fa(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ma(e,t,r,i=t.elementType===r?i:fa(r,i),n);case 1:return r=t.type,i=t.pendingProps,Fa(e,t,r,i=t.elementType===r?i:fa(r,i),n);case 3:e:{if(Va(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Qs(e,t),Zs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=za(e,t,r,n,i=wa(Error(s(423)),t));break e}if(r!==i){t=za(e,t,r,n,i=wa(Error(s(424)),t));break e}for(ps=wi(t.stateNode.containerInfo.firstChild),fs=t,ms=!0,gs=null,n=Rs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Es(),r===i){t=tl(e,t,n);break e}Pa(e,t,r,n)}t=t.child}return t;case 5:return lo(t),null===e&&ws(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,fi(r,i)?a=null:null!==o&&fi(r,o)&&(t.flags|=32),La(e,t),Pa(e,t,a,n),t.child;case 6:return null===e&&ws(t),null;case 13:return Qa(e,t,n);case 4:return oo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ps(t,null,r,n):Pa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ra(e,t,r,i=t.elementType===r?i:fa(r,i),n);case 7:return Pa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Pa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Mi(js,r._currentValue),r._currentValue=a,null!==o)if(vr(o.value,a)){if(o.children===i.children&&!Vi.current){t=tl(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=$s(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Us(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Us(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Pa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Vs(t,n),r=r(i=zs(i)),t.flags|=1,Pa(e,t,r,n),t.child;case 14:return i=fa(r=t.type,t.pendingProps),ja(e,t,r,i=fa(r.type,i),n);case 15:return Oa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fa(r,i),el(e,t),t.tag=1,qi(r)?(e=!0,Ki(t)):e=!1,Vs(t,n),ya(t,r,i),ba(t,r,i,n),Ua(null,t,r,!0,e,n);case 19:return Za(e,t,n);case 22:return Da(e,t,n)}throw Error(s(156,t.tag))};var iu="function"===typeof reportError?reportError:function(e){console.error(e)};function su(e){this._internalRoot=e}function ou(e){this._internalRoot=e}function au(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function lu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function cu(){}function uu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=tu(o);a.call(e)}}eu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=tu(o);s.call(e)}}var o=Zc(t,r,e,0,null,!1,0,"",cu);return e._reactRootContainer=o,e[ki]=o.current,Zr(8===e.nodeType?e.parentNode:e),xc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=tu(l);a.call(e)}}var l=Yc(e,0,!1,null,0,!1,0,"",cu);return e._reactRootContainer=l,e[ki]=l.current,Zr(8===e.nodeType?e.parentNode:e),xc(function(){eu(t,l,n,r)}),l}(n,t,e,i,r);return tu(o)}ou.prototype.render=su.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));eu(e,t,null,null)},ou.prototype.unmount=su.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;xc(function(){eu(null,e,null,null)}),t[ki]=null}},ou.prototype.unstable_scheduleHydration=function(e){if(e){var t=Dt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ht.length&&0!==t&&t<Ht[n].priority;n++);Ht.splice(n,0,e),0===n&&Qt(e)}},Rt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=_t(t.pendingLanes);0!==n&&(It(t,1|n),pc(t,ot()),0===(6&Ul)&&(Zl=ot()+500,Zi()))}break;case 13:xc(function(){var t=Ws(e,1);if(null!==t){var n=dc();fc(t,e,1,n)}}),ru(e,1)}},jt=function(e){if(13===e.tag){var t=Ws(e,134217728);if(null!==t)fc(t,e,134217728,dc());ru(e,134217728)}},Ot=function(e){if(13===e.tag){var t=hc(e),n=Ws(e,t);if(null!==n)fc(n,e,t,dc());ru(e,t)}},Dt=function(){return At},Lt=function(e,t){var n=At;try{return At=e,t()}finally{At=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ri(r);if(!i)throw Error(s(90));K(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=wc,Te=xc;var du={usingClientEntryPoint:!1,Events:[Ai,Pi,Ri,ke,Ne,wc]},hu={findFiberByHostInstance:Ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fu={bundleType:hu.bundleType,version:hu.version,rendererPackageName:hu.rendererPackageName,rendererConfig:hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:hu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pu.isDisabled&&pu.supportsFiber)try{ft=pu.inject(fu),pt=pu}catch(We){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=du,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!au(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!au(e))throw Error(s(299));var n=!1,r="",i=iu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Yc(e,1,!1,null,0,n,0,r,i),e[ki]=t.current,Zr(8===e.nodeType?e.parentNode:e),new su(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return xc(e)},t.hydrate=function(e,t,n){if(!lu(t))throw Error(s(200));return uu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!au(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=iu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Zc(t,null,e,1,null!=n?n:null,i,0,o,a),e[ki]=t.current,Zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ou(t)},t.render=function(e,t,n){if(!lu(t))throw Error(s(200));return uu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!lu(e))throw Error(s(40));return!!e._reactRootContainer&&(xc(function(){uu(null,null,e,!1,function(){e._reactRootContainer=null,e[ki]=null})}),!0)},t.unstable_batchedUpdates=wc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!lu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return uu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,i=n(43),s=n.t(i,2),o=n(391);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,u=s.history,p=r.Pop,m=null,g=y();function y(){return(u.state||{idx:null}).idx}function v(){p=r.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:p,location:w.location,delta:t})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(a({},u.state,{idx:g}),""));let w={get action(){return p},get location(){return e(s,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(l,v),m=e,()=>{s.removeEventListener(l,v),m=null}},createHref:e=>t(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=r.Push;let i=h(w.location,e,t);n&&n(i,e),g=y()+1;let a=d(i,g),l=w.createHref(i);try{u.pushState(a,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;s.location.assign(l)}o&&m&&m({action:p,location:w.location,delta:1})},replace:function(e,t){p=r.Replace;let i=h(w.location,e,t);n&&n(i,e),g=y();let s=d(i,g),a=w.createHref(i);u.replaceState(s,"",a),o&&m&&m({action:p,location:w.location,delta:0})},go:e=>u.go(e)};return w}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let i=R(("string"===typeof t?p(t):t).pathname||"/",n);if(null==i)return null;let s=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=P(i);o=I(s[a],e,r)}return o}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(c(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=M([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),b(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:T(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=w(r.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const x=/^:[\w-]+$/,_=3,S=2,E=1,k=10,N=-2,C=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=N),t&&(r+=S),n.filter(e=>!C(e)).reduce((e,t)=>e+(x.test(t)?_:""===t?E:k),r)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:M([s,u.pathname]),pathnameBase:F(M([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=M([s,u.pathnameBase]))}return o}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:o,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function j(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function D(e,t){let n=O(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=p(e):(i=a({},e),c(!i.pathname||!i.pathname.includes("?"),j("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),j("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),j("#","search","hash",i)));let s,o=""===e||""===i.pathname,l=o?"/":i.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?p(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:U(r),hash:V(i)}}(i,s),d=l&&"/"!==l&&l.endsWith("/"),h=(o||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const W=i.createContext(null);const G=i.createContext(null);const K=i.createContext(null);const Q=i.createContext(null);const $=i.createContext({outlet:null,matches:[],isDataRoute:!1});const X=i.createContext(null);function Y(){return null!=i.useContext(Q)}function J(){return Y()||c(!1),i.useContext(Q).location}function Z(e){i.useContext(K).static||i.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=i.useContext($);return e?function(){let{router:e}=ce(ae.UseNavigateStable),t=de(le.UseNavigateStable),n=i.useRef(!1);return Z(()=>{n.current=!0}),i.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},i)))},[e,t])}():function(){Y()||c(!1);let e=i.useContext(W),{basename:t,future:n,navigator:r}=i.useContext(K),{matches:s}=i.useContext($),{pathname:o}=J(),a=JSON.stringify(D(s,n.v7_relativeSplatPath)),l=i.useRef(!1);return Z(()=>{l.current=!0}),i.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=L(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:M([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)},[t,r,a,o,e])}()}function te(e,t,n,s){Y()||c(!1);let{navigator:o}=i.useContext(K),{matches:a}=i.useContext($),l=a[a.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=J();if(t){var m;let e="string"===typeof t?p(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),h=e}else h=f;let g=h.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=y(e,{pathname:v});let w=oe(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:M([d,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:M([d,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,s);return t&&w?i.createElement(Q.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},w):w}function ne(){let e=function(){var e;let t=i.useContext(X),n=ue(le.UseRouteError),r=de(le.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const re=i.createElement(ne,null);class ie extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement($.Provider,{value:this.props.routeContext},i.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(W);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement($.Provider,{value:t},r)}function oe(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,a=d>=0?a.slice(0,d+1):[a[0]];break}}}return a.reduceRight((e,r,s)=>{let o,c=!1,h=null,f=null;var p;n&&(o=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||re,u&&(d<0&&0===s?(p="route-fallback",!1||he[p]||(he[p]=!0),c=!0,f=null):d===s&&(c=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?h:c?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(se,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(ie,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let t=i.useContext(W);return t||c(!1),t}function ue(e){let t=i.useContext(G);return t||c(!1),t}function de(e){let t=function(){let e=i.useContext($);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const he={};function fe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function pe(e){c(!1)}function me(e){let{basename:t="/",children:n=null,location:s,navigationType:o=r.Pop,navigator:a,static:l=!1,future:u}=e;Y()&&c(!1);let d=t.replace(/^\/*/,"/"),h=i.useMemo(()=>({basename:d,navigator:a,static:l,future:H({v7_relativeSplatPath:!1},u)}),[d,u,a,l]);"string"===typeof s&&(s=p(s));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:v="default"}=s,b=i.useMemo(()=>{let e=R(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:o}},[d,f,m,g,y,v,o]);return null==b?null:i.createElement(K.Provider,{value:h},i.createElement(Q.Provider,{children:n,value:b}))}function ge(e){let{children:t,location:n}=e;return te(ye(t),n)}new Promise(()=>{});i.Component;function ye(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,ye(e.props.children,s));e.type!==pe&&c(!1),e.props.index&&e.props.children&&c(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ye(e.props.children,s)),n.push(o)}),n}var ve=n(950),be=n.t(ve,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(jb){}new Map;const we=s.startTransition;be.flushSync,s.useId;function xe(e){let{basename:t,children:n,future:r,window:s}=e,o=i.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),m(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,a)));let l=o.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},p=i.useCallback(e=>{d&&we?we(()=>u(e)):u(e)},[u,d]);return i.useLayoutEffect(()=>l.listen(p),[l,p]),i.useEffect(()=>fe(r),[r]),i.createElement(me,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var _e,Se;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_e||(_e={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Se||(Se={}));var Ee=n(461),ke=n(443);let Ne=function(e){e()};const Ce=()=>Ne,Te=Symbol.for("react-redux-context"),Ie="undefined"!==typeof globalThis?globalThis:{};function Ae(){var e;if(!i.createContext)return{};const t=null!=(e=Ie[Te])?e:Ie[Te]=new Map;let n=t.get(i.createContext);return n||(n=i.createContext(null),t.set(i.createContext,n)),n}const Pe=Ae();let Re=null;n(219),n(706);const je={notify(){},get:()=>[]};function Oe(e,t){let n,r=je,i=0,s=!1;function o(){c.onStateChange&&c.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){const e=Ce();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let e=t;for(;e;)e.callback(),e=e.next})},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=je)}const c={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>r};return c}const De=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?i.useLayoutEffect:i.useEffect;let Le=null;const Me=function(e){let{store:t,context:n,children:r,serverState:s,stabilityCheck:o="once",noopCheck:a="once"}=e;const l=i.useMemo(()=>{const e=Oe(t);return{store:t,subscription:e,getServerState:s?()=>s:void 0,stabilityCheck:o,noopCheck:a}},[t,s,o,a]),c=i.useMemo(()=>t.getState(),[t]);De(()=>{const{subscription:e}=l;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[l,c]);const u=n||Pe;return i.createElement(u.Provider,{value:l},r)};var Fe;function Ue(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ve(e){return!!e&&!!e[It]}function ze(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===At}(e)||Array.isArray(e)||!!e[Tt]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Tt])||Qe(e)||$e(e))}function Be(e,t,n){void 0===n&&(n=!1),0===qe(e)?(n?Object.keys:Pt)(e).forEach(function(r){n&&"symbol"==typeof r||t(r,e[r],e)}):e.forEach(function(n,r){return t(r,n,e)})}function qe(e){var t=e[It];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Qe(e)?2:$e(e)?3:0}function He(e,t){return 2===qe(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function We(e,t){return 2===qe(e)?e.get(t):e[t]}function Ge(e,t,n){var r=qe(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Ke(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Qe(e){return Et&&e instanceof Map}function $e(e){return kt&&e instanceof Set}function Xe(e){return e.o||e.t}function Ye(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Rt(e);delete t[It];for(var n=Pt(t),r=0;r<n.length;r++){var i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Je(e,t){return void 0===t&&(t=!1),et(e)||Ve(e)||!ze(e)||(qe(e)>1&&(e.set=e.add=e.clear=e.delete=Ze),Object.freeze(e),t&&Be(e,function(e,t){return Je(t,!0)},!0)),e}function Ze(){Ue(2)}function et(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function tt(e){var t=jt[e];return t||Ue(18,e),t}function nt(e,t){jt[e]||(jt[e]=t)}function rt(){return _t}function it(e,t){t&&(tt("Patches"),e.u=[],e.s=[],e.v=t)}function st(e){ot(e),e.p.forEach(lt),e.p=null}function ot(e){e===_t&&(_t=e.l)}function at(e){return _t={p:[],l:_t,h:e,m:!0,_:0}}function lt(e){var t=e[It];0===t.i||1===t.i?t.j():t.g=!0}function ct(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||tt("ES5").S(t,e,r),r?(n[It].P&&(st(t),Ue(4)),ze(e)&&(e=ut(t,e),t.l||ht(t,e)),t.u&&tt("Patches").M(n[It].t,e,t.u,t.s)):e=ut(t,n,[]),st(t),t.u&&t.v(t.u,t.s),e!==Ct?e:void 0}function ut(e,t,n){if(et(t))return t;var r=t[It];if(!r)return Be(t,function(i,s){return dt(e,r,t,i,s,n)},!0),t;if(r.A!==e)return t;if(!r.P)return ht(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Ye(r.k):r.o,s=i,o=!1;3===r.i&&(s=new Set(i),i.clear(),o=!0),Be(s,function(t,s){return dt(e,r,i,t,s,n,o)}),ht(e,i,!1),n&&e.u&&tt("Patches").N(r,n,e.u,e.s)}return r.o}function dt(e,t,n,r,i,s,o){if(Ve(i)){var a=ut(e,i,s&&t&&3!==t.i&&!He(t.R,r)?s.concat(r):void 0);if(Ge(n,r,a),!Ve(a))return;e.m=!1}else o&&n.add(i);if(ze(i)&&!et(i)){if(!e.h.D&&e._<1)return;ut(e,i),t&&t.A.l||ht(e,i)}}function ht(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&Je(t,n)}function ft(e,t){var n=e[It];return(n?Xe(n):e)[t]}function pt(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function mt(e){e.P||(e.P=!0,e.l&&mt(e.l))}function gt(e){e.o||(e.o=Ye(e.t))}function yt(e,t,n){var r=Qe(t)?tt("MapSet").F(t,n):$e(t)?tt("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:rt(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,s=Ot;n&&(i=[r],s=Dt);var o=Proxy.revocable(i,s),a=o.revoke,l=o.proxy;return r.k=l,r.j=a,l}(t,n):tt("ES5").J(t,n);return(n?n.A:rt()).p.push(r),r}function vt(e){return Ve(e)||Ue(22,e),function e(t){if(!ze(t))return t;var n,r=t[It],i=qe(t);if(r){if(!r.P&&(r.i<4||!tt("ES5").K(r)))return r.t;r.I=!0,n=bt(t,i),r.I=!1}else n=bt(t,i);return Be(n,function(t,i){r&&We(r.t,t)===i||Ge(n,t,e(i))}),3===i?new Set(n):n}(e)}function bt(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ye(e)}function wt(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[It];return Ot.get(t,e)},set:function(t){var n=this[It];Ot.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][It];if(!i.P)switch(i.i){case 5:r(i)&&mt(i);break;case 4:n(i)&&mt(i)}}}function n(e){for(var t=e.t,n=e.k,r=Pt(n),i=r.length-1;i>=0;i--){var s=r[i];if(s!==It){var o=t[s];if(void 0===o&&!He(t,s))return!0;var a=n[s],l=a&&a[It];if(l?l.t!==o:!Ke(a,o))return!0}}var c=!!t[It];return r.length!==Pt(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};nt("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var s=Rt(n);delete s[It];for(var o=Pt(s),a=0;a<o.length;a++){var l=o[a];s[l]=e(l,t||!!s[l].enumerable)}return Object.create(Object.getPrototypeOf(n),s)}(r,t),s={i:r?5:4,A:n?n.A:rt(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,It,{value:s,writable:!0}),i},S:function(e,n,i){i?Ve(n)&&n[It].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[It];if(n){var i=n.t,s=n.k,o=n.R,a=n.i;if(4===a)Be(s,function(t){t!==It&&(void 0!==i[t]||He(i,t)?o[t]||e(s[t]):(o[t]=!0,mt(n)))}),Be(i,function(e){void 0!==s[e]||He(s,e)||(o[e]=!1,mt(n))});else if(5===a){if(r(n)&&(mt(n),o.length=!0),s.length<i.length)for(var l=s.length;l<i.length;l++)o[l]=!1;else for(var c=i.length;c<s.length;c++)o[c]=!0;for(var u=Math.min(s.length,i.length),d=0;d<u;d++)s.hasOwnProperty(d)||(o[d]=!0),void 0===o[d]&&e(s[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}(e=>{Re=e})(ke.useSyncExternalStoreWithSelector),(e=>{Le=e})(Ee.useSyncExternalStore),Fe=ve.unstable_batchedUpdates,Ne=Fe;var xt,_t,St="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Et="undefined"!=typeof Map,kt="undefined"!=typeof Set,Nt="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Ct=St?Symbol.for("immer-nothing"):((xt={})["immer-nothing"]=!0,xt),Tt=St?Symbol.for("immer-draftable"):"__$immer_draftable",It=St?Symbol.for("immer-state"):"__$immer_state",At=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Pt="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Rt=Object.getOwnPropertyDescriptors||function(e){var t={};return Pt(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},jt={},Ot={get:function(e,t){if(t===It)return e;var n=Xe(e);if(!He(n,t))return function(e,t,n){var r,i=pt(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!ze(r)?r:r===ft(e.t,t)?(gt(e),e.o[t]=yt(e.A.h,r,e)):r},has:function(e,t){return t in Xe(e)},ownKeys:function(e){return Reflect.ownKeys(Xe(e))},set:function(e,t,n){var r=pt(Xe(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=ft(Xe(e),t),s=null==i?void 0:i[It];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Ke(n,i)&&(void 0!==n||He(e.t,t)))return!0;gt(e),mt(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==ft(e.t,t)||t in e.t?(e.R[t]=!1,gt(e),mt(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Xe(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Ue(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ue(12)}},Dt={};Be(Ot,function(e,t){Dt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Dt.deleteProperty=function(e,t){return Dt.set.call(this,e,t,void 0)},Dt.set=function(e,t,n){return Ot.set.call(this,e[0],t,n,e[0])};var Lt=function(){function e(e){var t=this;this.O=Nt,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var s=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return s.produce(e,function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))})}}var o;if("function"!=typeof n&&Ue(6),void 0!==r&&"function"!=typeof r&&Ue(7),ze(e)){var a=at(t),l=yt(t,e,void 0),c=!0;try{o=n(l),c=!1}finally{c?st(a):ot(a)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then(function(e){return it(a,r),ct(e,a)},function(e){throw st(a),e}):(it(a,r),ct(o,a))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===Ct&&(o=void 0),t.D&&Je(o,!0),r){var u=[],d=[];tt("Patches").M(e,o,u,d),r(u,d)}return o}Ue(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,function(t){return e.apply(void 0,[t].concat(i))})};var r,i,s=t.produce(e,n,function(e,t){r=e,i=t});return"undefined"!=typeof Promise&&s instanceof Promise?s.then(function(e){return[e,r,i]}):[s,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){ze(e)||Ue(8),Ve(e)&&(e=vt(e));var t=at(this),n=yt(this,e,void 0);return n[It].C=!0,ot(t),n},t.finishDraft=function(e,t){var n=(e&&e[It]).A;return it(n,t),ct(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Nt&&Ue(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=tt("Patches").$;return Ve(e)?i(e,t):this.produce(e,function(e){return i(e,t)})},e}(),Mt=new Lt,Ft=Mt.produce;Mt.produceWithPatches.bind(Mt),Mt.setAutoFreeze.bind(Mt),Mt.setUseProxies.bind(Mt),Mt.applyPatches.bind(Mt),Mt.createDraft.bind(Mt),Mt.finishDraft.bind(Mt);const Ut=Ft;function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function zt(e){var t=function(e,t){if("object"!=Vt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vt(t)?t:t+""}function Bt(e,t,n){return(t=zt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach(function(t){Bt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Wt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Gt="function"===typeof Symbol&&Symbol.observable||"@@observable",Kt=function(){return Math.random().toString(36).substring(7).split("").join(".")},Qt={INIT:"@@redux/INIT"+Kt(),REPLACE:"@@redux/REPLACE"+Kt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Kt()}};function $t(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Xt(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Wt(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Wt(1));return n(Xt)(e,t)}if("function"!==typeof e)throw new Error(Wt(2));var i=e,s=t,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function u(){if(l)throw new Error(Wt(3));return s}function d(e){if("function"!==typeof e)throw new Error(Wt(4));if(l)throw new Error(Wt(5));var t=!0;return c(),a.push(e),function(){if(t){if(l)throw new Error(Wt(6));t=!1,c();var n=a.indexOf(e);a.splice(n,1),o=null}}}function h(e){if(!$t(e))throw new Error(Wt(7));if("undefined"===typeof e.type)throw new Error(Wt(8));if(l)throw new Error(Wt(9));try{l=!0,s=i(s,e)}finally{l=!1}for(var t=o=a,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:Qt.INIT}),(r={dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Wt(10));i=e,h({type:Qt.REPLACE})}})[Gt]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Wt(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[Gt]=function(){return this},e},r}function Yt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var s,o=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Qt.INIT}))throw new Error(Wt(12));if("undefined"===typeof n(void 0,{type:Qt.PROBE_UNKNOWN_ACTION()}))throw new Error(Wt(13))})}(n)}catch(jb){s=jb}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var r=!1,i={},a=0;a<o.length;a++){var l=o[a],c=n[l],u=e[l],d=c(u,t);if("undefined"===typeof d){t&&t.type;throw new Error(Wt(14))}i[l]=d,r=r||d!==u}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Jt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function Zt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Wt(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=t.map(function(e){return e(i)});return r=Jt.apply(void 0,s)(n.dispatch),Ht(Ht({},n),{},{dispatch:r})}}}function en(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var tn=en();tn.withExtraArgument=en;const nn=tn;var rn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sn=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(jb){s=[6,jb],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},on=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},an=Object.defineProperty,ln=Object.defineProperties,cn=Object.getOwnPropertyDescriptors,un=Object.getOwnPropertySymbols,dn=Object.prototype.hasOwnProperty,hn=Object.prototype.propertyIsEnumerable,fn=function(e,t,n){return t in e?an(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},pn=function(e,t){for(var n in t||(t={}))dn.call(t,n)&&fn(e,n,t[n]);if(un)for(var r=0,i=un(t);r<i.length;r++){n=i[r];hn.call(t,n)&&fn(e,n,t[n])}return e},mn=function(e,t){return ln(e,cn(t))},gn=function(e,t,n){return new Promise(function(r,i){var s=function(e){try{a(n.next(e))}catch(jb){i(jb)}},o=function(e){try{a(n.throw(e))}catch(jb){i(jb)}},a=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(s,o)};a((n=n.apply(e,t)).next())})},yn="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Jt:Jt.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function vn(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}function bn(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return pn(pn({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}var wn=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return rn(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,on([void 0],e[0].concat(this)))):new(t.bind.apply(t,on([void 0],e.concat(this))))},t}(Array),xn=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return rn(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,on([void 0],e[0].concat(this)))):new(t.bind.apply(t,on([void 0],e.concat(this))))},t}(Array);function _n(e){return ze(e)?Ut(e,function(){}):e}function Sn(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,e.actionCreatorCheck,new wn);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(nn.withExtraArgument(n.extraArgument)):r.push(nn));0;return r}(e)}}function En(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(!r)throw new Error("`builder.addCase` cannot be called with an empty action type");if(r in n)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function kn(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:_n(e.initialState),i=e.reducers||{},s=Object.keys(i),o={},a={},l={};function c(){var t="function"===typeof e.extraReducers?En(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,s=t[1],o=void 0===s?[]:s,l=t[2],c=void 0===l?void 0:l,u=pn(pn({},i),a);return function(e,t,n,r){void 0===n&&(n=[]);var i,s="function"===typeof t?En(t):[t,n,r],o=s[0],a=s[1],l=s[2];if(function(e){return"function"===typeof e}(e))i=function(){return _n(e())};else{var c=_n(e);i=function(){return c}}function u(e,t){void 0===e&&(e=i());var n=on([o[t.type]],a.filter(function(e){return(0,e.matcher)(t)}).map(function(e){return e.reducer}));return 0===n.filter(function(e){return!!e}).length&&(n=[l]),n.reduce(function(e,n){if(n){var r;if(Ve(e))return void 0===(r=n(e,t))?e:r;if(ze(e))return Ut(e,function(e){return n(e,t)});if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e},e)}return u.getInitialState=i,u}(r,function(e){for(var t in u)e.addCase(t,u[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)})}return s.forEach(function(e){var n,r,s=i[e],c=t+"/"+e;"reducer"in s?(n=s.reducer,r=s.prepare):n=s,o[e]=n,a[c]=n,l[e]=r?bn(c,r):bn(c)}),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:l,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}var Nn=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},Cn=["name","message","stack","code"],Tn=function(e,t){this.payload=e,this.meta=t},In=function(e,t){this.payload=e,this.meta=t},An=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=Cn;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}},Pn=function(){function e(e,t,n){var r=bn(e+"/fulfilled",function(e,t,n,r){return{payload:e,meta:mn(pn({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}}),i=bn(e+"/pending",function(e,t,n){return{payload:void 0,meta:mn(pn({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}}),s=bn(e+"/rejected",function(e,t,r,i,s){return{payload:i,error:(n&&n.serializeError||An)(e||"Rejected"),meta:mn(pn({},s||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}}),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign(function(e){return function(a,l,c){var u,d=(null==n?void 0:n.idGenerator)?n.idGenerator(e):Nn(),h=new o;function f(e){u=e,h.abort()}var p=function(){return gn(this,null,function(){var o,p,m,g,y,v;return sn(this,function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),g=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:l,extra:c}),null===(w=g)||"object"!==typeof w||"function"!==typeof w.then?[3,2]:[4,g];case 1:g=b.sent(),b.label=2;case 2:if(!1===g||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return y=new Promise(function(e,t){return h.signal.addEventListener("abort",function(){return t({name:"AbortError",message:u||"Aborted"})})}),a(i(d,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:d,arg:e},{getState:l,extra:c}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:a,getState:l,extra:c,requestId:d,signal:h.signal,abort:f,rejectWithValue:function(e,t){return new Tn(e,t)},fulfillWithValue:function(e,t){return new In(e,t)}})).then(function(t){if(t instanceof Tn)throw t;return t instanceof In?r(t.payload,d,e,t.meta):r(t,d,e)})])];case 3:return m=b.sent(),[3,5];case 4:return v=b.sent(),m=v instanceof Tn?s(null,d,e,v.payload,v.meta):s(v,d,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&s.match(m)&&m.meta.condition||a(m),[2,m]}var w})})}();return Object.assign(p,{abort:f,requestId:d,arg:e,unwrap:function(){return p.then(Rn)}})}},{pending:i,rejected:s,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function Rn(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var jn="listenerMiddleware";bn(jn+"/add"),bn(jn+"/removeAll"),bn(jn+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var On,Dn=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Dn(10);wt();const Ln=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="".concat("http://localhost:8001/api").concat(e),r=Ht({headers:Ht({"Content-Type":"application/json"},t.headers)},t);try{const e=await fetch(n,r);if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return await e.json()}catch(i){if(console.warn("API request failed for ".concat(e,", using mock data:"),i),"/riders"===e)return Mn();if("/teams/generate"===e)return Fn();if("/../health"===e)return{status:"mock",version:"1.0.0"};throw i}},Mn=()=>[{id:"rider_1",name:"John Doe",velo:1650,velo_score:1650,velo_tier_rank:3,velo_tier_name:"Sapphire",zp_category:"B",club_ladder_participation:!0,zrl_participation:!0,avg_power_30d:280,power_per_kg_30d:3.8,races_30d:12,avg_position_30d:8.5,is_active:!0,last_updated:"2025-10-18T12:00:00Z"},{id:"rider_2",name:"Jane Smith",velo:1420,velo_score:1420,velo_tier_rank:4,velo_tier_name:"Gold",zp_category:"B",club_ladder_participation:!0,zrl_participation:!1,avg_power_30d:220,power_per_kg_30d:3.2,races_30d:8,avg_position_30d:12.3,is_active:!0,last_updated:"2025-10-18T12:00:00Z"},{id:"rider_3",name:"Mike Johnson",velo:1180,velo_score:1180,velo_tier_rank:5,velo_tier_name:"Silver",zp_category:"C",club_ladder_participation:!1,zrl_participation:!0,avg_power_30d:190,power_per_kg_30d:2.9,races_30d:15,avg_position_30d:15.2,is_active:!0,last_updated:"2025-10-18T12:00:00Z"}],Fn=()=>{const e=Mn();return[{id:"team_1",riders:[e[0]],averageVelo:1650,tierSpread:0,minTier:3,maxTier:3},{id:"team_2",riders:[e[1],e[2]],averageVelo:1300,tierSpread:1,minTier:4,maxTier:5}]},Un={getAll:()=>Ln("/riders"),getById:e=>Ln("/riders/".concat(e)),create:e=>Ln("/riders",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>Ln("/riders/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>Ln("/riders/".concat(e),{method:"DELETE"})},Vn=Pn("riders/fetchRiders",async()=>await Un.getAll()),zn=Pn("riders/updateParticipation",async e=>{const t=await fetch("/api/riders/".concat(e.rider_id,"/participation"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({club_ladder_participation:e.club_ladder_participation,zrl_participation:e.zrl_participation})});if(!t.ok)throw new Error("Failed to update rider participation");return await t.json()}),Bn=(Pn("riders/fetchStatistics",async()=>{const e=await fetch("/api/riders/statistics");if(!e.ok)throw new Error("Failed to fetch rider statistics");return await e.json()}),kn({name:"riders",initialState:{riders:[],filtered_riders:[],loading:!1,error:null,filters:{search:"",velo_tier_min:null,velo_tier_max:null,zp_category:null,club_ladder_only:!1,zrl_only:!1,active_only:!0},pagination:{page:1,page_size:50,total:0}},reducers:{setFilters:(e,t)=>{e.filters=Ht(Ht({},e.filters),t.payload)},setPagination:(e,t)=>{e.pagination=Ht(Ht({},e.pagination),t.payload)},clearError:e=>{e.error=null},updateRiderLocal:(e,t)=>{const n=e.riders.findIndex(e=>e.id===t.payload.id);-1!==n&&(e.riders[n]=Ht(Ht({},e.riders[n]),t.payload));const r=e.filtered_riders.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.filtered_riders[r]=Ht(Ht({},e.filtered_riders[r]),t.payload))}},extraReducers:e=>{e.addCase(Vn.pending,e=>{e.loading=!0,e.error=null}).addCase(Vn.fulfilled,(e,t)=>{e.loading=!1,e.riders=t.payload,e.filtered_riders=t.payload,e.pagination.total=t.payload.length}).addCase(Vn.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch riders"}).addCase(zn.fulfilled,(e,t)=>{const n=t.payload,r=e.riders.findIndex(e=>e.id===n.id);-1!==r&&(e.riders[r]=n);const i=e.filtered_riders.findIndex(e=>e.id===n.id);-1!==i&&(e.filtered_riders[i]=n)}).addCase(zn.rejected,(e,t)=>{e.error=t.error.message||"Failed to update rider participation"})}})),{setFilters:qn,setPagination:Hn,clearError:Wn,updateRiderLocal:Gn}=Bn.actions,Kn=Bn.reducer,Qn=kn({name:"workflow",initialState:{currentStep:null,isRunning:!1,progress:0,logs:[],error:null,lastExecutionTime:null,availableWorkflows:["step1_api_to_firestore","step2_export_riders_to_excel","step3_race_history_to_firestore","step4_race_history_to_excel","step5_event_results_to_firestore","step6_event_results_to_excel","step7_rider_history_90days_to_firestore"]},reducers:{startWorkflow:(e,t)=>{e.currentStep=t.payload,e.isRunning=!0,e.progress=0,e.error=null,e.logs=["Starting workflow: ".concat(t.payload)]},updateProgress:(e,t)=>{e.progress=t.payload},addLog:(e,t)=>{e.logs.push("".concat((new Date).toISOString(),": ").concat(t.payload))},setError:(e,t)=>{e.error=t.payload,e.isRunning=!1},completeWorkflow:e=>{e.isRunning=!1,e.progress=100,e.lastExecutionTime=(new Date).toISOString(),e.currentStep=null},clearLogs:e=>{e.logs=[]},clearError:e=>{e.error=null}}}),{startWorkflow:$n,updateProgress:Xn,addLog:Yn,setError:Jn,completeWorkflow:Zn,clearLogs:er,clearError:tr}=Qn.actions,nr=Qn.reducer,rr=kn({name:"ui",initialState:{sidebarOpen:!0,currentTheme:"light",darkMode:!1,notifications:[],modals:{teamGenerationModal:!1,riderEditModal:!1,confirmationModal:!1},loading:{global:!1,riders:!1,teams:!1,workflow:!1}},reducers:{toggleSidebar:e=>{e.sidebarOpen=!e.sidebarOpen},setSidebarOpen:(e,t)=>{e.sidebarOpen=t.payload},setTheme:(e,t)=>{e.currentTheme=t.payload,e.darkMode="dark"===t.payload},toggleDarkMode:e=>{e.darkMode=!e.darkMode,e.currentTheme=e.darkMode?"dark":"light"},addNotification:(e,t)=>{const n=Ht({id:Date.now().toString(),timestamp:(new Date).toISOString(),dismissed:!1},t.payload);e.notifications.unshift(n),e.notifications.length>50&&(e.notifications=e.notifications.slice(0,50))},dismissNotification:(e,t)=>{const n=e.notifications.find(e=>e.id===t.payload);n&&(n.dismissed=!0)},clearNotifications:e=>{e.notifications=[]},openModal:(e,t)=>{e.modals[t.payload]=!0},closeModal:(e,t)=>{e.modals[t.payload]=!1},closeAllModals:e=>{Object.keys(e.modals).forEach(t=>{e.modals[t]=!1})},setLoading:(e,t)=>{e.loading[t.payload.section]=t.payload.loading}}}),{toggleSidebar:ir,setSidebarOpen:sr,setTheme:or,toggleDarkMode:ar,addNotification:lr,dismissNotification:cr,clearNotifications:ur,openModal:dr,closeModal:hr,closeAllModals:fr,setLoading:pr}=rr.actions,mr=function(e){var t,n=Sn(),r=e||{},i=r.reducer,s=void 0===i?void 0:i,o=r.middleware,a=void 0===o?n():o,l=r.devTools,c=void 0===l||l,u=r.preloadedState,d=void 0===u?void 0:u,h=r.enhancers,f=void 0===h?void 0:h;if("function"===typeof s)t=s;else{if(!vn(s))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Yt(s)}var p=a;"function"===typeof p&&(p=p(n));var m=Zt.apply(void 0,p),g=Jt;c&&(g=yn(pn({trace:!1},"object"===typeof c&&c)));var y=new xn(m),v=y;return Array.isArray(f)?v=on([m],f):"function"===typeof f&&(v=f(y)),Xt(t,d,g.apply(void 0,v))}({reducer:{riders:Kn,workflow:nr,ui:rr.reducer},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST"]}})}),gr=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},yr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(gr(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new vr;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class vr extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const br=function(e){return function(e){const t=gr(e);return yr.encodeByteArray(t,!0)}(e).replace(/\./g,"")},wr=function(e){try{return yr.decodeString(e,!0)}catch(jb){console.error("base64Decode failed: ",jb)}return null};function xr(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const _r=()=>{try{return xr().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(jb){return}const t=e&&wr(e[1]);return t&&JSON.parse(t)})()}catch(jb){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(jb))}},Sr=e=>{var t;return null===(t=_r())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},Er=()=>{var e;return null===(e=_r())||void 0===e?void 0:e.config},kr=e=>{var t;return null===(t=_r())||void 0===t?void 0:t["_".concat(e)]};class Nr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Cr(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Tr(e){return(await fetch(e,{credentials:"include"})).ok}const Ir={};let Ar=!1;function Pr(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Cr(window.location.host)||Ir[e]===t||Ir[e]||Ar)return;function n(e){return"__firebase__banner__".concat(e)}Ir[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ir))Ir[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Ar=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function Rr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function jr(){var e;const t=null===(e=_r())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(jb){return!1}}function Or(){return!jr()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dr(){try{return"object"===typeof indexedDB}catch(jb){return!1}}class Lr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mr.prototype.create)}}class Mr{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Fr,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Lr(n,s,t)}}const Fr=/\{\$([^}]+)}/g;function Ur(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Vr(n)&&Vr(s)){if(!Ur(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Vr(e){return null!==e&&"object"===typeof e}function zr(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Br(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function qr(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Hr{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Wr),void 0===r.error&&(r.error=Wr),void 0===r.complete&&(r.complete=Wr);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(jb){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(jb){"undefined"!==typeof console&&console.error&&console.error(jb)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wr(){}function Gr(e){return e&&e._delegate?e._delegate:e}class Kr{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Qr="[DEFAULT]";class $r{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Nr;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(jb){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(jb){if(r)return null;throw jb}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Qr})}catch(jb){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(jb){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Qr?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr;return this.component?this.component.multipleInstances?e:Qr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Xr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $r(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Yr=[];var Jr;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Jr||(Jr={}));const Zr={debug:Jr.DEBUG,verbose:Jr.VERBOSE,info:Jr.INFO,warn:Jr.WARN,error:Jr.ERROR,silent:Jr.SILENT},ei=Jr.INFO,ti={[Jr.DEBUG]:"log",[Jr.VERBOSE]:"log",[Jr.INFO]:"info",[Jr.WARN]:"warn",[Jr.ERROR]:"error"},ni=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ti[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ri{constructor(e){this.name=e,this._logLevel=ei,this._logHandler=ni,this._userLogHandler=null,Yr.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Jr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Zr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Jr.DEBUG,...t),this._logHandler(this,Jr.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Jr.VERBOSE,...t),this._logHandler(this,Jr.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Jr.INFO,...t),this._logHandler(this,Jr.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Jr.WARN,...t),this._logHandler(this,Jr.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Jr.ERROR,...t),this._logHandler(this,Jr.ERROR,...t)}}let ii,si;const oi=new WeakMap,ai=new WeakMap,li=new WeakMap,ci=new WeakMap,ui=new WeakMap;let di={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ai.get(e);if("objectStoreNames"===t)return e.objectStoreNames||li.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pi(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function hi(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(si||(si=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(mi(this),n),pi(oi.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pi(e.apply(mi(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(mi(this),t,...r);return li.set(s,t.sort?t.sort():[t]),pi(s)}}function fi(e){return"function"===typeof e?hi(e):(e instanceof IDBTransaction&&function(e){if(ai.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});ai.set(e,t)}(e),t=e,(ii||(ii=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,di):e);var t}function pi(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(pi(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&oi.set(t,e)}).catch(()=>{}),ui.set(t,e),t}(e);if(ci.has(e))return ci.get(e);const t=fi(e);return t!==e&&(ci.set(e,t),ui.set(t,e)),t}const mi=e=>ui.get(e);const gi=["get","getKey","getAll","getAllKeys","count"],yi=["put","add","delete","clear"],vi=new Map;function bi(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(vi.get(t))return vi.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=yi.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!gi.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return vi.set(t,s),s}di=(e=>Ht(Ht({},e),{},{get:(t,n,r)=>bi(t,n)||e.get(t,n,r),has:(t,n)=>!!bi(t,n)||e.has(t,n)}))(di);class wi{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const xi="@firebase/app",_i="0.14.4",Si=new ri("@firebase/app"),Ei="@firebase/app-compat",ki="@firebase/analytics-compat",Ni="@firebase/analytics",Ci="@firebase/app-check-compat",Ti="@firebase/app-check",Ii="@firebase/auth",Ai="@firebase/auth-compat",Pi="@firebase/database",Ri="@firebase/data-connect",ji="@firebase/database-compat",Oi="@firebase/functions",Di="@firebase/functions-compat",Li="@firebase/installations",Mi="@firebase/installations-compat",Fi="@firebase/messaging",Ui="@firebase/messaging-compat",Vi="@firebase/performance",zi="@firebase/performance-compat",Bi="@firebase/remote-config",qi="@firebase/remote-config-compat",Hi="@firebase/storage",Wi="@firebase/storage-compat",Gi="@firebase/firestore",Ki="@firebase/ai",Qi="@firebase/firestore-compat",$i="firebase",Xi="[DEFAULT]",Yi={[xi]:"fire-core",[Ei]:"fire-core-compat",[Ni]:"fire-analytics",[ki]:"fire-analytics-compat",[Ti]:"fire-app-check",[Ci]:"fire-app-check-compat",[Ii]:"fire-auth",[Ai]:"fire-auth-compat",[Pi]:"fire-rtdb",[Ri]:"fire-data-connect",[ji]:"fire-rtdb-compat",[Oi]:"fire-fn",[Di]:"fire-fn-compat",[Li]:"fire-iid",[Mi]:"fire-iid-compat",[Fi]:"fire-fcm",[Ui]:"fire-fcm-compat",[Vi]:"fire-perf",[zi]:"fire-perf-compat",[Bi]:"fire-rc",[qi]:"fire-rc-compat",[Hi]:"fire-gcs",[Wi]:"fire-gcs-compat",[Gi]:"fire-fst",[Qi]:"fire-fst-compat",[Ki]:"fire-vertex","fire-js":"fire-js",[$i]:"fire-js-all"},Ji=new Map,Zi=new Map,es=new Map;function ts(e,t){try{e.container.addComponent(t)}catch(jb){Si.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),jb)}}function ns(e){const t=e.name;if(es.has(t))return Si.debug("There were multiple attempts to register component ".concat(t,".")),!1;es.set(t,e);for(const n of Ji.values())ts(n,e);for(const n of Zi.values())ts(n,e);return!0}function rs(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function is(e){return null!==e&&void 0!==e&&void 0!==e.settings}const ss=new Mr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class os{constructor(e,t,n){this._isDeleted=!1,this._options=Ht({},e),this._config=Ht({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}const as="12.4.0";function ls(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Ht({name:Xi,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw ss.create("bad-app-name",{appName:String(i)});if(n||(n=Er()),!n)throw ss.create("no-options");const s=Ji.get(i);if(s){if(Ur(n,s.options)&&Ur(r,s.config))return s;throw ss.create("duplicate-app",{appName:i})}const o=new Xr(i);for(const l of es.values())o.addComponent(l);const a=new os(n,r,o);return Ji.set(i,a),a}function cs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi;const t=Ji.get(e);if(!t&&e===Xi&&Er())return ls();if(!t)throw ss.create("no-app",{appName:e});return t}function us(e,t,n){var r;let i=null!==(r=Yi[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Si.warn(e.join(" "))}ns(new Kr("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const ds="firebase-heartbeat-store";let hs=null;function fs(){return hs||(hs=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=pi(o);return r&&o.addEventListener("upgradeneeded",e=>{r(pi(o.result),e.oldVersion,e.newVersion,pi(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ds)}catch(jb){console.warn(jb)}}}).catch(e=>{throw ss.create("idb-open",{originalErrorMessage:e.message})})),hs}async function ps(e,t){try{const n=(await fs()).transaction(ds,"readwrite"),r=n.objectStore(ds);await r.put(t,ms(e)),await n.done}catch(jb){if(jb instanceof Lr)Si.warn(jb.message);else{const t=ss.create("idb-set",{originalErrorMessage:null===jb||void 0===jb?void 0:jb.message});Si.warn(t.message)}}}function ms(e){return"".concat(e.name,"!").concat(e.options.appId)}class gs{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vs(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ys();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(jb){Si.warn(jb)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ys(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),bs(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),bs(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=br(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(jb){return Si.warn(jb),""}}}function ys(){return(new Date).toISOString().substring(0,10)}class vs{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Dr()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await fs()).transaction(ds),n=await t.objectStore(ds).get(ms(e));return await t.done,n}catch(jb){if(jb instanceof Lr)Si.warn(jb.message);else{const t=ss.create("idb-get",{originalErrorMessage:null===jb||void 0===jb?void 0:jb.message});Si.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ps(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ps(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function bs(e){return br(JSON.stringify({version:2,heartbeats:e})).length}var ws;ws="",ns(new Kr("platform-logger",e=>new wi(e),"PRIVATE")),ns(new Kr("heartbeat",e=>new gs(e),"PRIVATE")),us(xi,_i,ws),us(xi,_i,"esm2020"),us("fire-js","");var xs,_s,Ss="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Es={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,o=e.g[3];s=t+(o^n&(i^o))+r[0]+3614090360&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[3]+3250441966&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[4]+4118548399&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[7]+4249261313&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[8]+1770035416&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[11]+2304563134&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[12]+1804603682&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[15]+1236535329&4294967295,s=t+(i^o&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[11]+643717713&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[0]+3921069994&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[15]+3634488961&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[4]+3889429448&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[3]+4107603335&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[8]+1163531501&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[7]+1735328473&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^o)+r[5]+4294588738&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[11]+1839030562&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[1]+2763975236&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[7]+4139469664&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[13]+681279174&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[3]+3572445317&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[9]+3654602809&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[15]+530742520&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~o))+r[0]+4096336452&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[14]+2878612391&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[12]+1700485571&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[10]+4293915773&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[8]+1873313359&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[6]+2734768916&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[4]+4149444226&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[2]+718787259&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,o=0;for(;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return h(o(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=o(n)).j(t);d(c)||c.l(e)>0;)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=o(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return o(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),o=e.i(t)>>>16,a=65535&e.i(t);n[2*i+2*t]+=s*a,p(n,2*i+2*t),n[2*i+2*t+1]+=r*a,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*o,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*o,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,_s=Es.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=o(Math.pow(n,8));let i=a;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=o(Math.pow(n,s)),i=i.j(s).add(o(e))):(i=i.j(r),i=i.add(o(e)))}return i},xs=Es.Integer=r}).apply("undefined"!==typeof Ss?Ss:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ks,Ns,Cs,Ts,Is,As,Ps,Rs,js="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Os={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof js&&js];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(_)}};function _(){for(var e;e=m();){try{e.h.call(e.g)}catch(Ke){p(Ke)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function S(){this.u=this.u,this.C=this.C}function E(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},E.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(Ke){}return e}();function N(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){E.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(C,E),C.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var T="closure_listenable_"+(1e6*Math.random()|0),I=0;function A(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++I,this.da=this.fa=!1}function P(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function R(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function j(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(P(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}L.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const o=F(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new A(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var U="closure_lm_"+(1e6*Math.random()|0),V={};function z(e,t,n,r,i){if(r&&r.once)return q(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)z(e,t[s],n,r,i);return null}return n=X(n),e&&e[T]?e.J(t,n,o(r)?!!r.capture:!!r,i):B(e,t,n,!1,r,i)}function B(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const a=o(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[U]=l=new L(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=K;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)k||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(G(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)q(e,t[s],n,r,i);return null}return n=X(n),e&&e[T]?e.K(t,n,o(r)?!!r.capture:!!r,i):B(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=X(n),e&&e[T]?(e=e.i,(s=String(t).toString())in e.g&&((n=F(t=e.g[s],n,r,i))>-1&&(P(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,i)),(n=e>-1?t[e]:null)&&W(n))}function W(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[T])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(G(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(M(n,e),0==n.h&&(n.src=null,t[U]=null)):P(e)}}}function G(e){return e in V?V[e]:V[e]="on"+e}function K(e,t){if(e.da)e=!0;else{t=new C(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&W(e),e=n.call(r,t)}return e}function Q(e){return(e=e[U])instanceof L?e:null}var $="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[$]||(e[$]=function(t){return e.handleEvent(t)}),e[$])}function Y(){S.call(this),this.i=new L(this),this.M=this,this.G=null}function J(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new E(t,e);else if(t instanceof E)t.target=t.target||e;else{var i=t;D(t=new E(r,e),i)}let s,o;if(i=!0,n)for(o=n.length-1;o>=0;o--)s=t.g=n[o],i=Z(s,r,!0,t)&&i;if(s=t.g=e,i=Z(s,r,!0,t)&&i,i=Z(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)s=t.g=n[o],i=Z(s,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const o=t[s];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&M(e.i,o),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(Y,S),Y.prototype[T]=!0,Y.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},Y.prototype.N=function(){if(Y.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)P(n[e]);delete e.g[t],e.h--}}this.G=null},Y.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Y.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends S{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){S.call(this),this.h=e,this.g={}}u(ne,S);var re=[];function ie(e){R(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,oe=s.JSON.parse,ae=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){E.call(this,"d")}function he(){E.call(this,"c")}u(de,E),u(he,E);var fe={},pe=null;function me(){return pe=pe||new Y}function ge(e){E.call(this,fe.Ia,e)}function ye(e){const t=me();J(t,new ge(t))}function ve(e,t){E.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();J(t,new ve(t,e))}function we(e,t){E.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function _e(){this.g=!0}function Se(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(Ge){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,E),fe.STAT_EVENT="statevent",u(ve,E),fe.Ja="timingevent",u(we,E),_e.prototype.ua=function(){this.g=!1},_e.prototype.info=function(){};var Ee,ke={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ne={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function Te(e){return encodeURIComponent(String(e))}function Ie(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ae(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}u(Ce,le),Ce.prototype.g=function(){return new XMLHttpRequest},Ee=new Ce;var Re={},je={};function Oe(e,t,n){e.M=1,e.A=ft(at(t)),e.u=n,e.R=!0,De(e,null)}function De(e,t){e.F=Date.now(),Fe(e),e.B=at(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),Tt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Pe,e.g=mn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=z(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?j(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var o="",a=s.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+l+"&":o+(e+"=redacted&")}}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?je:(n=Number(t.substring(n,r)),isNaN(n)?Re:(r+=1)+n>t.length?je:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Ue(e,e.H)}function Ue(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(l(e.aa,e),t)}function Ve(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function ze(e){0==e.j.I||e.K||un(e.j,e)}function Be(e){Ve(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function qe(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ye(n.h,e)))if(!e.L&&Ye(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(nt){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;cn(n),Jt(n)}on(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(l(n.Va,n),6e3));Xe(n.h)<=1&&n.ta&&(n.ta=void 0)}else hn(n,11)}else if((e.L||n.g==e)&&cn(n),!N(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ze(s,s.h),s.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,ht(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((r=n).na=pn(r,r.L?r.ba:null,r.W),o.L){et(r.h,o);var a=o,c=r.O;c&&(a.H=c),a.D&&(Ve(a),Fe(a)),r.g=o}else sn(r);n.i.length>0&&en(n)}else"stop"!=l[0]&&"close"!=l[0]||hn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?hn(n,7):Yt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(nt){}}Ae.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Kt(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const l=Kt(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||4!=l||7==c||ye(),Ve(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Qt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Kt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),ze(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(r)){var o=r;break t}}o=null}if(!(e=o)){this.o=!1,this.m=3,be(12),Be(this),ze(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==je){4==l&&(this.m=4,be(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==Re){this.m=4,be(15),Se(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),qe(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),an(a),a.P=!0,be(11))}}else Se(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),ze(this)}else Se(this.i,this.l,n,null),qe(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?un(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Kt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(N(e[r]))continue;var n=Ie(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),ze(this)}}}catch(mt){}},Ae.prototype.cancel=function(){this.K=!0,Be(this)},Ae.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),Be(this),this.m=2,ze(this)):Ue(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ye(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ze(e,t){e.g?e.g.add(t):e.h=t}function et(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function rt(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}Qe.prototype.cancel=function(){if(this.i=rt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof ot?(this.l=e.l,lt(this,e.j),this.o=e.o,this.g=e.g,ct(this,e.u),this.h=e.h,dt(this,It(e.i)),this.m=e.m):e&&(t=String(e).match(it))?(this.l=!1,lt(this,t[1]||"",!0),this.o=pt(t[2]||""),this.g=pt(t[3]||"",!0),ct(this,t[4]),this.h=pt(t[5]||"",!0),dt(this,t[6]||"",!0),this.m=pt(t[7]||"")):(this.l=!1,this.i=new St(null,this.l))}function at(e){return new ot(e)}function lt(e,t,n){e.j=n?pt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ct(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function dt(e,t,n){t instanceof St?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(kt(this,t),Tt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=gt(t,xt)),e.i=new St(t,e.l))}function ht(e,t,n){e.i.set(t,n)}function ft(e){return ht(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function pt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function gt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,yt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function yt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(gt(t,vt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(gt(t,vt,!0),"@"),e.push(Te(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(gt(n,"/"==n.charAt(0)?wt:bt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",gt(n,_t)),e.join("")},ot.prototype.resolve=function(e){const t=at(this);let n=!!e.j;n?lt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)ct(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?dt(t,It(e.i)):n=!!e.m,n&&(t.m=e.m),t};var vt=/[#\/\?@]/g,bt=/[#\?:]/g,wt=/[#\?]/g,xt=/[#\?@]/g,_t=/#/g;function St(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function kt(e,t){Et(e),t=At(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Nt(e,t){return Et(e),t=At(e,t),e.g.has(t)}function Ct(e,t){Et(e);let n=[];if("string"===typeof t)Nt(e,t)&&(n=n.concat(e.g.get(At(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function Tt(e,t,n){kt(e,t),n.length>0&&(e.i=null,e.g.set(At(e,t),h(n)),e.h+=n.length)}function It(e){const t=new St;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function At(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Pt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(Ge){}}function Rt(){this.g=new ae}function jt(e){this.i=e.Sb||null,this.h=e.ab||!1}function Ot(e,t){Y.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Dt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Lt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Mt(e)}function Mt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ft(e){let t="";return R(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ut(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ft(n),"string"===typeof e?null!=n&&Te(n):ht(e,t,n))}function Vt(e){Y.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=St.prototype).add=function(e,t){Et(this),this.i=null,e=At(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return Et(this),this.i=null,Nt(this,e=At(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=Ct(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Te(n);n=Ct(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Te(n[t])),e.push(r)}}return this.i=e.join("&")},u(jt,le),jt.prototype.g=function(){return new Ot(this.i,this.h)},u(Ot,Y),(e=Ot.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Mt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Lt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Mt(this)),this.g&&(this.readyState=3,Mt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Lt(this):Mt(this),3==this.readyState&&Dt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Lt(this))},e.Na=function(e){this.g&&(this.response=e,Lt(this))},e.ga=function(){this.g&&Lt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ot.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Vt,Y);var zt=/^https?$/i,Bt=["POST","PUT"];function qt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Ht(e),Gt(e)}function Ht(e){e.A||(e.A=!0,J(e,"complete"),J(e,"error"))}function Wt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Kt(e))setTimeout(e.Ca.bind(e),0);else if(J(e,"readystatechange"),4==Kt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(it)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!zt.test(t?t.toLowerCase():"")}n=r}if(n)J(e,"complete"),J(e,"success");else{e.o=6;try{var o=Kt(e)>2?e.g.statusText:""}catch(st){o=""}e.l=o+" ["+e.ca()+"]",Ht(e)}}finally{Gt(e)}}}function Gt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const n=e.g;e.g=null,t||J(e,"ready");try{n.onreadystatechange=null}catch(Je){}}}function Kt(e){return e.g?e.g.readyState:0}function Qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(tt){return null}}function $t(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xt(e){this.za=0,this.i=[],this.j=new _e,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$t("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$t("baseRetryDelayMs",5e3,e),this.Za=$t("retryDelaySeedMs",1e4,e),this.Ta=$t("forwardChannelMaxRetries",2,e),this.va=$t("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Ba=new Rt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Yt(e){if(Zt(e),3==e.I){var t=e.V++,n=at(e.J);if(ht(n,"SID",e.M),ht(n,"RID",t),ht(n,"TYPE","terminate"),nn(e,n),(t=new Ae(e,e.j,t)).M=2,t.A=ft(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(Je){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=mn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}fn(e)}function Jt(e){e.g&&(an(e),e.g.cancel(),e.g=null)}function Zt(e){Jt(e),e.v&&(s.clearTimeout(e.v),e.v=null),cn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function en(e){if(!$e(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||x(),b||(v(),b=!0),w.add(t,e),e.D=0}}function tn(e,t){var n;n=t?t.l:e.V++;const r=at(e.J);ht(r,"SID",e.M),ht(r,"RID",n),ht(r,"AID",e.K),nn(e,r),e.u&&e.o&&Ut(r,e.u,e.o),n=new Ae(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=rn(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ze(e.h,n),Oe(n,r,t)}function nn(e,t){e.H&&R(e.H,function(e,n){ht(t,n,e)}),e.l&&R({},function(e,n){ht(t,n,e)})}function rn(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;o(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(ut){throw e.push(s+"type="+encodeURIComponent("_badmap")),ut}}catch(ut){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function sn(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||x(),b||(v(),b=!0),w.add(t,e),e.A=0}}function on(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=xe(l(e.Da,e),dn(e,e.A)),e.A++,!0)}function an(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function ln(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=at(e.na);ht(t,"RID","rpc"),ht(t,"SID",e.M),ht(t,"AID",e.K),ht(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&ht(t,"TO",e.ia),ht(t,"TYPE","xmlhttp"),nn(e,t),e.u&&e.o&&Ut(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=ft(at(t)),n.u=null,n.R=!0,De(n,e)}function cn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function un(e,t){var n=null;if(e.g==t){cn(e),an(e),e.g=null;var r=2}else{if(!Ye(e.h,t))return;n=t.G,et(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;J(r=me(),new we(r,n)),en(e)}else sn(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=xe(l(e.Ea,e,t),dn(e,e.D)),e.D++,!0))}(e,t)||2==r&&on(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:hn(e,5);break;case 4:hn(e,10);break;case 3:hn(e,6);break;default:hn(e,2)}}function dn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function hn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||lt(r,"https"),ft(r),t?function(e,t){const n=new _e;if(s.Image){const r=new Image;r.onload=c(Pt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Pt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Pt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Pt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new _e;const n=new AbortController,r=setTimeout(()=>{n.abort(),Pt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Pt(0,0,!0,t):Pt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Pt(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),fn(e),Zt(e)}function fn(e){if(e.I=0,e.ja=[],e.l){const t=rt(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function pn(e,t,n){var r=n instanceof ot?at(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ct(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new ot(null);r&&lt(e,r),t&&(e.g=t),i&&ct(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&ht(r,n,t),ht(r,"VER",e.ka),nn(e,r),r}function mn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Vt(new jt({ab:n})):new Vt(e.ma)).Fa(e.L),t}function gn(){}function yn(){}function vn(e,t){Y.call(this),this.g=new Xt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!N(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new xn(this)}function bn(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wn(){he.call(this),this.status=1}function xn(e){this.g=e}(e=Vt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ee.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Ge){return void qt(this,Ge)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Bt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(Ge){qt(this,Ge)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,J(this,"complete"),J(this,"abort"),Gt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gt(this,!0)),Vt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Wt(this):this.Xa())},e.Xa=function(){Wt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Kt(this)>2?this.g.status:-1}catch(We){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(We){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),oe(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Xt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=pn(this,null,this.W),en(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ae(this,this.j,e);let s=this.o;if(this.U&&(s?(s=j(s),D(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=rn(this,i,t),ht(n=at(this.J),"RID",e),ht(n,"CVER",22),this.G&&ht(n,"X-HTTP-Session-Id",this.G),nn(this,n),s&&(this.R?t="headers="+Te(Ft(s))+"&"+t:this.u&&Ut(n,this.u,s)),Ze(this.h,i),this.Ra&&ht(n,"TYPE","init"),this.S?(ht(n,"$req",t),ht(n,"SID","null"),i.U=!0,Oe(i,n,null)):Oe(i,n,t),this.I=2}}else 3==this.I&&(e?tn(this,e):0==this.i.length||$e(this.h)||tn(this))},e.Da=function(){if(this.v=null,ln(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Jt(this),ln(this))},e.Va=function(){null!=this.C&&(this.C=null,Jt(this),on(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=gn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},yn.prototype.g=function(e,t){return new vn(e,t)},u(vn,Y),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Yt(this.g)},vn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&en(t)},vn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,vn.Z.N.call(this)},u(bn,de),u(wn,he),u(xn,gn),xn.prototype.ra=function(){J(this.g,"a")},xn.prototype.qa=function(e){J(this.g,new bn(e))},xn.prototype.pa=function(e){J(this.g,new wn)},xn.prototype.oa=function(){J(this.g,"b")},yn.prototype.createWebChannel=yn.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,Rs=Os.createWebChannelTransport=function(){return new yn},Ps=Os.getStatEventTarget=function(){return me()},As=Os.Event=fe,Is=Os.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,Ts=Os.ErrorCode=ke,Ne.COMPLETE="complete",Cs=Os.EventType=Ne,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",Y.prototype.listen=Y.prototype.J,Ns=Os.WebChannel=ce,Os.FetchXmlHttpFactory=jt,Vt.prototype.listenOnce=Vt.prototype.K,Vt.prototype.getLastError=Vt.prototype.Ha,Vt.prototype.getLastErrorCode=Vt.prototype.ya,Vt.prototype.getStatus=Vt.prototype.ca,Vt.prototype.getResponseJson=Vt.prototype.La,Vt.prototype.getResponseText=Vt.prototype.la,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Fa,ks=Os.XhrIo=Vt}).apply("undefined"!==typeof js?js:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ds="@firebase/firestore",Ls="4.9.2";class Ms{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ms.UNAUTHENTICATED=new Ms(null),Ms.GOOGLE_CREDENTIALS=new Ms("google-credentials-uid"),Ms.FIRST_PARTY=new Ms("first-party-uid"),Ms.MOCK_USER=new Ms("mock-user");let Fs="12.3.0";const Us=new ri("@firebase/firestore");function Vs(){return Us.logLevel}function zs(e){if(Us.logLevel<=Jr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Hs);Us.debug("Firestore (".concat(Fs,"): ").concat(e),...i)}}function Bs(e){if(Us.logLevel<=Jr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Hs);Us.error("Firestore (".concat(Fs,"): ").concat(e),...i)}}function qs(e){if(Us.logLevel<=Jr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Hs);Us.warn("Firestore (".concat(Fs,"): ").concat(e),...i)}}function Hs(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(ze){return e}}function Ws(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Gs(e,r,n)}function Gs(e,t,n){let r="FIRESTORE (".concat(Fs,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Bs(r),new Error(r)}function Ks(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Gs(t,i,r)}function Qs(e,t){return e}const $s={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xs extends Lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Ys{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Js{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Zs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ms.UNAUTHENTICATED))}shutdown(){}}class eo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class to{constructor(e){this.t=e,this.currentUser=Ms.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ks(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Ys;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ys,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{zs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(zs("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ys)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(zs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ks("string"==typeof t.accessToken,31837,{l:t}),new Js(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ks(null===e||"string"==typeof e,2055,{h:e}),new Ms(e)}}class no{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ms.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ro{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new no(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ms.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class io{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class so{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,is(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ks(void 0===this.o,3512);const n=e=>{null!=e.error&&zs("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,zs("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{zs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):zs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new io(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ks("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new io(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function oo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ao{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=oo(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function lo(e,t){return e<t?-1:e>t?1:0}function co(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return fo(n)===fo(i)?lo(n,i):fo(n)?1:-1}return lo(e.length,t.length)}const uo=55296,ho=57343;function fo(e){const t=e.charCodeAt(0);return t>=uo&&t<=ho}function po(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const mo="__name__";class go{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ws(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Ws(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===go.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof go?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=go.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return lo(e.length,t.length)}static compareSegments(e,t){const n=go.isNumericId(e),r=go.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?go.extractNumericId(e).compare(go.extractNumericId(t)):co(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class yo extends go{construct(e,t,n){return new yo(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Xs($s.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new yo(e)}static emptyPath(){return new yo([])}}const vo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bo extends go{construct(e,t,n){return new bo(e,t,n)}static isValidIdentifier(e){return vo.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bo.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===mo}static keyField(){return new bo([mo])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Xs($s.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Xs($s.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Xs($s.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Xs($s.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bo(t)}static emptyPath(){return new bo([])}}class wo{constructor(e){this.path=e}static fromPath(e){return new wo(yo.fromString(e))}static fromName(e){return new wo(yo.fromString(e).popFirst(5))}static empty(){return new wo(yo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wo(new yo(e.slice()))}}function xo(e,t,n){if(!n)throw new Xs($s.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function _o(e){if(!wo.isDocumentKey(e))throw new Xs($s.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function So(e){if(wo.isDocumentKey(e))throw new Xs($s.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Eo(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ko(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ws(12329,{type:typeof e})}function No(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xs($s.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ko(e);throw new Xs($s.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Co(e,t){const n={typeString:e};return t&&(n.value=t),n}function To(e,t){if(!Eo(e))throw new Xs($s.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(i&&typeof o!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new Xs($s.INVALID_ARGUMENT,n);return!0}const Io=-62135596800,Ao=1e6;class Po{static now(){return Po.fromMillis(Date.now())}static fromDate(e){return Po.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ao);return new Po(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xs($s.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xs($s.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Io)throw new Xs($s.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xs($s.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ao}_compareTo(e){return this.seconds===e.seconds?lo(this.nanoseconds,e.nanoseconds):lo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Po._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(To(e,Po._jsonSchema))return new Po(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Io;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Po._jsonSchemaVersion="firestore/timestamp/1.0",Po._jsonSchema={type:Co("string",Po._jsonSchemaVersion),seconds:Co("number"),nanoseconds:Co("number")};class Ro{static fromTimestamp(e){return new Ro(e)}static min(){return new Ro(new Po(0,0))}static max(){return new Ro(new Po(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const jo=-1;class Oo{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Oo.UNKNOWN_ID=-1;function Do(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ro.fromTimestamp(1e9===r?new Po(n+1,0):new Po(n,r));return new Mo(i,wo.empty(),t)}function Lo(e){return new Mo(e.readTime,e.key,jo)}class Mo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Mo(Ro.min(),wo.empty(),jo)}static max(){return new Mo(Ro.max(),wo.empty(),jo)}}function Fo(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=wo.comparator(e.documentKey,t.documentKey),0!==n?n:lo(e.largestBatchId,t.largestBatchId))}const Uo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function zo(e){if(e.code!==$s.FAILED_PRECONDITION||e.message!==Uo)throw e;zs("LocalStore","Unexpectedly lost primary lease")}class Bo{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ws(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Bo((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Bo?t:Bo.resolve(t)}catch(e){return Bo.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Bo.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Bo.reject(t)}static resolve(e){return new Bo((t,n)=>{t(e)})}static reject(e){return new Bo((t,n)=>{n(e)})}static waitFor(e){return new Bo((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Bo.resolve(!1);for(const n of e)t=t.next(e=>e?Bo.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Bo((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Bo((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function qo(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ho(e){return"IndexedDbTransactionError"===e.name}class Wo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wo.ce=-1;const Go=-1;function Ko(e){return null==e}function Qo(e){return 0===e&&1/e==-1/0}function $o(e){return"number"==typeof e&&Number.isInteger(e)&&!Qo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Xo="\x01";function Yo(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Zo(t)),t=Jo(e.get(n),t);return Zo(t)}function Jo(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Xo:n+="\x01\x11";break;default:n+=t}}return n}function Zo(e){return e+Xo+"\x01"}const ea="remoteDocuments",ta="owner",na="mutationQueues",ra="mutations";const ia="documentMutations",sa="remoteDocumentsV14",oa="remoteDocumentGlobal",aa="targets",la="targetDocuments",ca="targetGlobal",ua="collectionParents",da="clientMetadata",ha="bundles",fa="namedQueries",pa="indexConfiguration",ma="indexState",ga="indexEntries",ya="documentOverlays",va="globals",ba=[na,ra,ia,ea,aa,ta,ca,la,da,oa,ua,ha,fa],wa=[na,ra,ia,sa,aa,ta,ca,la,da,oa,ua,ha,fa,ya],xa=wa,_a=[...xa,pa,ma,ga];function Sa(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ea(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ka(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Na{constructor(e,t){this.comparator=e,this.root=t||Ta.EMPTY}insert(e,t){return new Na(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ta.BLACK,null,null))}remove(e){return new Na(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ta.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ca(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ca(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ca(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ca(this.root,e,this.comparator,!0)}}class Ca{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ta{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ta.RED,this.left=null!=r?r:Ta.EMPTY,this.right=null!=i?i:Ta.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Ta(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ta.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ta.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ta.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ta.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ws(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ws(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ws(27949);return e+(this.isRed()?0:1)}}Ta.EMPTY=null,Ta.RED=!0,Ta.BLACK=!1,Ta.EMPTY=new class{constructor(){this.size=0}get key(){throw Ws(57766)}get value(){throw Ws(16141)}get color(){throw Ws(16727)}get left(){throw Ws(29726)}get right(){throw Ws(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ta(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ia{constructor(e){this.comparator=e,this.data=new Na(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Aa(this.data.getIterator())}getIteratorFrom(e){return new Aa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ia))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ia(this.comparator);return t.data=e,t}}class Aa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Pa{constructor(e){this.fields=e,e.sort(bo.comparator)}static empty(){return new Pa([])}unionWith(e){let t=new Ia(bo.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Pa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return po(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Ra extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ja{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ra("Invalid base64 string: "+e):e}}(e);return new ja(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ja(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ja.EMPTY_BYTE_STRING=new ja("");const Oa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Da(e){if(Ks(!!e,39018),"string"==typeof e){let t=0;const n=Oa.exec(e);if(Ks(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:La(e.seconds),nanos:La(e.nanos)}}function La(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ma(e){return"string"==typeof e?ja.fromBase64String(e):ja.fromUint8Array(e)}const Fa="server_timestamp",Ua="__type__",Va="__previous_value__",za="__local_write_time__";function Ba(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Ua])||void 0===t?void 0:t.stringValue)===Fa}function qa(e){const t=e.mapValue.fields[Va];return Ba(t)?qa(t):t}function Ha(e){const t=Da(e.mapValue.fields[za].timestampValue);return new Po(t.seconds,t.nanos)}class Wa{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Ga="(default)";class Ka{constructor(e,t){this.projectId=e,this.database=t||Ga}static empty(){return new Ka("","")}get isDefaultDatabase(){return this.database===Ga}isEqual(e){return e instanceof Ka&&e.projectId===this.projectId&&e.database===this.database}}const Qa="__type__",$a="__max__",Xa={mapValue:{fields:{__type__:{stringValue:$a}}}},Ya="__vector__",Ja="value";function Za(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ba(e)?4:gl(e)?9007199254740991:pl(e)?10:11:Ws(28295,{value:e})}function el(e,t){if(e===t)return!0;const n=Za(e);if(n!==Za(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ha(e).isEqual(Ha(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Da(e.timestampValue),r=Da(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ma(e.bytesValue).isEqual(Ma(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return La(e.geoPointValue.latitude)===La(t.geoPointValue.latitude)&&La(e.geoPointValue.longitude)===La(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return La(e.integerValue)===La(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=La(e.doubleValue),r=La(t.doubleValue);return n===r?Qo(n)===Qo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return po(e.arrayValue.values||[],t.arrayValue.values||[],el);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Sa(n)!==Sa(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!el(n[i],r[i])))return!1;return!0}(e,t);default:return Ws(52216,{left:e})}}function tl(e,t){return void 0!==(e.values||[]).find(e=>el(e,t))}function nl(e,t){if(e===t)return 0;const n=Za(e),r=Za(t);if(n!==r)return lo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return lo(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=La(e.integerValue||e.doubleValue),r=La(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return rl(e.timestampValue,t.timestampValue);case 4:return rl(Ha(e),Ha(t));case 5:return co(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ma(e),r=Ma(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=lo(n[i],r[i]);if(0!==e)return e}return lo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=lo(La(e.latitude),La(t.latitude));return 0!==n?n:lo(La(e.longitude),La(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return il(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,s){const o=e.fields||{},a=t.fields||{},l=null===(n=o[Ja])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Ja])||void 0===r?void 0:r.arrayValue,u=lo((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:il(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Xa.mapValue&&t===Xa.mapValue)return 0;if(e===Xa.mapValue)return 1;if(t===Xa.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=co(r[o],s[o]);if(0!==e)return e;const t=nl(n[r[o]],i[s[o]]);if(0!==t)return t}return lo(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ws(23264,{he:n})}}function rl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return lo(e,t);const n=Da(e),r=Da(t),i=lo(n.seconds,r.seconds);return 0!==i?i:lo(n.nanos,r.nanos)}function il(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=nl(n[i],r[i]);if(e)return e}return lo(n.length,r.length)}function sl(e){return ol(e)}function ol(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Da(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ma(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return wo.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ol(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ol(e.fields[i]));return n+"}"}(e.mapValue):Ws(61005,{value:e})}function al(e){switch(Za(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=qa(e);return t?16+al(t):16;case 5:return 2*e.stringValue.length;case 6:return Ma(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+al(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Ea(e.fields,(e,n)=>{t+=e.length+al(n)}),t}(e.mapValue);default:throw Ws(13486,{value:e})}}function ll(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function cl(e){return!!e&&"integerValue"in e}function ul(e){return!!e&&"arrayValue"in e}function dl(e){return!!e&&"nullValue"in e}function hl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function fl(e){return!!e&&"mapValue"in e}function pl(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Qa])||void 0===t?void 0:t.stringValue)===Ya}function ml(e){if(e.geoPointValue)return{geoPointValue:Ht({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Ht({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ea(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ml(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ml(e.arrayValue.values[n]);return t}return Ht({},e)}function gl(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===$a}class yl{constructor(e){this.value=e}static empty(){return new yl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!fl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ml(t)}setAll(e){let t=bo.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ml(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());fl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return el(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];fl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ea(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new yl(ml(this.value))}}function vl(e){const t=[];return Ea(e.fields,(e,n)=>{const r=new bo([e]);if(fl(n)){const e=vl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Pa(t)}class bl{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new bl(e,0,Ro.min(),Ro.min(),Ro.min(),yl.empty(),0)}static newFoundDocument(e,t,n,r){return new bl(e,1,t,Ro.min(),n,r,0)}static newNoDocument(e,t){return new bl(e,2,t,Ro.min(),Ro.min(),yl.empty(),0)}static newUnknownDocument(e,t){return new bl(e,3,t,Ro.min(),Ro.min(),yl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ro.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ro.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class wl{constructor(e,t){this.position=e,this.inclusive=t}}function xl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?wo.comparator(wo.fromName(o.referenceValue),n.key):nl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function _l(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!el(e.position[n],t.position[n]))return!1;return!0}class Sl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function El(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class kl{}class Nl extends kl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ol(e,t,n):"array-contains"===t?new Fl(e,n):"in"===t?new Ul(e,n):"not-in"===t?new Vl(e,n):"array-contains-any"===t?new zl(e,n):new Nl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Dl(e,n):new Ll(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(nl(t,this.value)):null!==t&&Za(this.value)===Za(t)&&this.matchesComparison(nl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ws(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cl extends kl{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Cl(e,t)}matches(e){return Tl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Tl(e){return"and"===e.op}function Il(e){return Al(e)&&Tl(e)}function Al(e){for(const t of e.filters)if(t instanceof Cl)return!1;return!0}function Pl(e){if(e instanceof Nl)return e.field.canonicalString()+e.op.toString()+sl(e.value);if(Il(e))return e.filters.map(e=>Pl(e)).join(",");{const t=e.filters.map(e=>Pl(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Rl(e,t){return e instanceof Nl?function(e,t){return t instanceof Nl&&e.op===t.op&&e.field.isEqual(t.field)&&el(e.value,t.value)}(e,t):e instanceof Cl?function(e,t){return t instanceof Cl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Rl(n,t.filters[r]),!0)}(e,t):void Ws(19439)}function jl(e){return e instanceof Nl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(sl(e.value))}(e):e instanceof Cl?function(e){return e.op.toString()+" {"+e.getFilters().map(jl).join(" ,")+"}"}(e):"Filter"}class Ol extends Nl{constructor(e,t,n){super(e,t,n),this.key=wo.fromName(n.referenceValue)}matches(e){const t=wo.comparator(e.key,this.key);return this.matchesComparison(t)}}class Dl extends Nl{constructor(e,t){super(e,"in",t),this.keys=Ml("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ll extends Nl{constructor(e,t){super(e,"not-in",t),this.keys=Ml("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ml(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>wo.fromName(e.referenceValue))}class Fl extends Nl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ul(t)&&tl(t.arrayValue,this.value)}}class Ul extends Nl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tl(this.value.arrayValue,t)}}class Vl extends Nl{constructor(e,t){super(e,"not-in",t)}matches(e){if(tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!tl(this.value.arrayValue,t)}}class zl extends Nl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ul(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>tl(this.value.arrayValue,e))}}class Bl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function ql(e){return new Bl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Hl(e){const t=Qs(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Pl(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ko(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>sl(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>sl(e)).join(",")),t.Te=e}return t.Te}function Wl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!El(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Rl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_l(e.startAt,t.startAt)&&_l(e.endAt,t.endAt)}function Gl(e){return wo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Kl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ql(e,t,n,r,i,s,o,a){return new Kl(e,t,n,r,i,s,o,a)}function $l(e){return new Kl(e)}function Xl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Yl(e){return null!==e.collectionGroup}function Jl(e){const t=Qs(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ia(bo.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Sl(r,n))}),e.has(bo.keyField().canonicalString())||t.Ie.push(new Sl(bo.keyField(),n))}return t.Ie}function Zl(e){const t=Qs(e);return t.Ee||(t.Ee=ec(t,Jl(e))),t.Ee}function ec(e,t){if("F"===e.limitType)return ql(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Sl(e.field,t)});const n=e.endAt?new wl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new wl(e.startAt.position,e.startAt.inclusive):null;return ql(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function tc(e,t){const n=e.filters.concat([t]);return new Kl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function nc(e,t,n){return new Kl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function rc(e,t){return Wl(Zl(e),Zl(t))&&e.limitType===t.limitType}function ic(e){return"".concat(Hl(Zl(e)),"|lt:").concat(e.limitType)}function sc(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>jl(e)).join(", "),"]")),Ko(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>sl(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>sl(e)).join(",")),"Target(".concat(t,")")}(Zl(e)),"; limitType=").concat(e.limitType,")")}function oc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):wo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Jl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=xl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Jl(e),t))&&!(e.endAt&&!function(e,t,n){const r=xl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Jl(e),t))}(e,t)}function ac(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function lc(e){return(t,n)=>{let r=!1;for(const i of Jl(e)){const e=cc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function cc(e,t,n){const r=e.field.isKeyField()?wo.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?nl(r,i):Ws(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ws(19790,{direction:e.dir})}}class uc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ea(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ka(this.inner)}size(){return this.innerSize}}const dc=new Na(wo.comparator);function hc(){return dc}const fc=new Na(wo.comparator);function pc(){let e=fc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function mc(e){let t=fc;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function gc(){return vc()}function yc(){return vc()}function vc(){return new uc(e=>e.toString(),(e,t)=>e.isEqual(t))}const bc=new Na(wo.comparator),wc=new Ia(wo.comparator);function xc(){let e=wc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const _c=new Ia(lo);function Sc(){return _c}function Ec(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qo(t)?"-0":t}}function kc(e){return{integerValue:""+e}}function Nc(e,t){return $o(t)?kc(t):Ec(e,t)}class Cc{constructor(){this._=void 0}}function Tc(e,t,n){return e instanceof Pc?function(e,t){const n={fields:{[Ua]:{stringValue:Fa},[za]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ba(t)&&(t=qa(t)),t&&(n.fields[Va]=t),{mapValue:n}}(n,t):e instanceof Rc?jc(e,t):e instanceof Oc?Dc(e,t):function(e,t){const n=Ac(e,t),r=Mc(n)+Mc(e.Ae);return cl(n)&&cl(e.Ae)?kc(r):Ec(e.serializer,r)}(e,t)}function Ic(e,t,n){return e instanceof Rc?jc(e,t):e instanceof Oc?Dc(e,t):n}function Ac(e,t){return e instanceof Lc?function(e){return cl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Pc extends Cc{}class Rc extends Cc{constructor(e){super(),this.elements=e}}function jc(e,t){const n=Fc(t);for(const r of e.elements)n.some(e=>el(e,r))||n.push(r);return{arrayValue:{values:n}}}class Oc extends Cc{constructor(e){super(),this.elements=e}}function Dc(e,t){let n=Fc(t);for(const r of e.elements)n=n.filter(e=>!el(e,r));return{arrayValue:{values:n}}}class Lc extends Cc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Mc(e){return La(e.integerValue||e.doubleValue)}function Fc(e){return ul(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Uc{constructor(e,t){this.field=e,this.transform=t}}class Vc{constructor(e,t){this.version=e,this.transformResults=t}}class zc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zc}static exists(e){return new zc(void 0,e)}static updateTime(e){return new zc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class qc{}function Hc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new eu(e.key,zc.none()):new $c(e.key,e.data,zc.none());{const n=e.data,r=yl.empty();let i=new Ia(bo.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Xc(e.key,r,new Pa(i.toArray()),zc.none())}}function Wc(e,t,n){e instanceof $c?function(e,t,n){const r=e.value.clone(),i=Jc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Xc?function(e,t,n){if(!Bc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Jc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Yc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Gc(e,t,n,r){return e instanceof $c?function(e,t,n,r){if(!Bc(e.precondition,t))return n;const i=e.value.clone(),s=Zc(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Xc?function(e,t,n,r){if(!Bc(e.precondition,t))return n;const i=Zc(e.fieldTransforms,r,t),s=t.data;return s.setAll(Yc(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Bc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Kc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ac(r.transform,e||null);null!=i&&(null===n&&(n=yl.empty()),n.set(r.field,i))}return n||null}function Qc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&po(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Rc&&t instanceof Rc||e instanceof Oc&&t instanceof Oc?po(e.elements,t.elements,el):e instanceof Lc&&t instanceof Lc?el(e.Ae,t.Ae):e instanceof Pc&&t instanceof Pc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class $c extends qc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Xc extends qc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Yc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Jc(e,t,n){const r=new Map;Ks(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ic(o,a,n[i]))}return r}function Zc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Tc(e,s,t))}return r}class eu extends qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tu extends qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nu{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Wc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Gc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Gc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=yc();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Hc(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Ro.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xc())}isEqual(e){return this.batchId===e.batchId&&po(this.mutations,e.mutations,(e,t)=>Qc(e,t))&&po(this.baseMutations,e.baseMutations,(e,t)=>Qc(e,t))}}class ru{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ks(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=bc;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new ru(e,t,n,r)}}class iu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class su{constructor(e,t){this.count=e,this.unchangedNames=t}}var ou,au;function lu(e){switch(e){case $s.OK:return Ws(64938);case $s.CANCELLED:case $s.UNKNOWN:case $s.DEADLINE_EXCEEDED:case $s.RESOURCE_EXHAUSTED:case $s.INTERNAL:case $s.UNAVAILABLE:case $s.UNAUTHENTICATED:return!1;case $s.INVALID_ARGUMENT:case $s.NOT_FOUND:case $s.ALREADY_EXISTS:case $s.PERMISSION_DENIED:case $s.FAILED_PRECONDITION:case $s.ABORTED:case $s.OUT_OF_RANGE:case $s.UNIMPLEMENTED:case $s.DATA_LOSS:return!0;default:return Ws(15467,{code:e})}}function cu(e){if(void 0===e)return Bs("GRPC error has no .code"),$s.UNKNOWN;switch(e){case ou.OK:return $s.OK;case ou.CANCELLED:return $s.CANCELLED;case ou.UNKNOWN:return $s.UNKNOWN;case ou.DEADLINE_EXCEEDED:return $s.DEADLINE_EXCEEDED;case ou.RESOURCE_EXHAUSTED:return $s.RESOURCE_EXHAUSTED;case ou.INTERNAL:return $s.INTERNAL;case ou.UNAVAILABLE:return $s.UNAVAILABLE;case ou.UNAUTHENTICATED:return $s.UNAUTHENTICATED;case ou.INVALID_ARGUMENT:return $s.INVALID_ARGUMENT;case ou.NOT_FOUND:return $s.NOT_FOUND;case ou.ALREADY_EXISTS:return $s.ALREADY_EXISTS;case ou.PERMISSION_DENIED:return $s.PERMISSION_DENIED;case ou.FAILED_PRECONDITION:return $s.FAILED_PRECONDITION;case ou.ABORTED:return $s.ABORTED;case ou.OUT_OF_RANGE:return $s.OUT_OF_RANGE;case ou.UNIMPLEMENTED:return $s.UNIMPLEMENTED;case ou.DATA_LOSS:return $s.DATA_LOSS;default:return Ws(39323,{code:e})}}(au=ou||(ou={}))[au.OK=0]="OK",au[au.CANCELLED=1]="CANCELLED",au[au.UNKNOWN=2]="UNKNOWN",au[au.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",au[au.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",au[au.NOT_FOUND=5]="NOT_FOUND",au[au.ALREADY_EXISTS=6]="ALREADY_EXISTS",au[au.PERMISSION_DENIED=7]="PERMISSION_DENIED",au[au.UNAUTHENTICATED=16]="UNAUTHENTICATED",au[au.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",au[au.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",au[au.ABORTED=10]="ABORTED",au[au.OUT_OF_RANGE=11]="OUT_OF_RANGE",au[au.UNIMPLEMENTED=12]="UNIMPLEMENTED",au[au.INTERNAL=13]="INTERNAL",au[au.UNAVAILABLE=14]="UNAVAILABLE",au[au.DATA_LOSS=15]="DATA_LOSS";let uu=null;function du(){return new TextEncoder}const hu=new xs([4294967295,4294967295],0);function fu(e){const t=du().encode(e),n=new _s;return n.update(t),new Uint8Array(n.digest())}function pu(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new xs([n,r],0),new xs([i,s],0)]}class mu{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new gu("Invalid padding: ".concat(t));if(n<0)throw new gu("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new gu("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new gu("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=xs.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(xs.fromNumber(n)));return 1===r.compare(hu)&&(r=new xs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=fu(e),[n,r]=pu(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new mu(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=fu(e),[n,r]=pu(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class yu{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,vu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new yu(Ro.min(),r,new Na(lo),hc(),xc())}}class vu{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new vu(n,t,xc(),xc(),xc())}}class bu{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class wu{constructor(e,t){this.targetId=e,this.Ce=t}}class xu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ja.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class _u{constructor(){this.ve=0,this.Fe=ku(),this.Me=ja.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xc(),t=xc(),n=xc();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ws(38017,{changeType:i})}}),new vu(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=ku()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ks(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Su{constructor(e){this.Ge=e,this.ze=new Map,this.je=hc(),this.Je=Eu(),this.He=Eu(),this.Ye=new Na(lo)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ws(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Gl(s))if(0===n){const e=new wo(s.path);this.et(t,e,bl.newNoDocument(e,Ro.min()))}else Ks(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=uu)||void 0===i||i.lt(function(e,t,n,r,i,s,o,a,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===d||void 0===d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(o=null===d||void 0===d||null===(a=d.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Ma(n).toUint8Array()}catch(e){if(e instanceof Ra)return qs("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new mu(s,r,i)}catch(e){return qs(e instanceof gu?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Gl(i.target)){const t=new wo(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,bl.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=xc();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new yu(e,t,this.Ye,this.je,n);return this.je=hc(),this.Je=Eu(),this.He=Eu(),this.Ye=new Na(lo),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new _u,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ia(lo),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ia(lo),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||zs("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _u),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Eu(){return new Na(wo.comparator)}function ku(){return new Na(wo.comparator)}const Nu={asc:"ASCENDING",desc:"DESCENDING"},Cu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tu={and:"AND",or:"OR"};class Iu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Au(e,t){return e.useProto3Json||Ko(t)?t:{value:t}}function Pu(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ru(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ju(e,t){return Pu(e,t.toTimestamp())}function Ou(e){return Ks(!!e,49232),Ro.fromTimestamp(function(e){const t=Da(e);return new Po(t.seconds,t.nanos)}(e))}function Du(e,t){return Lu(e,t).canonicalString()}function Lu(e,t){const n=function(e){return new yo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Mu(e){const t=yo.fromString(e);return Ks(rd(t),10190,{key:t.toString()}),t}function Fu(e,t){return Du(e.databaseId,t.path)}function Uu(e,t){const n=Mu(t);if(n.get(1)!==e.databaseId.projectId)throw new Xs($s.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xs($s.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wo(qu(n))}function Vu(e,t){return Du(e.databaseId,t)}function zu(e){const t=Mu(e);return 4===t.length?yo.emptyPath():qu(t)}function Bu(e){return new yo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qu(e){return Ks(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Hu(e,t,n){return{name:Fu(e,t),fields:n.value.mapValue.fields}}function Wu(e,t){let n;if(t instanceof $c)n={update:Hu(e,t.key,t.value)};else if(t instanceof eu)n={delete:Fu(e,t.key)};else if(t instanceof Xc)n={update:Hu(e,t.key,t.data),updateMask:nd(t.fieldMask)};else{if(!(t instanceof tu))return Ws(16599,{Vt:t.type});n={verify:Fu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Pc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Rc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Oc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Lc)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Ws(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ju(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ws(27497)}(e,t.precondition)),n}function Gu(e,t){return{documents:[Vu(e,t.path)]}}function Ku(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Vu(e,i);const s=function(e){if(0!==e.length)return td(Cl.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Zu(e.field),direction:Xu(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Au(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Qu(e){let t=zu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ks(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=$u(e);return t instanceof Cl&&Il(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new Sl(ed(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ko(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new wl(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new wl(n,t)}(n.endAt)),Ql(t,i,o,s,a,"F",l,c)}function $u(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ed(e.unaryFilter.field);return Nl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ed(e.unaryFilter.field);return Nl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ed(e.unaryFilter.field);return Nl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ed(e.unaryFilter.field);return Nl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ws(61313);default:return Ws(60726)}}(e):void 0!==e.fieldFilter?function(e){return Nl.create(ed(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ws(58110);default:return Ws(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Cl.create(e.compositeFilter.filters.map(e=>$u(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ws(1026)}}(e.compositeFilter.op))}(e):Ws(30097,{filter:e})}function Xu(e){return Nu[e]}function Yu(e){return Cu[e]}function Ju(e){return Tu[e]}function Zu(e){return{fieldPath:e.canonicalString()}}function ed(e){return bo.fromServerFormat(e.fieldPath)}function td(e){return e instanceof Nl?function(e){if("=="===e.op){if(hl(e.value))return{unaryFilter:{field:Zu(e.field),op:"IS_NAN"}};if(dl(e.value))return{unaryFilter:{field:Zu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hl(e.value))return{unaryFilter:{field:Zu(e.field),op:"IS_NOT_NAN"}};if(dl(e.value))return{unaryFilter:{field:Zu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zu(e.field),op:Yu(e.op),value:e.value}}}(e):e instanceof Cl?function(e){const t=e.getFilters().map(e=>td(e));return 1===t.length?t[0]:{compositeFilter:{op:Ju(e.op),filters:t}}}(e):Ws(54877,{filter:e})}function nd(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function rd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class id{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ro.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ro.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ja.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new id(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new id(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new id(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new id(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class sd{constructor(e){this.yt=e}}function od(e){const t=Qu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?nc(t,t.limit,"L"):t}class ad{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(La(e.integerValue));else if("doubleValue"in e){const n=La(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Qo(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Da(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ma(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?gl(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):pl(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ws(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Ja,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(La(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),wo.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ad.Kt=new ad;class ld{constructor(){this.Cn=new cd}addToCollectionParentIndex(e,t){return this.Cn.add(t),Bo.resolve()}getCollectionParents(e,t){return Bo.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Bo.resolve()}deleteFieldIndex(e,t){return Bo.resolve()}deleteAllFieldIndexes(e){return Bo.resolve()}createTargetIndexes(e,t){return Bo.resolve()}getDocumentsMatchingTarget(e,t){return Bo.resolve(null)}getIndexType(e,t){return Bo.resolve(0)}getFieldIndexes(e,t){return Bo.resolve([])}getNextCollectionGroupToUpdate(e){return Bo.resolve(null)}getMinOffset(e,t){return Bo.resolve(Mo.min())}getMinOffsetFromCollectionGroup(e,t){return Bo.resolve(Mo.min())}updateCollectionGroup(e,t,n){return Bo.resolve()}updateIndexEntries(e,t){return Bo.resolve()}}class cd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ia(yo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ia(yo.comparator)).toArray()}}new Uint8Array(0);const ud={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dd=41943040;class hd{static withCacheSize(e){return new hd(e,hd.DEFAULT_COLLECTION_PERCENTILE,hd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}hd.DEFAULT_COLLECTION_PERCENTILE=10,hd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hd.DEFAULT=new hd(dd,hd.DEFAULT_COLLECTION_PERCENTILE,hd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hd.DISABLED=new hd(-1,0,0);class fd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fd(0)}static cr(){return new fd(-1)}}const pd="LruGarbageCollector",md=1048576;function gd(e,t){let[n,r]=e,[i,s]=t;const o=lo(n,i);return 0===o?lo(r,s):o}class yd{constructor(e){this.Ir=e,this.buffer=new Ia(gd),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();gd(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vd{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){zs(pd,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ho(e)?zs(pd,"Ignoring IndexedDB error during garbage collection: ",e):await zo(e)}await this.Vr(3e5)})}}class bd{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Bo.resolve(Wo.ce);const n=new yd(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(zs("LruGarbageCollector","Garbage collection skipped; disabled"),Bo.resolve(ud)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(zs("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ud):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(zs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Vs()<=Jr.DEBUG&&zs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Bo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function wd(e,t){return new bd(e,t)}class xd{constructor(){this.changes=new uc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Bo.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _d{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Sd{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Gc(n.mutation,e,Pa.empty(),Po.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,xc()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xc();const r=gc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=pc();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=gc();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,xc()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=hc();const s=vc(),o=vc();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Xc)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Gc(o.mutation,t,o.mutation.getFieldMask(),Po.now())):s.set(t.key,Pa.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new _d(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=vc();let r=new Na((e,t)=>e-t),i=xc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Pa.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||xc()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=yc();l.forEach(e=>{if(!i.has(e)){const r=Hc(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Bo.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return wo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Bo.resolve(gc());let o=jo,a=i;return s.next(t=>Bo.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Bo.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,xc())).next(e=>({batchId:o,changes:mc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new wo(t)).next(e=>{let t=pc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=pc();return this.indexManager.getCollectionParents(e,i).next(o=>Bo.forEach(o,o=>{const a=function(e,t){return new Kl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,bl.newInvalidDocument(r)))});let n=pc();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Gc(s.mutation,r,Pa.empty(),Po.now()),oc(t,r)&&(n=n.insert(e,r))}),n})}}class Ed{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Bo.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ou(e.createTime)}}(t)),Bo.resolve()}getNamedQuery(e,t){return Bo.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:od(e.bundledQuery),readTime:Ou(e.readTime)}}(t)),Bo.resolve()}}class kd{constructor(){this.overlays=new Na(wo.comparator),this.qr=new Map}getOverlay(e,t){return Bo.resolve(this.overlays.get(t))}getOverlays(e,t){const n=gc();return Bo.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Bo.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Bo.resolve()}getOverlaysForCollection(e,t,n){const r=gc(),i=t.length+1,s=new wo(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Bo.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Na((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=gc(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=gc(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Bo.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new iu(t,n));let i=this.qr.get(t);void 0===i&&(i=xc(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Nd{constructor(){this.sessionToken=ja.EMPTY_BYTE_STRING}getSessionToken(e){return Bo.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Bo.resolve()}}class Cd{constructor(){this.Qr=new Ia(Td.$r),this.Ur=new Ia(Td.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Td(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Td(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new wo(new yo([])),n=new Td(t,e),r=new Td(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new wo(new yo([])),n=new Td(t,e),r=new Td(t,e+1);let i=xc();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Td(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Td{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return wo.comparator(e.key,t.key)||lo(e.Yr,t.Yr)}static Kr(e,t){return lo(e.Yr,t.Yr)||wo.comparator(e.key,t.key)}}class Id{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ia(Td.$r)}checkEmpty(e){return Bo.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new nu(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new Td(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Bo.resolve(s)}lookupMutationBatch(e,t){return Bo.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Bo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Bo.resolve(0===this.mutationQueue.length?Go:this.tr-1)}getAllMutationBatches(e){return Bo.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Td(t,0),r=new Td(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Bo.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ia(lo);return t.forEach(e=>{const t=new Td(e,0),r=new Td(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Bo.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;wo.isDocumentKey(i)||(i=i.child(""));const s=new Td(new wo(i),0);let o=new Ia(lo);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),Bo.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ks(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Bo.forEach(t.mutations,r=>{const i=new Td(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Td(t,0),r=this.Zr.firstAfterOrEqual(n);return Bo.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Bo.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ad{constructor(e){this.ri=e,this.docs=new Na(wo.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Bo.resolve(n?n.document.mutableCopy():bl.newInvalidDocument(t))}getEntries(e,t){let n=hc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():bl.newInvalidDocument(e))}),Bo.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=hc();const s=t.path,o=new wo(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Fo(Lo(o),n)<=0||(r.has(o.key)||oc(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Bo.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ws(9500)}ii(e,t){return Bo.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Pd(this)}getSize(e){return Bo.resolve(this.size)}}class Pd extends xd{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Bo.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Rd{constructor(e){this.persistence=e,this.si=new uc(e=>Hl(e),Wl),this.lastRemoteSnapshotVersion=Ro.min(),this.highestTargetId=0,this.oi=0,this._i=new Cd,this.targetCount=0,this.ai=fd.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Bo.resolve()}getLastRemoteSnapshotVersion(e){return Bo.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Bo.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Bo.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Bo.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new fd(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Bo.resolve()}updateTargetData(e,t){return this.Pr(t),Bo.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Bo.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Bo.waitFor(i).next(()=>r)}getTargetCount(e){return Bo.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Bo.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Bo.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Bo.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Bo.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Bo.resolve(n)}containsKey(e,t){return Bo.resolve(this._i.containsKey(t))}}class jd{constructor(e,t){this.ui={},this.overlays={},this.ci=new Wo(0),this.li=!1,this.li=!0,this.hi=new Nd,this.referenceDelegate=e(this),this.Pi=new Rd(this),this.indexManager=new ld,this.remoteDocumentCache=function(e){return new Ad(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new sd(t),this.Ii=new Ed(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Id(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){zs("MemoryPersistence","Starting transaction:",e);const r=new Od(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Bo.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Od extends Vo{constructor(e){super(),this.currentSequenceNumber=e}}class Dd{constructor(e){this.persistence=e,this.Ri=new Cd,this.Vi=null}static mi(e){return new Dd(e)}get fi(){if(this.Vi)return this.Vi;throw Ws(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Bo.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Bo.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Bo.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bo.forEach(this.fi,n=>{const r=wo.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Ro.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Bo.or([()=>Bo.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ld{constructor(e,t){this.persistence=e,this.pi=new uc(e=>Yo(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=wd(this,t)}static mi(e,t){return new Ld(e,t)}Ei(){}di(e){return Bo.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Bo.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Bo.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Ro.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Bo.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Bo.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Bo.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Bo.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=al(e.data.value)),t}br(e,t,n){return Bo.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Bo.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Md{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=xc(),r=xc();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Md(e,t.fromCache,n,r)}}class Fd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ud{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=Or()?8:qo(Rr())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Fd;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Vs()<=Jr.DEBUG&&zs("QueryEngine","SDK will not create cache indexes for query:",sc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Bo.resolve()):(Vs()<=Jr.DEBUG&&zs("QueryEngine","Query:",sc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Vs()<=Jr.DEBUG&&zs("QueryEngine","The SDK decides to create cache indexes for query:",sc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zl(t))):Bo.resolve())}ys(e,t){if(Xl(t))return Bo.resolve(null);let n=Zl(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=nc(t,null,"F"),n=Zl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=xc(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,nc(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Xl(t)||r.isEqual(Ro.min())?Bo.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Bo.resolve(null):(Vs()<=Jr.DEBUG&&zs("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sc(t)),this.vs(e,s,t,Do(r,jo)).next(e=>e))})}Ds(e,t){let n=new Ia(lc(e));return t.forEach((t,r)=>{oc(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Vs()<=Jr.DEBUG&&zs("QueryEngine","Using full collection scan to execute query:",sc(t)),this.ps.getDocumentsMatchingQuery(e,t,Mo.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Vd="LocalStore";class zd{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Na(lo),this.xs=new uc(e=>Hl(e),Wl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sd(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Bd(e,t,n,r){return new zd(e,t,n,r)}async function qd(e,t){const n=Qs(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=xc();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Hd(e){const t=Qs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Wd(e,t,n){let r=xc(),i=xc();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=hc();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Ro.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):zs(Vd,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}function Gd(e,t){const n=Qs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Go),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Kd(e,t){const n=Qs(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Bo.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new id(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Qd(e,t,n){const r=Qs(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ho(e))throw e;zs(Vd,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function $d(e,t,n){const r=Qs(e);let i=Ro.min(),s=xc();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Qs(e),i=r.xs.get(n);return void 0!==i?Bo.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Zl(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Ro.min(),n?s:xc())).next(e=>(Xd(r,ac(t),e),{documents:e,Qs:s})))}function Xd(e,t,n){let r=e.Os.get(t)||Ro.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Yd{constructor(){this.activeTargetIds=Sc()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jd{constructor(){this.Mo=new Yd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zd{Oo(e){}shutdown(){}}const eh="ConnectivityMonitor";class th{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){zs(eh,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){zs(eh,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nh=null;function rh(){return null===nh?nh=268435456+Math.round(2147483648*Math.random()):nh++,"0x"+nh.toString(16)}const ih="RestConnection",sh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oh{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Ga?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=rh(),o=this.zo(e,t.toUriEncodedString());zs(ih,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(o),c=Cr(l);return this.Jo(e,o,a,n,c).then(t=>(zs(ih,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw qs(ih,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=sh[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class ah{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const lh="WebChannelConnection";class ch extends oh{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=rh();return new Promise((i,o)=>{const a=new ks;a.setWithCredentials(!0),a.listenOnce(Cs.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ts.NO_ERROR:const n=a.getResponseJson();zs(lh,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case Ts.TIMEOUT:zs(lh,"RPC '".concat(e,"' ").concat(s," timed out")),o(new Xs($s.DEADLINE_EXCEEDED,"Request time out"));break;case Ts.HTTP_ERROR:const r=a.getStatus();if(zs(lh,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values($s).indexOf(t)>=0?t:$s.UNKNOWN}(n.status);o(new Xs(e,n.message))}else o(new Xs($s.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Xs($s.UNAVAILABLE,"Connection failed."));break;default:Ws(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{zs(lh,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);zs(lh,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=rh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Rs(),o=Ps(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");zs(lh,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);this.I_(u);let d=!1,h=!1;const f=new ah({Yo:t=>{h?zs(lh,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(zs(lh,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),zs(lh,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Ns.EventType.OPEN,()=>{h||(zs(lh,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,Ns.EventType.CLOSE,()=>{h||(h=!0,zs(lh,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,Ns.EventType.ERROR,t=>{h||(h=!0,qs(lh,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Xs($s.UNAVAILABLE,"The operation could not be completed")))}),p(u,Ns.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];Ks(!!i,16349);const s=i,o=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){zs(lh,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=ou[e];if(void 0!==t)return cu(t)}(t),i=o.message;void 0===n&&(n=$s.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.a_(new Xs(n,i)),u.close()}else zs(lh,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(o,As.STAT_EVENT,t=>{t.stat===Is.PROXY?zs(lh,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Is.NOPROXY&&zs(lh,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function uh(){return"undefined"!=typeof document?document:null}function dh(e){return new Iu(e,!0)}class hh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&zs("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const fh="PersistentStream";class ph{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hh(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===$s.RESOURCE_EXHAUSTED?(Bs(t.toString()),Bs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===$s.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Xs($s.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return zs(fh,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(zs(fh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mh extends ph{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ws(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ks(void 0===t||"string"==typeof t,58123),ja.fromBase64String(t||"")):(Ks(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),ja.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?$s.UNKNOWN:cu(e.code);return new Xs(t,e.message||"")}(o);n=new xu(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Uu(e,r.document.name),s=Ou(r.document.updateTime),o=r.document.createTime?Ou(r.document.createTime):Ro.min(),a=new yl({mapValue:{fields:r.document.fields}}),l=bl.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new bu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Uu(e,r.document),s=r.readTime?Ou(r.readTime):Ro.min(),o=bl.newNoDocument(i,s),a=r.removedTargetIds||[];n=new bu([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Uu(e,r.document),s=r.removedTargetIds||[];n=new bu([],s,i,null)}else{if(!("filter"in t))return Ws(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new su(r,i),o=e.targetId;n=new wu(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ro.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ro.min():t.readTime?Ou(t.readTime):Ro.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Bu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Gl(r)?{documents:Gu(e,r)}:{query:Ku(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ru(e,t.resumeToken);const r=Au(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ro.min())>0){n.readTime=Pu(e,t.snapshotVersion.toTimestamp());const r=Au(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ws(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Bu(this.serializer),t.removeTarget=e,this.q_(t)}}class gh extends ph{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ks(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ks(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Ks(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Ks(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Ou(e.updateTime):Ou(t);return n.isEqual(Ro.min())&&(n=Ou(t)),new Vc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Ou(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Bu(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Wu(this.serializer,e))};this.q_(t)}}class yh{}class vh extends yh{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Xs($s.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Go(e,Lu(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===$s.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xs($s.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,Lu(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===$s.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xs($s.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class bh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Bs(t),this.aa=!1):zs("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const wh="RemoteStore";class xh{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Ah(this)&&(zs(wh,"Restarting streams for network reachability change."),await async function(e){const t=Qs(e);t.Ea.add(4),await Sh(t),t.Ra.set("Unknown"),t.Ea.delete(4),await _h(t)}(this))})}),this.Ra=new bh(n,r)}}async function _h(e){if(Ah(e))for(const t of e.da)await t(!0)}async function Sh(e){for(const t of e.da)await t(!1)}function Eh(e,t){const n=Qs(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Ih(n)?Th(n):$h(n).O_()&&Nh(n,t))}function kh(e,t){const n=Qs(e),r=$h(n);n.Ia.delete(t),r.O_()&&Ch(n,t),0===n.Ia.size&&(r.O_()?r.L_():Ah(n)&&n.Ra.set("Unknown"))}function Nh(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ro.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}$h(e).Y_(t)}function Ch(e,t){e.Va.Ue(t),$h(e).Z_(t)}function Th(e){e.Va=new Su({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),$h(e).start(),e.Ra.ua()}function Ih(e){return Ah(e)&&!$h(e).x_()&&e.Ia.size>0}function Ah(e){return 0===Qs(e).Ea.size}function Ph(e){e.Va=void 0}async function Rh(e){e.Ra.set("Online")}async function jh(e){e.Ia.forEach((t,n)=>{Nh(e,t)})}async function Oh(e,t){Ph(e),Ih(e)?(e.Ra.ha(t),Th(e)):e.Ra.set("Unknown")}async function Dh(e,t,n){if(e.Ra.set("Online"),t instanceof xu&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){zs(wh,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Lh(e,n)}else if(t instanceof bu?e.Va.Ze(t):t instanceof wu?e.Va.st(t):e.Va.tt(t),!n.isEqual(Ro.min()))try{const t=await Hd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(ja.EMPTY_BYTE_STRING,r.snapshotVersion)),Ch(e,t);const i=new id(r.target,t,n,r.sequenceNumber);Nh(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){zs(wh,"Failed to raise snapshot:",t),await Lh(e,t)}}async function Lh(e,t,n){if(!Ho(t))throw t;e.Ea.add(1),await Sh(e),e.Ra.set("Offline"),n||(n=()=>Hd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{zs(wh,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await _h(e)})}function Mh(e,t){return t().catch(n=>Lh(e,n,t))}async function Fh(e){const t=Qs(e),n=Xh(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Go;for(;Uh(t);)try{const e=await Gd(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Vh(t,e)}catch(e){await Lh(t,e)}zh(t)&&Bh(t)}function Uh(e){return Ah(e)&&e.Ta.length<10}function Vh(e,t){e.Ta.push(t);const n=Xh(e);n.O_()&&n.X_&&n.ea(t.mutations)}function zh(e){return Ah(e)&&!Xh(e).x_()&&e.Ta.length>0}function Bh(e){Xh(e).start()}async function qh(e){Xh(e).ra()}async function Hh(e){const t=Xh(e);for(const n of e.Ta)t.ea(n.mutations)}async function Wh(e,t,n){const r=e.Ta.shift(),i=ru.from(r,t,n);await Mh(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Fh(e)}async function Gh(e,t){t&&Xh(e).X_&&await async function(e,t){if(function(e){return lu(e)&&e!==$s.ABORTED}(t.code)){const n=e.Ta.shift();Xh(e).B_(),await Mh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Fh(e)}}(e,t),zh(e)&&Bh(e)}async function Kh(e,t){const n=Qs(e);n.asyncQueue.verifyOperationInProgress(),zs(wh,"RemoteStore received new credentials");const r=Ah(n);n.Ea.add(3),await Sh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await _h(n)}async function Qh(e,t){const n=Qs(e);t?(n.Ea.delete(2),await _h(n)):t||(n.Ea.add(2),await Sh(n),n.Ra.set("Unknown"))}function $h(e){return e.ma||(e.ma=function(e,t,n){const r=Qs(e);return r.sa(),new mh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Rh.bind(null,e),t_:jh.bind(null,e),r_:Oh.bind(null,e),H_:Dh.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Ih(e)?Th(e):e.Ra.set("Unknown")):(await e.ma.stop(),Ph(e))})),e.ma}function Xh(e){return e.fa||(e.fa=function(e,t,n){const r=Qs(e);return r.sa(),new gh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:qh.bind(null,e),r_:Gh.bind(null,e),ta:Hh.bind(null,e),na:Wh.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Fh(e)):(await e.fa.stop(),e.Ta.length>0&&(zs(wh,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Yh{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Yh(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xs($s.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jh(e,t){if(Bs("AsyncQueue","".concat(t,": ").concat(e)),Ho(e))return new Xs($s.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Zh{static emptySet(e){return new Zh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||wo.comparator(t.key,n.key):(e,t)=>wo.comparator(e.key,t.key),this.keyedMap=pc(),this.sortedSet=new Na(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Zh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ef{constructor(){this.ga=new Na(wo.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ws(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class tf{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new tf(e,t,Zh.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class nf{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class rf{constructor(){this.queries=sf(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Qs(e),r=n.queries;n.queries=sf(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Xs($s.ABORTED,"Firestore shutting down"))}}function sf(){return new uc(e=>ic(e),rc)}async function of(e,t){const n=Qs(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new nf,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Jh(e,"Initialization of query '".concat(sc(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&uf(n)}async function af(e,t){const n=Qs(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lf(e,t){const n=Qs(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&uf(n)}function cf(e,t,n){const r=Qs(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function uf(e){e.Ca.forEach(e=>{e.next()})}var df,hf;(hf=df||(df={})).Ma="default",hf.Cache="cache";class ff{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new tf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=tf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==df.Cache}}class pf{constructor(e){this.key=e}}class mf{constructor(e){this.key=e}}class gf{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xc(),this.mutatedKeys=xc(),this.eu=lc(e),this.tu=new Zh(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new ef,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=oc(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ws(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==s.length||l?{snapshot:new tf(this.query,e.tu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ef,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xc(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new mf(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new pf(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=xc();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return tf.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const yf="SyncEngine";class vf{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class bf{constructor(e){this.key=e,this.hu=!1}}class wf{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new uc(e=>ic(e),rc),this.Iu=new Map,this.Eu=new Set,this.du=new Na(wo.comparator),this.Au=new Map,this.Ru=new Cd,this.Vu={},this.mu=new Map,this.fu=fd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function xf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Bf(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Sf(r,t,n,!0),i}async function _f(e,t){const n=Bf(e);await Sf(n,t,!0,!1)}async function Sf(e,t,n,r){const i=await Kd(e.localStore,Zl(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Ef(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Eh(e.remoteStore,i),a}async function Ef(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await $d(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Lf(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await $d(e.localStore,t,!0),o=new gf(t,s.Qs),a=o.ru(s.documents),l=vu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Lf(e,n,c.au);const u=new vf(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function kf(e,t,n){const r=Qs(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!rc(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Qd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&kh(r.remoteStore,i.targetId),Of(r,i.targetId)}).catch(zo)):(Of(r,i.targetId),await Qd(r.localStore,i.targetId,!0))}async function Nf(e,t){const n=Qs(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kh(n.remoteStore,r.targetId))}async function Cf(e,t){const n=Qs(e);try{const e=await function(e,t){const n=Qs(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(ja.EMPTY_BYTE_STRING,Ro.min()).withLastLimboFreeSnapshotVersion(Ro.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Pi.updateTargetData(e,c))});let a=hc(),l=xc();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Wd(e,s,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(Ro.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Bo.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Ks(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Ks(r.hu,14607):e.removedDocuments.size>0&&(Ks(r.hu,42227),r.hu=!1))}),await Uf(n,e,t)}catch(e){await zo(e)}}function Tf(e,t,n){const r=Qs(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Qs(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&uf(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function If(e,t,n){const r=Qs(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new Na(wo.comparator);e=e.insert(s,bl.newNoDocument(s,Ro.min()));const n=xc().add(s),i=new yu(Ro.min(),new Map,new Na(lo),e,n);await Cf(r,i),r.du=r.du.remove(s),r.Au.delete(t),Ff(r)}else await Qd(r.localStore,t,!1).then(()=>Of(r,t,n)).catch(zo)}async function Af(e,t){const n=Qs(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Qs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Bo.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Ks(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=xc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);jf(n,r,null),Rf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Uf(n,e)}catch(e){await zo(e)}}async function Pf(e,t,n){const r=Qs(e);try{const e=await function(e,t){const n=Qs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ks(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);jf(r,t,n),Rf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Uf(r,e)}catch(n){await zo(n)}}function Rf(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function jf(e,t,n){const r=Qs(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Of(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Df(e,t)})}function Df(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(kh(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Ff(e))}function Lf(e,t,n){for(const r of n)r instanceof pf?(e.Ru.addReference(r.key,t),Mf(e,r)):r instanceof mf?(zs(yf,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Df(e,r.key)):Ws(19791,{wu:r})}function Mf(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(zs(yf,"New document in limbo: "+n),e.Eu.add(r),Ff(e))}function Ff(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new wo(yo.fromString(t)),r=e.fu.next();e.Au.set(r,new bf(n)),e.du=e.du.insert(n,r),Eh(e.remoteStore,new id(Zl($l(n.path)),r,"TargetPurposeLimboResolution",Wo.ce))}}async function Uf(e,t,n){const r=Qs(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Md.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=Qs(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Bo.forEach(t,t=>Bo.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Bo.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ho(e))throw e;zs(Vd,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Vf(e,t){const n=Qs(e);if(!n.currentUser.isEqual(t)){zs(yf,"User change. New user:",t.toKey());const e=await qd(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Xs($s.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Uf(n,e.Ls)}}function zf(e,t){const n=Qs(e),r=n.Au.get(t);if(r&&r.hu)return xc().add(r.key);{let e=xc();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Bf(e){const t=Qs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Cf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=If.bind(null,t),t.Pu.H_=lf.bind(null,t.eventManager),t.Pu.yu=cf.bind(null,t.eventManager),t}function qf(e){const t=Qs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Af.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Pf.bind(null,t),t}class Hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Bd(this.persistence,new Ud,e.initialUser,this.serializer)}Cu(e){return new jd(Dd.mi,this.serializer)}Du(e){return new Jd}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hf.provider={build:()=>new Hf};class Wf extends Hf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ks(this.persistence.referenceDelegate instanceof Ld,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new vd(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?hd.withCacheSize(this.cacheSizeBytes):hd.DEFAULT;return new jd(e=>Ld.mi(e,t),this.serializer)}}class Gf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Tf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vf.bind(null,this.syncEngine),await Qh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new rf}createDatastore(e){const t=dh(e.databaseInfo.databaseId),n=function(e){return new ch(e)}(e.databaseInfo);return function(e,t,n,r){return new vh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new xh(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Tf(this.syncEngine,e,0),th.v()?new th:new Zd)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new wf(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Qs(e);zs(wh,"RemoteStore shutting down."),t.Ea.add(5),await Sh(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Gf.provider={build:()=>new Gf};class Kf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Qf="FirestoreClient";class $f{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ms.UNAUTHENTICATED,this.clientId=ao.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{zs(Qf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(zs(Qf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(ze){const n=Jh(ze,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Xf(e,t){e.asyncQueue.verifyOperationInProgress(),zs(Qf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await qd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Yf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Jf(e);zs(Qf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Kh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Kh(t.remoteStore,n)),e._onlineComponents=t}async function Jf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){zs(Qf,"Using user provided OfflineComponentProvider");try{await Xf(e,e._uninitializedComponentsProvider._offline)}catch(ze){const n=ze;if(!function(e){return"FirebaseError"===e.name?e.code===$s.FAILED_PRECONDITION||e.code===$s.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;qs("Error using user provided cache. Falling back to memory cache: "+n),await Xf(e,new Hf)}}else zs(Qf,"Using default OfflineComponentProvider"),await Xf(e,new Wf(void 0));return e._offlineComponents}async function Zf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(zs(Qf,"Using user provided OnlineComponentProvider"),await Yf(e,e._uninitializedComponentsProvider._online)):(zs(Qf,"Using default OnlineComponentProvider"),await Yf(e,new Gf))),e._onlineComponents}function ep(e){return Zf(e).then(e=>e.syncEngine)}async function tp(e){const t=await Zf(e),n=t.eventManager;return n.onListen=xf.bind(null,t.syncEngine),n.onUnlisten=kf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_f.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Nf.bind(null,t.syncEngine),n}function np(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ys;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Kf({next:a=>{s.Nu(),t.enqueueAndForget(()=>af(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Xs($s.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Xs($s.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new ff($l(n.path),s,{includeMetadataChanges:!0,qa:!0});return of(e,o)}(await tp(e),e.asyncQueue,t,n,r)),r.promise}function rp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ys;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Kf({next:n=>{s.Nu(),t.enqueueAndForget(()=>af(e,o)),n.fromCache&&"server"===r.source?i.reject(new Xs($s.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new ff(n,s,{includeMetadataChanges:!0,qa:!0});return of(e,o)}(await tp(e),e.asyncQueue,t,n,r)),r.promise}function ip(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const sp=new Map,op="firestore.googleapis.com",ap=!0;class lp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Xs($s.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=op,this.ssl=ap}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:ap;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=dd;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<md)throw new Xs($s.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Xs($s.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ip(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Xs($s.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Xs($s.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Xs($s.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xs($s.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xs($s.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lp(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Zs;switch(e.type){case"firstParty":return new ro(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Xs($s.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sp.get(e);t&&(zs("ComponentProvider","Removing Datastore"),sp.delete(e),t.terminate())}(this),Promise.resolve()}}function up(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=No(e,cp);const i=Cr(t),s=e._getSettings(),o=Ht(Ht({},s),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(Tr("https://".concat(a)),Pr("Firestore",!0)),s.host!==op&&s.host!==a&&qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Ht(Ht({},s),{},{host:a,ssl:i,emulatorOptions:r});if(!Ur(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ms.MOCK_USER;else{var c;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Ht({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[br(JSON.stringify({alg:"none",type:"JWT"})),br(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Xs($s.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ms(i)}e._authCredentials=new eo(new Js(t,n))}}class dp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new dp(this.firestore,e,this._query)}}class hp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hp(this.firestore,e,this._key)}toJSON(){return{type:hp._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(To(t,hp._jsonSchema))return new hp(e,n||null,new wo(yo.fromString(t.referencePath)))}}hp._jsonSchemaVersion="firestore/documentReference/1.0",hp._jsonSchema={type:Co("string",hp._jsonSchemaVersion),referencePath:Co("string")};class fp extends dp{constructor(e,t,n){super(e,t,$l(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hp(this.firestore,null,new wo(e))}withConverter(e){return new fp(this.firestore,e,this._path)}}function pp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Gr(e),xo("collection","path",t),e instanceof cp){const n=yo.fromString(t,...r);return So(n),new fp(e,null,n)}{if(!(e instanceof hp||e instanceof fp))throw new Xs($s.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(yo.fromString(t,...r));return So(n),new fp(e.firestore,null,n)}}function mp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Gr(e),1===arguments.length&&(t=ao.newId()),xo("doc","path",t),e instanceof cp){const n=yo.fromString(t,...r);return _o(n),new hp(e,null,new wo(n))}{if(!(e instanceof hp||e instanceof fp))throw new Xs($s.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(yo.fromString(t,...r));return _o(n),new hp(e.firestore,e instanceof fp?e.converter:null,new wo(n))}}const gp="AsyncQueue";class yp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hh(this,"async_queue_retry"),this._c=()=>{const e=uh();e&&zs(gp,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=uh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=uh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Ys;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(jb){if(!Ho(jb))throw jb;zs(gp,"Operation failed with retryable error: "+jb)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Bs("INTERNAL UNHANDLED ERROR: ",vp(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Yh.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Ws(47125,{Pc:vp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function vp(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function bp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class wp extends cp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new yp,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yp(e),this._firestoreClient=void 0,await e}}}function xp(e){if(e._terminated)throw new Xs($s.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||_p(e),e._firestoreClient}function _p(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Wa(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ip(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new $f(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Sp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sp(ja.fromBase64String(e))}catch(e){throw new Xs($s.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Sp(ja.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Sp._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(To(e,Sp._jsonSchema))return Sp.fromBase64String(e.bytes)}}Sp._jsonSchemaVersion="firestore/bytes/1.0",Sp._jsonSchema={type:Co("string",Sp._jsonSchemaVersion),bytes:Co("string")};class Ep{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Xs($s.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bo(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kp{constructor(e){this._methodName=e}}class Np{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xs($s.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xs($s.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lo(this._lat,e._lat)||lo(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Np._jsonSchemaVersion}}static fromJSON(e){if(To(e,Np._jsonSchema))return new Np(e.latitude,e.longitude)}}Np._jsonSchemaVersion="firestore/geoPoint/1.0",Np._jsonSchema={type:Co("string",Np._jsonSchemaVersion),latitude:Co("number"),longitude:Co("number")};class Cp{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cp._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(To(e,Cp._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Cp(e.vectorValues);throw new Xs($s.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cp._jsonSchemaVersion="firestore/vectorValue/1.0",Cp._jsonSchema={type:Co("string",Cp._jsonSchemaVersion),vectorValues:Co("object")};const Tp=/^__.*__$/;class Ip{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Xc(e,this.data,this.fieldMask,t,this.fieldTransforms):new $c(e,this.data,t,this.fieldTransforms)}}class Ap{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Xc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Pp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ws(40011,{Ac:e})}}class Rp{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rp(Ht(Ht({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Pp(this.Ac)&&Tp.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||dh(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Rp({Ac:e,methodName:t,Dc:n,path:bo.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Op(e){const t=e._freezeSettings(),n=dh(e._databaseId);return new jp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Dp(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Gp("Data must be an object, but it was:",o,r);const a=Hp(r,o);let l,c;if(s.merge)l=new Pa(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Kp(t,r,n);if(!o.contains(i))throw new Xs($s.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Yp(e,i)||e.push(i)}l=new Pa(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Ip(new yl(a),l,c)}class Lp extends kp{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lp}}function Mp(e,t,n){return new Rp({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Fp extends kp{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Mp(this,e,!0),n=this.vc.map(e=>qp(e,t)),r=new Rc(n);return new Uc(e.path,r)}isEqual(e){return e instanceof Fp&&Ur(this.vc,e.vc)}}class Up extends kp{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Mp(this,e,!0),n=this.vc.map(e=>qp(e,t)),r=new Oc(n);return new Uc(e.path,r)}isEqual(e){return e instanceof Up&&Ur(this.vc,e.vc)}}function Vp(e,t,n,r){const i=e.Cc(1,t,n);Gp("Data must be an object, but it was:",i,r);const s=[],o=yl.empty();Ea(r,(e,r)=>{const a=$p(t,e,n);r=Gr(r);const l=i.yc(a);if(r instanceof Lp)s.push(a);else{const e=qp(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new Pa(s);return new Ap(o,a,i.fieldTransforms)}function zp(e,t,n,r,i,s){const o=e.Cc(1,t,n),a=[Kp(t,r,n)],l=[i];if(s.length%2!=0)throw new Xs($s.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)a.push(Kp(t,s[h])),l.push(s[h+1]);const c=[],u=yl.empty();for(let h=a.length-1;h>=0;--h)if(!Yp(c,a[h])){const e=a[h];let t=l[h];t=Gr(t);const n=o.yc(e);if(t instanceof Lp)c.push(e);else{const r=qp(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Pa(c);return new Ap(u,d,o.fieldTransforms)}function Bp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qp(n,e.Cc(r?4:3,t))}function qp(e,t){if(Wp(e=Gr(e)))return Gp("Unsupported field value:",t,e),Hp(e,t);if(e instanceof kp)return function(e,t){if(!Pp(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=qp(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Gr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Nc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Po.fromDate(e);return{timestampValue:Pu(t.serializer,n)}}if(e instanceof Po){const n=new Po(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Pu(t.serializer,n)}}if(e instanceof Np)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Sp)return{bytesValue:Ru(t.serializer,e._byteString)};if(e instanceof hp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Du(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Cp)return function(e,t){return{mapValue:{fields:{[Qa]:{stringValue:Ya},[Ja]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Ec(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(ko(e)))}(e,t)}function Hp(e,t){const n={};return ka(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ea(e,(e,r)=>{const i=qp(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Wp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Po||e instanceof Np||e instanceof Sp||e instanceof hp||e instanceof kp||e instanceof Cp)}function Gp(e,t,n){if(!Wp(n)||!Eo(n)){const r=ko(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Kp(e,t,n){if((t=Gr(t))instanceof Ep)return t._internalPath;if("string"==typeof t)return $p(e,t);throw Xp("Field path arguments must be of type string or ",e,!1,void 0,n)}const Qp=new RegExp("[~\\*/\\[\\]]");function $p(e,t,n){if(t.search(Qp)>=0)throw Xp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ep(...t.split("."))._internalPath}catch(Ve){throw Xp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Xp(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Xs($s.INVALID_ARGUMENT,a+e+l)}function Yp(e,t){return e.some(e=>e.isEqual(t))}class Jp{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Zp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(em("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Zp extends Jp{data(){return super.data()}}function em(e,t){return"string"==typeof t?$p(e,t):t instanceof Ep?t._internalPath:t._delegate._internalPath}function tm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Xs($s.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nm{}class rm extends nm{}function im(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof nm&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof om).length,n=e.filter(e=>e instanceof sm).length;if(t>1||t>0&&n>0)throw new Xs($s.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class sm extends rm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new sm(e,t,n)}_apply(e){const t=this._parse(e);return um(e._query,t),new dp(e.firestore,e.converter,tc(e._query,t))}_parse(e){const t=Op(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Xs($s.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){cm(o,s);const t=[];for(const n of o)t.push(lm(r,e,n));a={arrayValue:{values:t}}}else a=lm(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||cm(o,s),a=Bp(n,t,o,"in"===s||"not-in"===s);return Nl.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class om extends nm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new om(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Cl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)um(n,i),n=tc(n,i)}(e._query,t),new dp(e.firestore,e.converter,tc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class am extends rm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new am(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Xs($s.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Xs($s.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sl(t,n)}(e._query,this._field,this._direction);return new dp(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Kl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function lm(e,t,n){if("string"==typeof(n=Gr(n))){if(""===n)throw new Xs($s.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yl(t)&&-1!==n.indexOf("/"))throw new Xs($s.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(yo.fromString(n));if(!wo.isDocumentKey(r))throw new Xs($s.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ll(e,new wo(r))}if(n instanceof hp)return ll(e,n._key);throw new Xs($s.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ko(n),"."))}function cm(e,t){if(!Array.isArray(e)||0===e.length)throw new Xs($s.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function um(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Xs($s.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Xs($s.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class dm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Za(e)){case 0:return null;case 1:return e.booleanValue;case 2:return La(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ma(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ws(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ea(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Ja].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>La(e.doubleValue));return new Cp(n)}convertGeoPoint(e){return new Np(La(e.latitude),La(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=qa(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ha(e));default:return null}}convertTimestamp(e){const t=Da(e);return new Po(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=yo.fromString(e);Ks(rd(n),9688,{name:e});const r=new Ka(n.get(1),n.get(3)),i=new wo(n.popFirst(5));return r.isEqual(t)||Bs("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function hm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class fm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pm extends Jp{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new mm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(em("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xs($s.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=pm._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}pm._jsonSchemaVersion="firestore/documentSnapshot/1.0",pm._jsonSchema={type:Co("string",pm._jsonSchemaVersion),bundleSource:Co("string","DocumentSnapshot"),bundleName:Co("string"),bundle:Co("string")};class mm extends pm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class gm{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new fm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new mm(this._firestore,this._userDataWriter,n.key,n,new fm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xs($s.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new mm(e._firestore,e._userDataWriter,n.doc.key,n.doc,new fm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new mm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new fm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ym(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xs($s.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ao.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ym(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ws(61501,{type:e})}}function vm(e){e=No(e,hp);const t=No(e.firestore,wp);return np(xp(t),e._key).then(n=>Em(t,e,n))}gm._jsonSchemaVersion="firestore/querySnapshot/1.0",gm._jsonSchema={type:Co("string",gm._jsonSchemaVersion),bundleSource:Co("string","QuerySnapshot"),bundleName:Co("string"),bundle:Co("string")};class bm extends dm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hp(this.firestore,null,t)}}function wm(e,t,n){e=No(e,hp);const r=No(e.firestore,wp),i=hm(e.converter,t,n);return Sm(r,[Dp(Op(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,zc.none())])}function xm(e,t,n){e=No(e,hp);const r=No(e.firestore,wp),i=Op(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Gr(t))||t instanceof Ep?zp(i,"updateDoc",e._key,t,n,a):Vp(i,"updateDoc",e._key,t),Sm(r,[s.toMutation(e._key,zc.exists(!0))])}function _m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=Gr(e);let i={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||bp(n[s])||(i=n[s++]);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(bp(n[s])){var a,l,c;const e=n[s];n[s]=null===(a=e.next)||void 0===a?void 0:a.bind(e),n[s+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[s+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,d,h;if(e instanceof hp)d=No(e.firestore,wp),h=$l(e._key.path),u={next:t=>{n[s]&&n[s](Em(d,e,t))},error:n[s+1],complete:n[s+2]};else{const t=No(e,dp);d=No(t.firestore,wp),h=t._query;const r=new bm(d);u={next:e=>{n[s]&&n[s](new gm(d,r,t,e))},error:n[s+1],complete:n[s+2]},tm(e._query)}return function(e,t,n,r){const i=new Kf(r),s=new ff(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>of(await tp(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>af(await tp(e),s))}}(xp(d),h,o,u)}function Sm(e,t){return function(e,t){const n=new Ys;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=qf(e);try{const e=await function(e,t){const n=Qs(e),r=Po.now(),i=t.reduce((e,t)=>e.add(t.key),xc());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=hc(),l=xc();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Kc(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Xc(e.key,t,vl(t.value.mapValue),zc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:mc(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Na(lo)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Uf(r,e.changes),await Fh(r.remoteStore)}catch(e){const t=Jh(e,"Failed to persist write");n.reject(t)}}(await ep(e),t,n)),n.promise}(xp(e),t)}function Em(e,t,n){const r=n.docs.get(t._key),i=new bm(e);return new pm(e,i,t._key,r,new fm(n.hasPendingWrites,n.fromCache),t.converter)}class km{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Op(e)}set(e,t,n){this._verifyNotCommitted();const r=Nm(e,this._firestore),i=hm(r.converter,t,n),s=Dp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,zc.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Nm(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Gr(t))||t instanceof Ep?zp(this._dataReader,"WriteBatch.update",r._key,t,n,o):Vp(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,zc.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nm(e,this._firestore);return this._mutations=this._mutations.concat(new eu(t._key,zc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xs($s.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nm(e,t){if((e=Gr(e)).firestore!==t)throw new Xs($s.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Cm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Fp("arrayUnion",t)}function Tm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Up("arrayRemove",t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Fs=e}(as),ns(new Kr("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new wp(new to(e.getProvider("auth-internal")),new so(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xs($s.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ka(e.options.projectId,t)}(s,r),s);return i=Ht({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),us(Ds,Ls,e),us(Ds,Ls,"esm2020")}();function Im(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}us("firebase","12.4.0","app");const Am=["providerId"],Pm=["uid","auth","stsTokenManager"],Rm=["providerId","signInMethod"];function jm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Om=jm,Dm=new Mr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Lm=new ri("@firebase/auth");function Mm(e){if(Lm.logLevel<=Jr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Lm.error("Auth (".concat(as,"): ").concat(e),...n)}}function Fm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw qm(e,...n)}function Um(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qm(e,...n)}function Vm(e,t,n){const r=Ht(Ht({},Om()),{},{[t]:n});return new Mr("auth","Firebase",r).create(t,{appName:e.name})}function zm(e){return Vm(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bm(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Fm(e,"argument-error"),Vm(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function qm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Dm.create(e,...n)}function Hm(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw qm(t,...r)}}function Wm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Mm(t),new Error(t)}function Gm(e,t){e||Wm(t)}function Km(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Qm(){return"http:"===$m()||"https:"===$m()}function $m(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Xm(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Qm()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Ym{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gm(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rr())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Xm()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jm(e,t){Gm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Zm{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Wm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Wm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Wm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const eg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},tg=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ng=new Ym(3e4,6e4);function rg(e,t){return e.tenantId&&!t.tenantId?Ht(Ht({},t),{},{tenantId:e.tenantId}):t}async function ig(e,t,n,r){return sg(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=zr(Ht({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Ht({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Cr(e.emulatorConfig.host)&&(l.credentials="include"),Zm.fetch()(await ag(e,e.config.apiHost,n,o),l)})}async function sg(e,t,n){e._canInitEmulator=!1;const r=Ht(Ht({},eg),t);try{const t=new cg(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ug(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ug(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ug(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ug(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Vm(e,a,o);Fm(e,a)}}catch(jb){if(jb instanceof Lr)throw jb;Fm(e,"network-request-failed",{message:String(jb)})}}async function og(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await ig(e,t,n,r,i);return"mfaPendingCredential"in s&&Fm(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function ag(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?Jm(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(tg.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function lg(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cg{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Um(this.auth,"network-request-failed")),ng.get())})}}function ug(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Um(e,t,r);return i.customData._tokenResponse=n,i}function dg(e){return void 0!==e&&void 0!==e.enterprise}class hg{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lg(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fg(e,t){return ig(e,"GET","/v2/recaptchaConfig",rg(e,t))}async function pg(e,t){return ig(e,"POST","/v1/accounts:lookup",t)}function mg(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(jb){}}function gg(e){return 1e3*Number(e)}function yg(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Mm("JWT malformed, contained fewer than 3 sections"),null;try{const e=wr(n);return e?JSON.parse(e):(Mm("Failed to decode base64 JWT payload"),null)}catch(jb){return Mm("Caught error parsing JWT payload as JSON",null===jb||void 0===jb?void 0:jb.toString()),null}}function vg(e){const t=yg(e);return Hm(t,"internal-error"),Hm("undefined"!==typeof t.exp,"internal-error"),Hm("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function bg(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(jb){throw jb instanceof Lr&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(jb)&&e.auth.currentUser===e&&await e.auth.signOut(),jb}}class wg{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(jb){return void((null===jb||void 0===jb?void 0:jb.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class xg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mg(this.lastLoginAt),this.creationTime=mg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _g(e){var t;const n=e.auth,r=await e.getIdToken(),i=await bg(e,pg(n,{idToken:r}));Hm(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?Sg(s.providerUserInfo):[],a=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null!==a&&void 0!==a&&a.length),u=!!l&&c,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xg(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function Sg(e){return e.map(e=>{let{providerId:t}=e,n=Im(e,Am);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Eg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Hm(e.idToken,"internal-error"),Hm("undefined"!==typeof e.idToken,"internal-error"),Hm("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):vg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Hm(0!==e.length,"internal-error");const t=vg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Hm(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await sg(e,{},async()=>{const n=zr({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await ag(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&Cr(e.emulatorConfig.host)&&(a.credentials="include"),Zm.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Eg;return n&&(Hm("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Hm("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Hm("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eg,this.toJSON())}_performRefresh(){return Wm("not implemented")}}function kg(e,t){Hm("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ng{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=Im(e,Pm);this.providerId="firebase",this.proactiveRefresh=new wg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await bg(this,this.stsTokenManager.getToken(this.auth,e));return Hm(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Gr(e),r=await n.getIdToken(t),i=yg(r);Hm(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:mg(gg(i.auth_time)),issuedAtTime:mg(gg(i.iat)),expirationTime:mg(gg(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Gr(e);await _g(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Hm(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Ht({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ng(Ht(Ht({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Hm(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await _g(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(is(this.auth.app))return Promise.reject(zm(this.auth));const e=await this.getIdToken();return await bg(this,async function(e,t){return ig(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Ht(Ht({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Ht({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:_}=t;Hm(v&&_,e,"internal-error");const S=Eg.fromJSON(this.name,_);Hm("string"===typeof v,e,"internal-error"),kg(u,e.name),kg(d,e.name),Hm("boolean"===typeof b,e,"internal-error"),Hm("boolean"===typeof w,e,"internal-error"),kg(h,e.name),kg(f,e.name),kg(p,e.name),kg(m,e.name),kg(g,e.name),kg(y,e.name);const E=new Ng({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(E.providerData=x.map(e=>Ht({},e))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Eg;r.updateFromServerResponse(t);const i=new Ng({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await _g(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Hm(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Sg(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),o=new Eg;o.updateFromIdToken(n);const a=new Ng({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new xg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(a,l),a}}const Cg=new Map;function Tg(e){Gm(e instanceof Function,"Expected a class definition");let t=Cg.get(e);return t?(Gm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Cg.set(e,t),t)}class Ig{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ig.type="NONE";const Ag=Ig;function Pg(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Rg{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Pg(this.userKey,r.apiKey,i),this.fullPersistenceKey=Pg("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await pg(this.auth,{idToken:e}).catch(()=>{});return t?Ng._fromGetAccountInfoResponse(this.auth,t,e):null}return Ng._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Rg(Tg(Ag),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Tg(Ag);const s=Pg(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await pg(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Ng._fromGetAccountInfoResponse(e,r,t)}else n=Ng._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new Rg(i,e,n)):new Rg(i,e,n)}}function jg(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Mg(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Og(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ug(t))return"Blackberry";if(Vg(t))return"Webos";if(Dg(t))return"Safari";if((t.includes("chrome/")||Lg(t))&&!t.includes("edge/"))return"Chrome";if(Fg(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Og(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr();return/firefox\//i.test(e)}function Dg(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr();return/crios\//i.test(e)}function Mg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr();return/iemobile/i.test(e)}function Fg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr();return/android/i.test(e)}function Ug(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr();return/blackberry/i.test(e)}function Vg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr();return/webos/i.test(e)}function zg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Bg(){return function(){const e=Rr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function qg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr();return zg(e)||Fg(e)||Vg(e)||Ug(e)||/windows phone/i.test(e)||Mg(e)}function Hg(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=jg(Rr());break;case"Worker":t="".concat(jg(Rr()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(as,"/").concat(r)}class Wg{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(jb){r(jb)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(jb){t.reverse();for(const n of t)try{n()}catch(rt){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===jb||void 0===jb?void 0:jb.message})}}}class Gg{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Kg{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $g(this),this.idTokenSubscription=new $g(this),this.beforeStateQueue=new Wg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tg(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Rg.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(jb){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await pg(this,{idToken:e}),n=await Ng._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(is(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,o=null===(s=n)||void 0===s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==o||null===a||void 0===a||!a.user||(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(jb){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(jb))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Hm(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(jb){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _g(e)}catch(jb){if((null===jb||void 0===jb?void 0:jb.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(is(this.app))return Promise.reject(zm(this));const t=e?Gr(e):null;return t&&Hm(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Hm(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return is(this.app)?Promise.reject(zm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return is(this.app)?Promise.reject(zm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tg(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ig(e,"GET","/v2/passwordPolicy",rg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Gg(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mr("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ig(e,"POST","/v2/accounts:revokeToken",rg(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Tg(e)||this._popupRedirectResolver;Hm(t,this,"argument-error"),this.redirectPersistenceManager=await Rg.create(this,[Tg(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Hm(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Hm(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(is(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Lm.logLevel<=Jr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Lm.warn("Auth (".concat(as,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Qg(e){return Gr(e)}class $g{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Hr(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Hm(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yg(e){return Xg.loadJS(e)}function Jg(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Zg{constructor(){this.enterprise=new ey}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ey{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ty="NO_RECAPTCHA";class ny{constructor(e){this.type="recaptcha-enterprise",this.auth=Qg(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;dg(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(ty)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Zg).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{fg(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new hg(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&dg(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Xg.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Yg(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function ry(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new ny(e);let o;if(i)o=ty;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=Ht({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function iy(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ry(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await ry(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("PHONE_PROVIDER")){const i=await ry(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await ry(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await ry(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function sy(e){const t=Qg(e),n=await fg(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new hg(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new ny(t).verify()}}function oy(e,t,n){const r=Qg(e);Hm(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=ay(t),{host:o,port:a}=function(e){const t=ay(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ly(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ly(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Hm(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Hm(Ur(c,r.config.emulator)&&Ur(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Cr(o)?(Tr("".concat(s,"//").concat(o).concat(l)),Pr("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ay(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ly(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class cy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wm("not implemented")}_getIdTokenResponse(e){return Wm("not implemented")}_linkToIdToken(e,t){return Wm("not implemented")}_getReauthenticationResolver(e){return Wm("not implemented")}}async function uy(e,t){return ig(e,"POST","/v1/accounts:signUp",t)}async function dy(e,t){return og(e,"POST","/v1/accounts:signInWithPassword",rg(e,t))}class hy extends cy{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new hy(e,t,"password")}static _fromEmailAndCode(e,t){return new hy(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return iy(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",dy,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return og(e,"POST","/v1/accounts:signInWithEmailLink",rg(e,t))}(e,{email:this._email,oobCode:this._password});default:Fm(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return iy(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uy,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return og(e,"POST","/v1/accounts:signInWithEmailLink",rg(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Fm(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function fy(e,t){return og(e,"POST","/v1/accounts:signInWithIdp",rg(e,t))}class py extends cy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new py(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fm("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Im(t,Rm);if(!n||!r)return null;const s=new py(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return fy(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,fy(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fy(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=zr(t)}return e}}async function my(e,t){return ig(e,"POST","/v1/accounts:sendVerificationCode",rg(e,t))}const gy={USER_NOT_FOUND:"user-not-found"};class yy extends cy{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new yy({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new yy({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return og(e,"POST","/v1/accounts:signInWithPhoneNumber",rg(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await og(e,"POST","/v1/accounts:signInWithPhoneNumber",rg(e,t));if(n.temporaryProof)throw ug(e,"account-exists-with-different-credential",n);return n}(e,Ht({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return og(e,"POST","/v1/accounts:signInWithPhoneNumber",rg(e,Ht(Ht({},t),{},{operation:"REAUTH"})),gy)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new yy({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class vy{constructor(e){var t,n,r,i,s,o;const a=Br(qr(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Hm(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Br(qr(e)).link,n=t?Br(qr(t)).deep_link_id:null,r=Br(qr(e)).deep_link_id;return(r?Br(qr(r)).link:null)||r||n||t||e}(e);try{return new vy(t)}catch(n){return null}}}class by{constructor(){this.providerId=by.PROVIDER_ID}static credential(e,t){return hy._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=vy.parseLink(t);return Hm(n,"argument-error"),hy._fromEmailAndCode(e,n.code,n.tenantId)}}by.PROVIDER_ID="password",by.EMAIL_PASSWORD_SIGN_IN_METHOD="password",by.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class wy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class xy extends wy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _y extends xy{constructor(){super("facebook.com")}static credential(e){return py._fromParams({providerId:_y.PROVIDER_ID,signInMethod:_y.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _y.credentialFromTaggedObject(e)}static credentialFromError(e){return _y.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return _y.credential(t.oauthAccessToken)}catch(n){return null}}}_y.FACEBOOK_SIGN_IN_METHOD="facebook.com",_y.PROVIDER_ID="facebook.com";class Sy extends xy{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return py._fromParams({providerId:Sy.PROVIDER_ID,signInMethod:Sy.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Sy.credentialFromTaggedObject(e)}static credentialFromError(e){return Sy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Sy.credential(n,r)}catch(i){return null}}}Sy.GOOGLE_SIGN_IN_METHOD="google.com",Sy.PROVIDER_ID="google.com";class Ey extends xy{constructor(){super("github.com")}static credential(e){return py._fromParams({providerId:Ey.PROVIDER_ID,signInMethod:Ey.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ey.credentialFromTaggedObject(e)}static credentialFromError(e){return Ey.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ey.credential(t.oauthAccessToken)}catch(n){return null}}}Ey.GITHUB_SIGN_IN_METHOD="github.com",Ey.PROVIDER_ID="github.com";class ky extends xy{constructor(){super("twitter.com")}static credential(e,t){return py._fromParams({providerId:ky.PROVIDER_ID,signInMethod:ky.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ky.credentialFromTaggedObject(e)}static credentialFromError(e){return ky.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ky.credential(n,r)}catch(i){return null}}}ky.TWITTER_SIGN_IN_METHOD="twitter.com",ky.PROVIDER_ID="twitter.com";class Ny{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ng._fromIdTokenResponse(e,n,r),s=Cy(n);return new Ny({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Cy(n);return new Ny({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Cy(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ty extends Lr{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ty.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ty(e,t,n,r)}}function Iy(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ty._fromErrorAndOperation(e,n,t,r);throw n})}async function Ay(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await bg(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ny._forOperation(e,"link",r)}async function Py(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(is(r.app))return Promise.reject(zm(r));const i="reauthenticate";try{const s=await bg(e,Iy(r,i,t,e),n);Hm(s.idToken,r,"internal-error");const o=yg(s.idToken);Hm(o,r,"internal-error");const{sub:a}=o;return Hm(e.uid===a,r,"user-mismatch"),Ny._forOperation(e,i,s)}catch(jb){throw(null===jb||void 0===jb?void 0:jb.code)==="auth/".concat("user-not-found")&&Fm(r,"user-mismatch"),jb}}async function Ry(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(is(e.app))return Promise.reject(zm(e));const r="signIn",i=await Iy(e,r,t),s=await Ny._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function jy(e,t){return ig(e,"POST","/v2/accounts/mfaEnrollment:start",rg(e,t))}new WeakMap;const Oy="__sak";class Dy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Oy,"1"),this.storage.removeItem(Oy),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ly extends Dy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Bg()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ly.type="LOCAL";const My=Ly;function Fy(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Uy(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Vy{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Uy(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Fy(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Uy(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Uy(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Fy(n);const i=setInterval(()=>{const e=Fy(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Vy.type="COOKIE";class zy extends Dy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zy.type="SESSION";const By=zy;class qy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new qy(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Hy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}qy.receivers=[];class Wy{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=Hy("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Gy(){return window}function Ky(){return"undefined"!==typeof Gy().WorkerGlobalScope&&"function"===typeof Gy().importScripts}const Qy="firebaseLocalStorageDb",$y="firebaseLocalStorage",Xy="fbase_key";class Yy{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jy(e,t){return e.transaction([$y],t?"readwrite":"readonly").objectStore($y)}function Zy(){const e=indexedDB.open(Qy,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore($y,{keyPath:Xy})}catch(jb){n(jb)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains($y)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Qy);return new Yy(e).toPromise()}(),t(await Zy()))})})}async function ev(e,t,n){const r=Jy(e,!0).put({[Xy]:t,value:n});return new Yy(r).toPromise()}function tv(e,t){const n=Jy(e,!0).delete(t);return new Yy(n).toPromise()}class nv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Zy()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(jb){if(t++>3)throw jb;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ky()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qy._getInstance(Ky()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Wy(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zy();return await ev(e,Oy,"1"),await tv(e,Oy),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ev(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Jy(e,!1).get(t),r=await new Yy(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>tv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Jy(e,!1).getAll();return new Yy(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}nv.type="LOCAL";const rv=nv;function iv(e,t){return ig(e,"POST","/v2/accounts/mfaSignIn:start",rg(e,t))}Jg("rcb"),new Ym(3e4,6e4);const sv="recaptcha";async function ov(e,t,n){if(!e._getRecaptchaConfig())try{await sy(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Hm("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===ty){Hm((null===n||void 0===n?void 0:n.type)===sv,e,"argument-error");return jy(e,await av(e,t,n))}return jy(e,t)},o=iy(e,r,"mfaSmsEnrollment",s,"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Hm("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Hm(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===ty){Hm((null===n||void 0===n?void 0:n.type)===sv,e,"argument-error");return iv(e,await av(e,t,n))}return iv(e,t)},l=iy(e,o,"mfaSmsSignIn",a,"PHONE_PROVIDER");return(await l.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=async(e,t)=>{if(t.captchaResponse===ty){Hm((null===n||void 0===n?void 0:n.type)===sv,e,"argument-error");return my(e,await av(e,t,n))}return my(e,t)},s=iy(e,t,"sendVerificationCode",r,"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function av(e,t,n){Hm(n.type===sv,e,"argument-error");const r=await n.verify();Hm("string"===typeof r,e,"argument-error");const i=Ht({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class lv{constructor(e){this.providerId=lv.PROVIDER_ID,this.auth=Qg(e)}verifyPhoneNumber(e,t){return ov(this.auth,e,Gr(t))}static credential(e,t){return yy._fromVerification(e,t)}static credentialFromResult(e){const t=e;return lv.credentialFromTaggedObject(t)}static credentialFromError(e){return lv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?yy._fromTokenResponse(n,r):null}}function cv(e,t){return t?Tg(t):(Hm(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}lv.PROVIDER_ID="phone",lv.PHONE_SIGN_IN_METHOD="phone";class uv extends cy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fy(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dv(e){return Ry(e.auth,new uv(e),e.bypassAuthState)}function hv(e){const{auth:t,user:n}=e;return Hm(n,t,"internal-error"),Py(n,new uv(e),e.bypassAuthState)}async function fv(e){const{auth:t,user:n}=e;return Hm(n,t,"internal-error"),Ay(n,new uv(e),e.bypassAuthState)}class pv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(jb){this.reject(jb)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(jb){this.reject(jb)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dv;case"linkViaPopup":case"linkViaRedirect":return fv;case"reauthViaPopup":case"reauthViaRedirect":return hv;default:Fm(this.auth,"internal-error")}}resolve(e){Gm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const mv=new Ym(2e3,1e4);class gv extends pv{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,gv.currentPopupAction&&gv.currentPopupAction.cancel(),gv.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Hm(e,this.auth,"internal-error"),e}async onExecution(){Gm(1===this.filter.length,"Popup operations only handle one event");const e=Hy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Um(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Um(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gv.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Um(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,mv.get())};e()}}gv.currentPopupAction=null;const yv=new Map;class vv extends pv{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=yv.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=xv(t),r=wv(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(jb){e=()=>Promise.reject(jb)}yv.set(this.auth._key(),e)}return this.bypassAuthState||yv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function bv(e,t){yv.set(e._key(),t)}function wv(e){return Tg(e._redirectPersistence)}function xv(e){return Pg("pendingRedirect",e.config.apiKey,e.name)}async function _v(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(is(e.app))return Promise.reject(zm(e));const r=Qg(e),i=cv(r,t),s=new vv(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Sv{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kv(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!kv(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Um(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ev(e))}saveEventToCache(e){this.cachedEventUids.add(Ev(e)),this.lastProcessedEventTime=Date.now()}}function Ev(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function kv(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Nv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cv=/^https?/;async function Tv(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ig(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Iv(r))return}catch(n){}Fm(e,"unauthorized-domain")}function Iv(e){const t=Km(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Cv.test(n))return!1;if(Nv.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Av=new Ym(3e4,6e4);function Pv(){const e=Gy().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Rv(e){return new Promise((t,n)=>{var r,i;function s(){Pv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Pv(),n(Um(e,"network-request-failed"))},timeout:Av.get()})}if(null!==(r=Gy().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Gy().gapi)||void 0===i||!i.load){const t=Jg("iframefcb");return Gy()[t]=()=>{gapi.load?s():n(Um(e,"network-request-failed"))},Yg("".concat(Xg.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw jv=null,e})}let jv=null;const Ov=new Ym(5e3,15e3),Dv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mv(e){const t=e.config;Hm(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Jm(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:as},i=Lv.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(zr(r).slice(1))}async function Fv(e){const t=await function(e){return jv=jv||Rv(e),jv}(e),n=Gy().gapi;return Hm(n,e,"internal-error"),t.open({where:document.body,url:Mv(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dv,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Um(e,"network-request-failed"),s=Gy().setTimeout(()=>{r(i)},Ov.get());function o(){Gy().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const Uv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(jb){}}}function zv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Ht(Ht({},Uv),{},{width:r.toString(),height:i.toString(),top:s,left:o}),c=Rr().toLowerCase();n&&(a=Lg(c)?"_blank":n),Og(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return zg(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Vv(null);const d=window.open(t||"",a,u);Hm(d,e,"popup-blocked");try{d.focus()}catch(jb){}return new Vv(d)}const Bv="__/auth/handler",qv="emulator/auth/handler",Hv=encodeURIComponent("fac");async function Wv(e,t,n,r,i,s){Hm(e.config.authDomain,e,"auth-domain-config-required"),Hm(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:as,eventId:i};if(t instanceof wy){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof xy){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Hv,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Bv);return Jm(t,qv)}(e),"?").concat(zr(a).slice(1)).concat(c)}const Gv="webStorageSupport";const Kv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=By,this._completeRedirectFn=_v,this._overrideRedirectResult=bv}async _openPopup(e,t,n,r){var i;Gm(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return zv(e,await Wv(e,t,n,Km(),r),Hy())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Gy().location.href=e}(await Wv(e,t,n,Km(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Gm(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Fv(e),n=new Sv(e);return t.register("authEvent",t=>{Hm(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gv,{type:Gv},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Gv];void 0!==i&&t(!!i),Fm(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Tv(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qg()||Dg()||zg()}};var Qv="@firebase/auth",$v="1.11.0";class Xv{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Hm(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Yv=kr("authIdTokenMaxAge")||300;let Jv=null;var Zv;!function(e){Xg=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Um("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Zv="Browser",ns(new Kr("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Hm(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Zv,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hg(Zv)},c=new Kg(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Tg);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ns(new Kr("auth-internal",e=>(e=>new Xv(e))(Qg(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),us(Qv,$v,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Zv)),us(Qv,$v,"esm2020");const eb=(()=>{if("true"===new URLSearchParams(window.location.search).get("test"))return"test";return"test"===localStorage.getItem("zwift_racing_env")?"test":"production"})(),tb={apiKey:"AIzaSyAS0aobKJYA93AN66OTCF_LXPf4mu2RO4g",authDomain:"zwiftracingcloud9.firebaseapp.com",projectId:"zwiftracingcloud9",storageBucket:"zwiftracingcloud9.firebasestorage.app",messagingSenderId:"370744679165",appId:"1:370744679165:web:9d0849bcc5c772f13f7c94",measurementId:"G-MF1JXW4V0B"},nb=ls(tb),rb=function(e,t){const n="object"==typeof e?e:cs(),r="string"==typeof e?e:t||Ga,i=rs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=Sr(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&up(i,...e)}return i}(nb);let ib=null,sb=null;try{ib=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cs();const t=rs(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=rs(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Ur(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Fm(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Kv,persistence:[rv,My,By]}),r=kr("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Yv)return;const r=null===t||void 0===t?void 0:t.token;Jv!==r&&(Jv=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Gr(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Gr(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=Sr("auth");return s&&oy(n,"http://".concat(s)),n}(nb),sb=new Sy,sb.setCustomParameters({prompt:"select_account"}),console.log("\u2705 Firebase Auth initialized successfully")}catch(Ob){console.error("\u274c Firebase Auth initialization failed:",Ob),console.log("\ud83d\udd04 App will continue without authentication")}const ob=ib,ab=sb,lb={environment:eb,ridersCollection:"test"===eb?"riders_data_test":"riders_data",systemStatusCollection:"test"===eb?"system_status_test":"system",debug:"test"===eb};console.log("\ud83d\udd27 Environment: ".concat(eb.toUpperCase())),console.log("\ud83d\udcca Riders Collection: ".concat(lb.ridersCollection)),console.log("\ud83c\udf10 Firebase Project: ".concat(tb.projectId)),"test"===eb&&(console.log("\ud83e\uddea TEST MODE: Using test data collection"),setTimeout(()=>{const e=document.createElement("div");e.innerHTML="\ud83e\uddea TEST MODE - Using Test Data",e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      background: #fbbf24;\n      color: #000;\n      text-align: center;\n      padding: 8px;\n      font-weight: bold;\n      z-index: 9999;\n      box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n    ",document.body.insertBefore(e,document.body.firstChild)},100));var cb=n(579);const ub=(0,i.createContext)(null),db=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(null),[a,l]=(0,i.useState)(!0);(0,i.useEffect)(()=>{console.log("\ufffd Admin restrictions disabled - full access for all users"),l(!1);o({uid:"mock-admin",email:"public@access.com",displayName:"Public User",role:"admin",teamRole:"Team Manager",permissions:{canTriggerSync:!0,canViewAnalytics:!0,canManageRiders:!0,canExportData:!0}})},[]);const c={user:n,userProfile:s,loading:a,signInWithGoogle:async()=>{console.log("\ud83d\udd13 Authentication disabled - no sign-in required")},signInWithEmail:async(e,t)=>{console.log("\ud83d\udd13 Authentication disabled - no sign-in required")},signUpWithEmail:async function(e,t){console.log("\ud83d\udd13 Authentication disabled - no sign-up required")},signOut:async()=>{console.log("\ud83d\udd13 Authentication disabled - no sign-out required")},isAdmin:"admin"===(null===s||void 0===s?void 0:s.role),canTriggerSync:(null===s||void 0===s?void 0:s.permissions.canTriggerSync)||!1};return(0,cb.jsx)(ub.Provider,{value:c,children:t})},hb=(0,i.createContext)(void 0),fb="jeroen.diepenbroek@gmail.com",pb=e=>{switch(e){case"owner":return{canManageUsers:!0,canModifyData:!0,canViewAnalytics:!0,canExportData:!0,canManageSystem:!0,canAccessAdminPanel:!0};case"admin":return{canManageUsers:!1,canModifyData:!0,canViewAnalytics:!0,canExportData:!0,canManageSystem:!1,canAccessAdminPanel:!0};default:return{canManageUsers:!1,canModifyData:!1,canViewAnalytics:!1,canExportData:!1,canManageSystem:!1,canAccessAdminPanel:!1}}},mb=()=>{const e=(0,i.useContext)(hb);if(void 0===e)throw new Error("useAdmin must be used within an AdminProvider");return e},gb=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(null),[a,l]=(0,i.useState)(!0),[c,u]=(0,i.useState)(null),d="admin"===(null===s||void 0===s?void 0:s.role)||"owner"===(null===s||void 0===s?void 0:s.role),h="owner"===(null===s||void 0===s?void 0:s.role),f=async e=>{try{if(e.toLowerCase()===fb.toLowerCase())return"owner";const t=im(pp(rb,"admin_users"),function(e,t,n){const r=t,i=em("where",e);return sm._create(i,r,n)}("email","==",e.toLowerCase())),n=await function(e){e=No(e,dp);const t=No(e.firestore,wp),n=xp(t),r=new bm(t);return tm(e._query),rp(n,e._query).then(n=>new gm(t,r,e,n))}(t);if(!n.empty){const e=n.docs[0];return e.data().role||"user"}return"user"}catch(t){return console.error("Error checking admin status:",t),"user"}},p=async e=>{try{console.log("\ud83d\udd0d Checking admin status for:",e.email);const t=await f(e.email||"");console.log("\ud83d\udee1\ufe0f Determined role:",t);const n=pb(t),r={uid:e.uid,email:e.email||"",displayName:e.displayName||"",role:t,photoURL:e.photoURL||void 0,createdAt:new Date,lastLogin:new Date,permissions:n};return console.log("\ud83d\udcbe Saving admin user data to Firestore..."),await wm(mp(rb,"admin_users",e.uid),Ht(Ht({},r),{},{createdAt:r.createdAt.toISOString(),lastLogin:r.lastLogin.toISOString()})),console.log("\u2705 Admin user data saved successfully"),r}catch(n){var t;console.error("\u274c Error creating/updating admin user:",n);const r=(null===(t=e.email)||void 0===t?void 0:t.toLowerCase())===fb.toLowerCase()?"owner":"user";return{uid:e.uid,email:e.email||"",displayName:e.displayName||"",role:r,photoURL:e.photoURL||void 0,createdAt:new Date,lastLogin:new Date,permissions:pb(r)}}};return(0,i.useEffect)(()=>{if(!ob)return void l(!1);const e=function(e,t,n,r){return Gr(e).onAuthStateChanged(t,n,r)}(ob,async e=>{try{if(l(!0),e){r(e);const t=await vm(mp(rb,"admin_users",e.uid));if(t.exists()){const e=t.data();o(Ht(Ht({},e),{},{createdAt:new Date(e.createdAt),lastLogin:new Date(e.lastLogin)}))}else{const t=await p(e);o(t)}}else r(null),o(null)}catch(t){console.error("Error in auth state change:",t),u(t.message||"Authentication error"),r(null),o(null)}finally{l(!1)}});return()=>e()},[]),(0,cb.jsx)(hb.Provider,{value:{user:n,adminUser:s,loading:a,error:c,isAdmin:d,isOwner:h,signInWithGoogle:async()=>{try{if(l(!0),u(null),!ob||!ab)throw console.error("\u274c Firebase Auth not initialized"),console.log("Auth instance:",ob),console.log("Google Provider:",ab),new Error("Firebase Auth not initialized");console.log("\ud83d\udd10 Starting Google authentication..."),console.log("Auth domain:","zwiftracingcloud9.firebaseapp.com"),console.log("Current URL:",window.location.origin);const e=await async function(e,t,n){if(is(e.app))return Promise.reject(Um(e,"operation-not-supported-in-this-environment"));const r=Qg(e);Bm(e,t,wy);const i=cv(r,n);return new gv(r,"signInViaPopup",t,i).executeNotNull()}(ob,ab);console.log("\u2705 Google authentication successful:",e.user.email),console.log("User UID:",e.user.uid);const t=await p(e.user);console.log("\u2705 Admin login successful: ".concat(t.email," (").concat(t.role,")")),console.log("\ud83d\udee1\ufe0f Permissions:",t.permissions)}catch(e){console.error("\u274c Admin login failed:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),console.error("Full error:",e);let t="Login failed";throw"auth/popup-closed-by-user"===e.code?t="Login popup was closed. Please try again.":"auth/popup-blocked"===e.code?t="Login popup was blocked by browser. Please allow popups and try again.":"auth/network-request-failed"===e.code?t="Network error - please check your internet connection and try again.":"auth/internal-error"===e.code?t="Internal authentication error. Please check browser console for details.":"permission-denied"===e.code?t="Access denied - contact system administrator":e.message&&(t=e.message),u(t),e}finally{l(!1)}},signOut:async()=>{try{if(!ob)throw new Error("Firebase Auth not initialized");await function(e){return Gr(e).signOut()}(ob),r(null),o(null),console.log("\u2705 Admin logout successful")}catch(e){throw console.error("\u274c Admin logout failed:",e),u(e.message||"Logout failed"),e}},checkAdminStatus:f,updateUserRole:async(e,t)=>{try{if(!h)throw new Error("Only owners can update user roles");const n=pb(t);await wm(mp(rb,"admin_users",e),{role:t,permissions:n,updatedAt:(new Date).toISOString()},{merge:!0}),console.log("\u2705 User role updated: ".concat(e," -> ").concat(t))}catch(n){throw console.error("\u274c Failed to update user role:",n),n}}},children:t})},yb=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),[s,o]=(0,i.useState)(null);return(0,i.useEffect)(()=>{console.log("\ud83d\udd25 Connecting to Firestore collection: ".concat(lb.ridersCollection)),console.log("\ud83c\udf10 Environment: ".concat(lb.environment.toUpperCase())),console.log("\ud83d\udd17 Firebase config:",rb.app.options);const e=_m(im(pp(rb,lb.ridersCollection)),e=>{try{console.log("\ud83d\udcca Firestore snapshot received: ".concat(e.size," documents")),0===e.size&&console.warn("\u274c No documents found in collection: ".concat(lb.ridersCollection));const n=[];e.forEach(e=>{var t,r,i,s,o,a,l;const c=e.data(),u=c.power||{},d=c.race||{},h=e=>e?"number"===typeof e?e:"object"===typeof e&&void 0!==e.rating?e.rating:0:0;n.push({id:e.id,rider_id:(null===(t=c.riderId)||void 0===t?void 0:t.toString())||"",name:c.name||"",zpCategory:c.zpCategory||"",zpFTP:c.zpFTP||0,weight:c.weight||0,finishes:d.finishes||0,podiums:d.podiums||0,wins:d.wins||0,dnfs:d.dnfs||0,velo_current:h(d.current),velo_max30:h(d.max30),velo_max90:h(d.max90),velo_category_current:null===(r=d.current)||void 0===r||null===(i=r.mixed)||void 0===i?void 0:i.category,velo_category_max30:null===(s=d.max30)||void 0===s||null===(o=s.mixed)||void 0===o?void 0:o.category,velo_category_max90:null===(a=d.max90)||void 0===a||null===(l=a.mixed)||void 0===l?void 0:l.category,wkg5:u.wkg5||0,wkg15:u.wkg15||0,wkg30:u.wkg30||0,wkg60:u.wkg60||0,wkg120:u.wkg120||0,wkg300:u.wkg300||0,wkg1200:u.wkg1200||0,zrCS:u.compoundScore||0,w5:u.w5||0,w15:u.w15||0,w30:u.w30||0,w60:u.w60||0,w120:u.w120||0,w300:u.w300||0,w1200:u.w1200||0,rp:h(d.current)})}),n.sort((e,t)=>t.velo_current-e.velo_current),console.log("\u2705 Processed ".concat(n.length," riders from Firestore (").concat(lb.environment,")")),t(n),r(!1)}catch(n){console.error("Error processing riders data:",n),o("Failed to process riders data"),r(!1)}},e=>{console.error("\u274c Firestore error:",e),console.error("Full error object:",e),o("Failed to fetch riders data from Firestore (".concat(lb.environment,")")),r(!1)});return()=>e()},[]),{riders:e,loading:n,error:s}},vb=e=>{let{onClose:t}=e;const{signInWithGoogle:n,loading:r,error:i}=mb();return(0,cb.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,cb.jsx)("div",{className:"bg-slate-900/95 border border-cyan-500/50 rounded-lg p-8 max-w-md w-full mx-4 shadow-2xl shadow-cyan-500/20",children:(0,cb.jsxs)("div",{className:"text-center",children:[(0,cb.jsxs)("div",{className:"mb-6",children:[(0,cb.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-full flex items-center justify-center mb-4",children:(0,cb.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cb.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,cb.jsx)("h2",{className:"text-2xl font-bold text-transparent bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text font-mono",children:"Admin Access"}),(0,cb.jsx)("p",{className:"text-gray-400 mt-2 font-mono",children:"Sign in to access admin features"})]}),i&&(0,cb.jsx)("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-500/50 rounded text-red-300 text-sm",children:i}),(0,cb.jsx)("button",{onClick:async()=>{try{console.log("\ud83d\udd04 Attempting Google sign in..."),await n(),t&&t()}catch(e){console.error("\u274c Sign in failed:",e)}},disabled:r,className:"w-full bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-3 font-mono",children:r?(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Authenticating..."]}):(0,cb.jsxs)(cb.Fragment,{children:[(0,cb.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,cb.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,cb.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,cb.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,cb.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})}),(0,cb.jsxs)("div",{className:"mt-6 text-xs text-gray-500 font-mono",children:[(0,cb.jsx)("p",{children:"\ud83d\udd12 Admin access is restricted to authorized users only"}),(0,cb.jsx)("p",{className:"mt-1",children:"Contact the system owner for access requests"})]}),i&&(0,cb.jsx)("button",{onClick:()=>{console.log("\ud83d\udd27 Troubleshooting Google Auth..."),console.log("Current domain:",window.location.hostname),console.log("Protocol:",window.location.protocol),console.log("User agent:",navigator.userAgent),alert("Check browser console for troubleshooting info. Make sure popups are enabled for this site.")},className:"mt-2 text-orange-400 hover:text-orange-300 transition-colors duration-200 text-xs font-mono underline",children:"\ud83d\udd27 Troubleshooting Info"}),t&&(0,cb.jsx)("button",{onClick:t,className:"mt-4 text-gray-400 hover:text-white transition-colors duration-200 text-sm font-mono",children:"Cancel"})]})})})},bb=()=>{const e=ee(),t=J(),{status:n,formatLastUpdate:r,formatTimestamp:s,getStatusColor:o,getStatusIndicator:a}=(()=>{const[e,t]=(0,i.useState)({lastUpdated:null,isOnline:!1,riderCount:0,lastSyncDuration:null,nextScheduledSync:null}),[n,r]=(0,i.useState)(!0);(0,i.useEffect)(()=>{console.log("\ud83d\udd0d Initializing system status monitoring...");const e=mp(rb,"system","status");console.log("\ud83d\udccd Listening to system/status document");const n=_m(e,e=>{if(console.log("\ud83d\udcc4 System status document response:",e.exists()),e.exists()){var n,i;const r=e.data();console.log("\u2705 System status data:",r),t({lastUpdated:(null===(n=r.lastUpdated)||void 0===n?void 0:n.toDate())||null,isOnline:r.isOnline||!1,riderCount:r.riderCount||0,lastSyncDuration:r.lastSyncDuration||null,nextScheduledSync:(null===(i=r.nextScheduledSync)||void 0===i?void 0:i.toDate())||null})}else console.log("\u274c System status document does not exist, falling back to riders check"),s();r(!1)},e=>{console.error("\u274c Error fetching system status:",e),console.error("Full error object:",e),s()});return()=>n()},[]);const s=async()=>{console.log("\ud83d\udd04 Falling back to checking riders collection directly...");try{const n="riders_teamnl_prod",i=mp(rb,n,"150437");console.log("\ud83c\udfaf Checking sample rider document: ".concat(n,"/150437"));const s=await vm(i);if(console.log("\ud83d\udcc4 Sample rider document exists:",s.exists()),s.exists()){var e;const n=s.data();console.log("\ud83d\udcca Sample rider data keys:",Object.keys(n));const r=(null===(e=n.lastUpdated)||void 0===e?void 0:e.toDate())||null;console.log("\u23f0 Last updated:",r);const i=!!r&&Date.now()-r.getTime()<72e5;console.log("\ud83d\udfe2 System online status:",i);const o=r?new Date(r.getTime()+36e5):null;t(e=>Ht(Ht({},e),{},{lastUpdated:r,isOnline:i,nextScheduledSync:o}))}else console.log("\u274c Sample rider document not found");r(!1)}catch(Ob){console.error("\u274c Error checking riders last update:",Ob),r(!1)}};return{status:e,loading:n,formatLastUpdate:()=>{if(!e.lastUpdated)return"Unknown";const t=(new Date).getTime()-e.lastUpdated.getTime(),n=Math.floor(t/6e4);if(n<1)return"Just now";if(n<60)return"".concat(n,"m ago");const r=Math.floor(n/60);if(r<24)return"".concat(r,"h ago");const i=Math.floor(r/24);return"".concat(i,"d ago")},formatTimestamp:()=>e.lastUpdated?e.lastUpdated.toLocaleString("nl-NL",{weekday:"short",day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Amsterdam"}):"No data",getStatusColor:()=>{if(!e.lastUpdated)return"text-gray-500";const t=(Date.now()-e.lastUpdated.getTime())/36e5;return t<1.5?"text-green-400":t<3?"text-yellow-400":"text-red-400"},getStatusIndicator:()=>{if(!e.lastUpdated)return"\u26ab";const t=(Date.now()-e.lastUpdated.getTime())/36e5;return t<1.5?"\ud83d\udfe2":t<3?"\ud83d\udfe1":"\ud83d\udd34"}}})(),{riders:l}=yb(),{adminUser:c,isAdmin:u,signOut:d}=mb(),[h,f]=(0,i.useState)(!1);return(0,cb.jsxs)("div",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 text-white relative overflow-hidden",children:[(0,cb.jsxs)("div",{className:"absolute inset-0 opacity-20",children:[(0,cb.jsx)("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-cyan-500 rounded-full blur-3xl animate-pulse"}),(0,cb.jsx)("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-orange-500 rounded-full blur-3xl animate-pulse delay-1000"})]}),(0,cb.jsx)("div",{className:"absolute inset-0 opacity-10 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQwIDFIMUw0MCA0MFYxWiIgc3Ryb2tlPSJjeWFuIiBzdHJva2Utd2lkdGg9IjEiLz4KPC9zdmc+')]"}),(0,cb.jsxs)("div",{className:"relative z-10 px-6 py-8",children:[(0,cb.jsxs)("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[(0,cb.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,cb.jsxs)("div",{className:"relative",children:[(0,cb.jsx)("img",{src:"/assets/cloudracer-logo.png",alt:"CloudRacer",className:"h-24 w-24 rounded-full border-2 border-cyan-400 shadow-2xl shadow-cyan-500/50"}),(0,cb.jsx)("div",{className:"absolute -inset-2 border border-cyan-400 rounded-full animate-ping opacity-75"})]}),(0,cb.jsxs)("div",{className:"space-y-2",children:[(0,cb.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent",children:"CLOUDRACER"}),(0,cb.jsx)("p",{className:"text-xl text-cyan-300 font-mono",children:"TeamNL Cloud9 Racing Dashboard"}),(0,cb.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-300",children:[(0,cb.jsx)("span",{className:"text-lg",children:a()}),(0,cb.jsx)("span",{className:"font-mono",children:n.isOnline?"SYSTEM ACTIVE":"SYSTEM OFFLINE"}),(0,cb.jsx)("span",{className:"text-orange-400",children:"|"}),(0,cb.jsxs)("span",{className:"font-mono ".concat(o()),children:["UPDATED ",r()]})]}),(0,cb.jsxs)("div",{className:"text-xs text-gray-400 font-mono mt-1",children:["Last sync: ",s()]})]})]}),(0,cb.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,cb.jsxs)("div",{className:"hidden md:flex space-x-4",children:[(0,cb.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-4 min-w-[120px]",children:[(0,cb.jsx)("div",{className:"text-cyan-400 text-xs font-mono uppercase tracking-wider",children:"Riders"}),(0,cb.jsx)("div",{className:"text-2xl font-bold text-white",children:l.length}),(0,cb.jsx)("div",{className:"text-xs text-gray-400",children:"TeamNL Active"})]}),(0,cb.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-orange-500/30 rounded-lg p-4 min-w-[120px]",children:[(0,cb.jsx)("div",{className:"text-orange-400 text-xs font-mono uppercase tracking-wider",children:"Status"}),(0,cb.jsx)("div",{className:"text-2xl font-bold ".concat(o()),children:n.isOnline?"LIVE":"OFFLINE"}),(0,cb.jsx)("div",{className:"text-xs text-gray-400",children:n.isOnline?"Auto Sync":r()})]})]}),(0,cb.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cb.jsxs)("nav",{className:"flex space-x-2",children:[(0,cb.jsx)("button",{onClick:()=>{e("/")},className:"px-4 py-2 rounded-lg font-mono text-sm transition-all duration-200 ".concat("/"===t.pathname||"/riders"===t.pathname?"bg-cyan-500 text-white":"bg-black/40 border border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/20"),children:"\ud83d\udcca Riders Data"}),(0,cb.jsx)("button",{onClick:()=>{u?e("/admin"):f(!0)},className:"px-4 py-2 rounded-lg font-mono text-sm transition-all duration-200 ".concat("/admin"===t.pathname?"bg-orange-500 text-white":"bg-black/40 border border-orange-500/30 text-orange-400 hover:bg-orange-500/20"),children:u?"\u2699\ufe0f Admin":"\ud83d\udd12 Admin"})]}),(0,cb.jsx)("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-3",children:(0,cb.jsx)("div",{className:"flex items-center space-x-3",children:u&&c?(0,cb.jsxs)(cb.Fragment,{children:[c.photoURL&&(0,cb.jsx)("img",{src:c.photoURL,alt:"Admin",className:"w-8 h-8 rounded-full border border-cyan-400"}),(0,cb.jsxs)("div",{className:"text-right",children:[(0,cb.jsx)("div",{className:"text-sm font-mono text-cyan-400",children:c.displayName}),(0,cb.jsxs)("div",{className:"text-xs text-orange-400 font-mono",children:["\ud83d\udee1\ufe0f ",c.role.toUpperCase()," \u2022",(0,cb.jsx)("button",{onClick:d,className:"ml-1 text-red-400 hover:text-red-300 transition-colors",children:"Sign Out"})]})]})]}):(0,cb.jsxs)("div",{className:"text-right",children:[(0,cb.jsx)("div",{className:"text-sm font-mono text-cyan-400",children:"Public Access"}),(0,cb.jsx)("div",{className:"text-xs text-gray-400 font-mono",children:"\ud83c\udf10 OPEN \u2022 Full Features"})]})})})]})]})]}),(0,cb.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent opacity-60"}),(0,cb.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-orange-400 to-transparent opacity-60"})]}),h&&(0,cb.jsx)(vb,{onClose:()=>f(!1)})]})},wb=()=>{const{riders:e,loading:t,error:n}=yb(),[r,s]=(0,i.useState)(!1),[o,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)({rider_id:"",name:""}),[u,d]=(0,i.useState)(""),[h,f]=(0,i.useState)(new Set),[p,m]=(0,i.useState)(null),[g,y]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{try{const e=await vm(mp(rb,"config","target_riders"));if(e.exists()){const t=e.data();y(t.rider_ids||[])}}catch(n){console.error("Error loading target riders:",n)}})()},[]);const v=async e=>{try{const t=mp(rb,"config","target_riders");return(await vm(t)).exists()?await xm(t,{rider_ids:Cm(e),lastUpdated:new Date,updatedBy:"web_app"}):await wm(t,{rider_ids:[e],lastUpdated:new Date,updatedBy:"web_app",description:"Target riders for GitHub Actions automation"}),y(t=>[...t,e]),!0}catch(n){return console.error("Error adding to automation:",n),!1}},b=async e=>{try{const t=mp(rb,"config","target_riders");return await xm(t,{rider_ids:Tm(e),lastUpdated:new Date,updatedBy:"web_app"}),y(t=>t.filter(t=>t!==e)),!0}catch(n){return console.error("Error removing from automation:",n),!1}},w=(e,t)=>{m({type:e,text:t}),setTimeout(()=>m(null),5e3)},x=()=>{f(new Set(e.map(e=>e.id)))},_=()=>{f(new Set)};return(0,cb.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white",children:[(0,cb.jsx)(bb,{}),(0,cb.jsx)("div",{className:"p-6",children:(0,cb.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,cb.jsxs)("div",{className:"mb-8",children:[(0,cb.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Rider Management"}),(0,cb.jsx)("p",{className:"text-gray-300 mt-2",children:"Add or remove riders from the system"})]}),p&&(0,cb.jsx)("div",{className:"mb-6 p-4 rounded-lg border ".concat("success"===p.type?"bg-green-500/20 border-green-500/50 text-green-300":"bg-red-500/20 border-red-500/50 text-red-300"),children:p.text}),(0,cb.jsxs)("div",{className:"mb-6 flex flex-wrap gap-4",children:[(0,cb.jsx)("button",{onClick:()=>s(!0),className:"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 px-4 py-2 rounded-lg font-semibold transition-all duration-200",children:"\u2795 Add Single Rider"}),(0,cb.jsx)("button",{onClick:()=>a(!0),className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 px-4 py-2 rounded-lg font-semibold transition-all duration-200",children:"\ud83d\udccb Bulk Add Riders"}),h.size>0&&(0,cb.jsxs)("button",{onClick:async()=>{if(0!==h.size){if(confirm("Remove ".concat(h.size," selected riders from automation?")))try{let e=0;for(const t of h){await b(t)&&e++}w("success","\u2705 ".concat(e," riders removed from automation! They will no longer be fetched by GitHub Actions.")),f(new Set)}catch(n){w("error","Failed to remove riders from automation")}}else w("error","Please select riders to remove")},className:"bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 px-4 py-2 rounded-lg font-semibold transition-all duration-200",children:["\ud83d\uddd1\ufe0f Remove Selected (",h.size,")"]})]}),r&&(0,cb.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,cb.jsxs)("div",{className:"bg-slate-800 border border-cyan-500/30 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,cb.jsx)("h3",{className:"text-xl font-bold mb-4 text-cyan-400",children:"Add New Rider"}),(0,cb.jsxs)("div",{className:"space-y-4",children:[(0,cb.jsxs)("div",{children:[(0,cb.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rider ID *"}),(0,cb.jsx)("input",{type:"text",value:l.rider_id,onChange:e=>c(Ht(Ht({},l),{},{rider_id:e.target.value})),placeholder:"e.g., 150437",className:"w-full px-3 py-2 bg-black/40 border border-gray-600 rounded-lg text-white placeholder-gray-400"})]}),(0,cb.jsxs)("div",{children:[(0,cb.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name (optional)"}),(0,cb.jsx)("input",{type:"text",value:l.name,onChange:e=>c(Ht(Ht({},l),{},{name:e.target.value})),placeholder:"Rider name",className:"w-full px-3 py-2 bg-black/40 border border-gray-600 rounded-lg text-white placeholder-gray-400"})]})]}),(0,cb.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,cb.jsx)("button",{onClick:()=>s(!1),className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"Cancel"}),(0,cb.jsx)("button",{onClick:async()=>{if(!l.rider_id.trim())return void w("error","Rider ID is required");const e=l.rider_id.trim();if(g.includes(e))w("error","Rider ".concat(e," is already in the automation system"));else try{if(await v(e)){w("success","\u2705 Rider ".concat(e," added to automation! Next GitHub Actions sync will fetch their data.")),c({rider_id:"",name:""}),s(!1);try{const t=await fetch("http://localhost:8080/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"single",rider_id:e})});t.ok?console.log("Hybrid API refresh triggered for new rider:",e):console.warn("Failed to trigger hybrid API refresh:",t.status)}catch(t){console.warn("Error calling hybrid API refresh:",t)}}else w("error","Failed to add rider to automation system")}catch(n){w("error","Failed to add rider to automation")}},className:"bg-cyan-500 hover:bg-cyan-600 px-4 py-2 rounded-lg font-semibold transition-colors",children:"Add Rider"})]})]})}),o&&(0,cb.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,cb.jsxs)("div",{className:"bg-slate-800 border border-cyan-500/30 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,cb.jsx)("h3",{className:"text-xl font-bold mb-4 text-cyan-400",children:"Bulk Add Riders"}),(0,cb.jsx)("div",{className:"space-y-4",children:(0,cb.jsxs)("div",{children:[(0,cb.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rider IDs (one per line)"}),(0,cb.jsx)("textarea",{value:u,onChange:e=>d(e.target.value),placeholder:"150437\n832234\n1021073",rows:6,className:"w-full px-3 py-2 bg-black/40 border border-gray-600 rounded-lg text-white placeholder-gray-400 font-mono text-sm"}),(0,cb.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Enter one Rider ID per line. Names will be fetched automatically."})]})}),(0,cb.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,cb.jsx)("button",{onClick:()=>a(!1),className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"Cancel"}),(0,cb.jsx)("button",{onClick:async()=>{const e=u.split("\n").map(e=>e.trim()).filter(e=>e.length>0);if(0!==e.length)try{let n=0,r=0;for(const t of e){if(g.includes(t)){r++;continue}await v(t)&&n++}let i="\u2705 ".concat(n," riders added to automation!");r>0&&(i+=" (".concat(r," already existed)")),i+=" Next GitHub Actions sync will fetch their data.",w("success",i),d(""),a(!1);try{const t=await fetch("http://localhost:8080/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"bulk",rider_ids:e})});t.ok?console.log("Hybrid API bulk refresh triggered for new riders:",e):console.warn("Failed to trigger hybrid API bulk refresh:",t.status)}catch(t){console.warn("Error calling hybrid API bulk refresh:",t)}}catch(n){w("error","Failed to add riders to automation")}else w("error","Please enter at least one Rider ID")},className:"bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg font-semibold transition-colors",children:"Add Riders"})]})]})}),(0,cb.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg",children:[(0,cb.jsx)("div",{className:"p-4 border-b border-cyan-500/30",children:(0,cb.jsxs)("div",{className:"flex justify-between items-center",children:[(0,cb.jsxs)("h2",{className:"text-xl font-semibold text-cyan-400",children:["Current Riders (",e.length,")"]}),(0,cb.jsxs)("div",{className:"flex gap-2",children:[(0,cb.jsx)("button",{onClick:x,className:"text-sm px-3 py-1 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-500/50 rounded text-blue-300 transition-colors",children:"Select All"}),(0,cb.jsx)("button",{onClick:_,className:"text-sm px-3 py-1 bg-gray-500/20 hover:bg-gray-500/30 border border-gray-500/50 rounded text-gray-300 transition-colors",children:"Clear Selection"})]})]})}),(0,cb.jsx)("div",{className:"overflow-x-auto",children:(0,cb.jsxs)("table",{className:"w-full",children:[(0,cb.jsx)("thead",{className:"bg-black/40",children:(0,cb.jsxs)("tr",{children:[(0,cb.jsx)("th",{className:"p-3 text-left",children:(0,cb.jsx)("input",{type:"checkbox",checked:h.size===e.length&&e.length>0,onChange:h.size===e.length?_:x,className:"rounded"})}),(0,cb.jsx)("th",{className:"p-3 text-left text-cyan-400 font-mono",children:"ID"}),(0,cb.jsx)("th",{className:"p-3 text-left text-cyan-400",children:"Name"}),(0,cb.jsx)("th",{className:"p-3 text-left text-cyan-400",children:"Category"}),(0,cb.jsx)("th",{className:"p-3 text-left text-cyan-400",children:"vELO"}),(0,cb.jsx)("th",{className:"p-3 text-left text-cyan-400",children:"Automation"})]})}),(0,cb.jsx)("tbody",{children:e.map(e=>(0,cb.jsxs)("tr",{className:"border-t border-gray-700 hover:bg-cyan-500/5",children:[(0,cb.jsx)("td",{className:"p-3",children:(0,cb.jsx)("input",{type:"checkbox",checked:h.has(e.id),onChange:()=>(e=>{const t=new Set(h);t.has(e)?t.delete(e):t.add(e),f(t)})(e.id),className:"rounded"})}),(0,cb.jsx)("td",{className:"p-3 font-mono text-gray-300",children:e.rider_id}),(0,cb.jsx)("td",{className:"p-3 text-white",children:e.name}),(0,cb.jsx)("td",{className:"p-3",children:(0,cb.jsx)("span",{className:"px-2 py-1 rounded text-xs font-bold bg-red-500 text-white",children:e.zpCategory})}),(0,cb.jsx)("td",{className:"p-3 font-mono text-cyan-300",children:Math.round(e.velo_current)}),(0,cb.jsx)("td",{className:"p-3",children:g.includes(e.rider_id)?(0,cb.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-green-500/20 text-green-400 border border-green-500/30",children:"\ud83e\udd16 Active"}):(0,cb.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-gray-500/20 text-gray-400 border border-gray-500/30",children:"\u23f8\ufe0f Manual"})})]},e.id))})]})})]}),t&&(0,cb.jsxs)("div",{className:"text-center py-8",children:[(0,cb.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-400"}),(0,cb.jsx)("p",{className:"mt-2 text-gray-300",children:"Loading riders..."})]}),n&&(0,cb.jsxs)("div",{className:"text-center py-8",children:[(0,cb.jsxs)("p",{className:"text-red-400",children:["Error loading riders: ",n]}),(0,cb.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-2 px-4 py-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/50 rounded text-red-300 transition-colors",children:"Retry"})]})]})})]})},xb=e=>{let{riders:t,onFiltersChange:n}=e;const[r,s]=(0,i.useState)(!1),[o,a]=(0,i.useState)({search:"",category:"All",veloMin:0,veloMax:3e3,veloTier:"All",ftpMin:0,ftpMax:600,weightMin:40,weightMax:150,hasRaceData:null}),l=i.useMemo(()=>0===t.length?null:{velo:{min:Math.min(...t.map(e=>e.velo_current||0)),max:Math.max(...t.map(e=>e.velo_current||0))},ftp:{min:Math.min(...t.map(e=>e.zpFTP||0)),max:Math.max(...t.map(e=>e.zpFTP||0))},weight:{min:Math.min(...t.map(e=>e.weight||0)),max:Math.max(...t.map(e=>e.weight||0))}},[t]);(0,i.useEffect)(()=>{l&&a(e=>Ht(Ht({},e),{},{veloMin:Math.floor(l.velo.min),veloMax:Math.ceil(l.velo.max),veloTier:"All",ftpMin:Math.floor(l.ftp.min),ftpMax:Math.ceil(l.ftp.max),weightMin:Math.floor(l.weight.min),weightMax:Math.ceil(l.weight.max)}))},[l]),(0,i.useEffect)(()=>{n(o)},[o,n]);const c=(e,t)=>{a(n=>Ht(Ht({},n),{},{[e]:t}))},u=(()=>{const e=new Set;let n={total:0,withCategory:0,categories:{}};t.forEach(t=>{n.total++;const r=[t.velo_category_current,t.velo_category_max30,t.velo_category_max90];let i=!1;r.forEach(t=>{t&&"Unranked"!==t&&"N/A"!==t&&(e.add(t),i=!0,n.categories[t]=(n.categories[t]||0)+1)}),i&&n.withCategory++});const r=["Diamond","Ruby","Emerald","Sapphire","Amethyst","Platinum","Gold","Silver","Bronze"];return console.log("\ud83c\udfaf vELO Tier Analysis:"),console.log("  Total riders: ".concat(n.total)),console.log("  Riders with categories: ".concat(n.withCategory)),console.log("  Category counts:",n.categories),console.log("  Found in data: ".concat(Array.from(e).sort().join(", ")," (").concat(e.size,"/9)")),console.log("  Showing all tiers: ".concat(r.join(", "))),["All",...r]})();return(0,cb.jsxs)("div",{className:"bg-slate-900/80 border border-cyan-500/30 rounded-lg backdrop-blur-sm shadow-lg shadow-cyan-500/10 mb-6 advanced-filters",children:[(0,cb.jsxs)("div",{className:"p-4 cursor-pointer flex items-center justify-between hover:bg-cyan-500/10 transition-colors duration-200",onClick:()=>s(!r),children:[(0,cb.jsx)("h3",{className:"font-bold text-cyan-400 font-mono",children:"\ud83d\udd0d Advanced Filters"}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("span",{className:"text-gray-400 font-mono text-sm",children:Object.values(o).some(e=>"string"===typeof e&&""!==e&&"All"!==e||"boolean"===typeof e&&null!==e||"number"===typeof e&&l&&e!==Math.floor(l.velo.min)&&e!==Math.ceil(l.velo.max)&&e!==Math.floor(l.ftp.min)&&e!==Math.ceil(l.ftp.max)&&e!==Math.floor(l.weight.min)&&e!==Math.ceil(l.weight.max))&&"Active"}),(0,cb.jsx)("span",{className:"transform transition-transform duration-200 text-cyan-400 ".concat(r?"rotate-180":""),children:"\u25bc"})]})]}),r&&(0,cb.jsxs)("div",{className:"p-4 pt-0 border-t border-cyan-500/30",children:[(0,cb.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,cb.jsxs)("div",{className:"space-y-3",children:[(0,cb.jsxs)("div",{children:[(0,cb.jsx)("label",{className:"block text-sm font-medium text-cyan-400 mb-1 font-mono",children:"Search"}),(0,cb.jsx)("input",{type:"text",value:o.search,onChange:e=>c("search",e.target.value),placeholder:"Name or Rider ID...",className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/30 rounded text-white placeholder-gray-500 focus:outline-none focus:border-cyan-400 font-mono"})]}),(0,cb.jsxs)("div",{children:[(0,cb.jsx)("label",{className:"block text-sm font-medium text-cyan-400 mb-1 font-mono",children:"Category"}),(0,cb.jsx)("select",{value:o.category,onChange:e=>c("category",e.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/30 rounded text-white focus:outline-none focus:border-cyan-400 font-mono",children:["All","A+","A","B","C","D"].map(e=>(0,cb.jsx)("option",{value:e,children:e},e))})]})]}),(0,cb.jsxs)("div",{className:"space-y-3",children:[(0,cb.jsxs)("div",{children:[(0,cb.jsxs)("label",{className:"block text-sm font-medium text-cyan-400 mb-1 font-mono",children:["vELO Range: ",o.veloMin," - ",o.veloMax]}),(0,cb.jsxs)("div",{className:"space-y-2",children:[(0,cb.jsx)("input",{type:"range",min:(null===l||void 0===l?void 0:l.velo.min)||0,max:(null===l||void 0===l?void 0:l.velo.max)||3e3,value:o.veloMin,onChange:e=>c("veloMin",parseInt(e.target.value)),className:"w-full accent-cyan-400"}),(0,cb.jsx)("input",{type:"range",min:(null===l||void 0===l?void 0:l.velo.min)||0,max:(null===l||void 0===l?void 0:l.velo.max)||3e3,value:o.veloMax,onChange:e=>c("veloMax",parseInt(e.target.value)),className:"w-full accent-cyan-400"})]})]}),(0,cb.jsxs)("div",{children:[(0,cb.jsx)("label",{className:"block text-sm font-medium text-cyan-400 mb-1 font-mono",children:"vELO Tier"}),(0,cb.jsx)("select",{value:o.veloTier,onChange:e=>c("veloTier",e.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/30 rounded text-white focus:outline-none focus:border-cyan-400 font-mono",style:{maxHeight:"none"},size:1,children:u.map((e,t)=>{const n={Diamond:1,Ruby:2,Emerald:3,Sapphire:4,Amethyst:5,Platinum:6,Gold:7,Silver:8,Bronze:9}[e];return(0,cb.jsx)("option",{value:e,children:"All"===e?"All Tiers":"".concat(n,". ").concat(e)},e)})})]}),(0,cb.jsxs)("div",{children:[(0,cb.jsx)("label",{className:"block text-sm font-medium text-cyan-400 mb-1 font-mono",children:"Race Data"}),(0,cb.jsxs)("select",{value:null===o.hasRaceData?"all":o.hasRaceData.toString(),onChange:e=>c("hasRaceData","all"===e.target.value?null:"true"===e.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/30 rounded text-white focus:outline-none focus:border-cyan-400 font-mono",children:[(0,cb.jsx)("option",{value:"all",children:"All Riders"}),(0,cb.jsx)("option",{value:"true",children:"With Race Data"}),(0,cb.jsx)("option",{value:"false",children:"No Race Data"})]})]})]}),(0,cb.jsxs)("div",{className:"space-y-3",children:[(0,cb.jsxs)("div",{children:[(0,cb.jsxs)("label",{className:"block text-sm font-medium text-cyan-400 mb-1 font-mono",children:["FTP Range: ",o.ftpMin," - ",o.ftpMax,"W"]}),(0,cb.jsxs)("div",{className:"space-y-2",children:[(0,cb.jsx)("input",{type:"range",min:(null===l||void 0===l?void 0:l.ftp.min)||0,max:(null===l||void 0===l?void 0:l.ftp.max)||600,value:o.ftpMin,onChange:e=>c("ftpMin",parseInt(e.target.value)),className:"w-full accent-cyan-400"}),(0,cb.jsx)("input",{type:"range",min:(null===l||void 0===l?void 0:l.ftp.min)||0,max:(null===l||void 0===l?void 0:l.ftp.max)||600,value:o.ftpMax,onChange:e=>c("ftpMax",parseInt(e.target.value)),className:"w-full accent-cyan-400"})]})]}),(0,cb.jsxs)("div",{children:[(0,cb.jsxs)("label",{className:"block text-sm font-medium text-cyan-400 mb-1 font-mono",children:["Weight Range: ",o.weightMin," - ",o.weightMax,"kg"]}),(0,cb.jsxs)("div",{className:"space-y-2",children:[(0,cb.jsx)("input",{type:"range",min:(null===l||void 0===l?void 0:l.weight.min)||40,max:(null===l||void 0===l?void 0:l.weight.max)||150,value:o.weightMin,onChange:e=>c("weightMin",parseInt(e.target.value)),className:"w-full accent-cyan-400"}),(0,cb.jsx)("input",{type:"range",min:(null===l||void 0===l?void 0:l.weight.min)||40,max:(null===l||void 0===l?void 0:l.weight.max)||150,value:o.weightMax,onChange:e=>c("weightMax",parseInt(e.target.value)),className:"w-full accent-cyan-400"})]})]})]})]}),(0,cb.jsx)("div",{className:"mt-4 pt-3 border-t border-cyan-500/30",children:(0,cb.jsx)("button",{onClick:()=>{l&&a({search:"",category:"All",veloMin:Math.floor(l.velo.min),veloMax:Math.ceil(l.velo.max),veloTier:"All",ftpMin:Math.floor(l.ftp.min),ftpMax:Math.ceil(l.ftp.max),weightMin:Math.floor(l.weight.min),weightMax:Math.ceil(l.weight.max),hasRaceData:null})},className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-mono text-sm transition-colors duration-200",children:"\ud83d\udd04 Reset Filters"})})]})]})},_b=e=>{let{riders:t,filteredRiders:n}=e;const[r,s]=(0,i.useState)(!1),o=async(e,r)=>{s(!0);const i="all"===r?t:n,o=(new Date).toISOString().split("T")[0],a="zwift_riders_".concat(r,"_").concat(o,".").concat(e);try{"csv"===e?((e,t)=>{const n=[["Rider ID","Name","ZP Category","FTP","Weight (kg)","Current vELO","90-day Max vELO","Finishes","Podiums","Wins","DNFs","5s W/kg","15s W/kg","30s W/kg","1m W/kg","2m W/kg","5m W/kg","20m W/kg","ZRL Score"].join(","),...e.map(e=>{var t,n,r,i,s,o,a;return[e.rider_id,'"'.concat(e.name,'"'),e.zpCategory,e.zpFTP,e.weight,Math.round(e.velo_current),Math.round(e.velo_max90),e.finishes,e.podiums,e.wins,e.dnfs,(null===(t=e.wkg5)||void 0===t?void 0:t.toFixed(2))||"0",(null===(n=e.wkg15)||void 0===n?void 0:n.toFixed(2))||"0",(null===(r=e.wkg30)||void 0===r?void 0:r.toFixed(2))||"0",(null===(i=e.wkg60)||void 0===i?void 0:i.toFixed(2))||"0",(null===(s=e.wkg120)||void 0===s?void 0:s.toFixed(2))||"0",(null===(o=e.wkg300)||void 0===o?void 0:o.toFixed(2))||"0",(null===(a=e.wkg1200)||void 0===a?void 0:a.toFixed(2))||"0",e.zrCS||"0"].join(",")})].join("\n"),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),s=URL.createObjectURL(r);i.setAttribute("href",s),i.setAttribute("download",t),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)})(i,a):((e,t)=>{const n=JSON.stringify(e,null,2),r=new Blob([n],{type:"application/json;charset=utf-8;"}),i=document.createElement("a"),s=URL.createObjectURL(r);i.setAttribute("href",s),i.setAttribute("download",t),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)})(i,a)}finally{s(!1)}};return(0,cb.jsxs)("div",{className:"bg-slate-900/80 border border-cyan-500/30 p-4 rounded-lg backdrop-blur-sm shadow-lg shadow-cyan-500/10",children:[(0,cb.jsx)("h3",{className:"font-bold mb-3 text-cyan-400 font-mono",children:"\ud83d\udce4 Export Data"}),(0,cb.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,cb.jsxs)("button",{onClick:()=>o("csv","all"),disabled:r||0===t.length,className:"px-3 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-600 text-white rounded font-mono text-sm transition-colors duration-200",children:["\ud83d\udcca CSV - All Riders (",t.length,")"]}),(0,cb.jsxs)("button",{onClick:()=>o("csv","filtered"),disabled:r||0===n.length,className:"px-3 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-600 text-white rounded font-mono text-sm transition-colors duration-200",children:["\ud83d\udcca CSV - Filtered (",n.length,")"]}),(0,cb.jsxs)("button",{onClick:()=>o("json","all"),disabled:r||0===t.length,className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded font-mono text-sm transition-colors duration-200",children:["\ud83d\udd27 JSON - All Riders (",t.length,")"]}),(0,cb.jsxs)("button",{onClick:()=>o("json","filtered"),disabled:r||0===n.length,className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded font-mono text-sm transition-colors duration-200",children:["\ud83d\udd27 JSON - Filtered (",n.length,")"]})]}),r&&(0,cb.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-cyan-400 font-mono text-sm",children:[(0,cb.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-cyan-400 border-t-transparent rounded-full"}),"Exporting data..."]}),(0,cb.jsx)("p",{className:"mt-3 text-gray-400 text-xs font-mono",children:"\ud83d\udca1 Export your data for backup or external analysis"})]})},Sb=e=>{let{rider:t,isOpen:n,onClose:r}=e;if(!n||!t)return null;return(0,cb.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,cb.jsxs)("div",{className:"bg-slate-900 border border-cyan-500/30 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto shadow-2xl",children:[(0,cb.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-cyan-500/30",children:[(0,cb.jsxs)("div",{className:"flex items-center gap-4",children:[(0,cb.jsx)("div",{className:"px-3 py-1 rounded font-bold font-mono ".concat((e=>{switch(e){case"A+":return"bg-black text-white";case"A":return"bg-red-500 text-white";case"B":return"bg-green-300 text-black";case"C":return"bg-blue-300 text-black";case"D":return"bg-yellow-300 text-black";default:return"bg-gray-100 text-black"}})(t.zpCategory)),children:t.zpCategory}),(0,cb.jsxs)("div",{children:[(0,cb.jsx)("h2",{className:"text-2xl font-bold text-white font-mono",children:t.name}),(0,cb.jsxs)("p",{className:"text-cyan-400 font-mono",children:["Rider ID: ",t.rider_id]})]})]}),(0,cb.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors duration-200 text-2xl",children:"\u2715"})]}),(0,cb.jsxs)("div",{className:"p-6 space-y-6",children:[(0,cb.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,cb.jsxs)("div",{className:"bg-black/40 p-4 rounded-lg border border-cyan-500/20",children:[(0,cb.jsx)("h3",{className:"text-cyan-400 font-bold mb-3 font-mono",children:"\ud83c\udfc6 Performance"}),(0,cb.jsxs)("div",{className:"space-y-2",children:[(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"Current vELO:"}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("span",{className:"text-white font-bold",children:Math.round(t.velo_current)}),(0,cb.jsx)("span",{className:"px-2 py-1 rounded text-xs font-bold ".concat((s=t.velo_current,s>=2200?"bg-sky-300 text-black":s>=1900?"bg-red-800 text-white":s>=1650?"bg-emerald-500 text-white":s>=1450?"bg-blue-600 text-white":s>=1300?"bg-purple-400 text-white":s>=1150?"bg-gray-300 text-black":s>=1e3?"bg-yellow-400 text-black":s>=850?"bg-gray-400 text-white":s>=650?"bg-amber-600 text-white":"bg-amber-800 text-white")),children:(e=>e>=2200?"Diamond":e>=1900?"Ruby":e>=1650?"Emerald":e>=1450?"Sapphire":e>=1300?"Amethyst":e>=1150?"Platinum":e>=1e3?"Gold":e>=850?"Silver":e>=650?"Bronze":"Copper")(t.velo_current)})]})]}),(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"90-day Max vELO:"}),(0,cb.jsx)("span",{className:"text-white font-bold",children:Math.round(t.velo_max90)})]}),(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"FTP:"}),(0,cb.jsxs)("span",{className:"text-white font-bold",children:[t.zpFTP,"W"]})]}),(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"Weight:"}),(0,cb.jsxs)("span",{className:"text-white font-bold",children:[t.weight,"kg"]})]}),(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"W/kg (FTP):"}),(0,cb.jsx)("span",{className:"text-white font-bold",children:(i=t.zpFTP,t.weight>0?i/t.weight:0).toFixed(2)})]})]})]}),(0,cb.jsxs)("div",{className:"bg-black/40 p-4 rounded-lg border border-cyan-500/20",children:[(0,cb.jsx)("h3",{className:"text-cyan-400 font-bold mb-3 font-mono",children:"\ud83c\udfc1 Race History"}),(0,cb.jsxs)("div",{className:"space-y-2",children:[(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"Finishes:"}),(0,cb.jsx)("span",{className:"text-white font-bold",children:t.finishes})]}),(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"Podiums:"}),(0,cb.jsx)("span",{className:"text-yellow-400 font-bold",children:t.podiums})]}),(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"Wins:"}),(0,cb.jsx)("span",{className:"text-green-400 font-bold",children:t.wins})]}),(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"DNFs:"}),(0,cb.jsx)("span",{className:"text-red-400 font-bold",children:t.dnfs})]}),(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"Success Rate:"}),(0,cb.jsxs)("span",{className:"text-white font-bold",children:[t.finishes>0?((t.finishes-t.dnfs)/t.finishes*100).toFixed(1):0,"%"]})]})]})]}),(0,cb.jsxs)("div",{className:"bg-black/40 p-4 rounded-lg border border-cyan-500/20",children:[(0,cb.jsx)("h3",{className:"text-cyan-400 font-bold mb-3 font-mono",children:"\ud83d\udcca Additional"}),(0,cb.jsxs)("div",{className:"space-y-2",children:[(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"ZRL Score:"}),(0,cb.jsx)("span",{className:"text-white font-bold",children:t.zrCS||"N/A"})]}),(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"Win Rate:"}),(0,cb.jsxs)("span",{className:"text-white font-bold",children:[t.finishes>0?(t.wins/t.finishes*100).toFixed(1):0,"%"]})]}),(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"Podium Rate:"}),(0,cb.jsxs)("span",{className:"text-white font-bold",children:[t.finishes>0?(t.podiums/t.finishes*100).toFixed(1):0,"%"]})]})]})]})]}),(0,cb.jsxs)("div",{className:"bg-black/40 p-4 rounded-lg border border-cyan-500/20",children:[(0,cb.jsx)("h3",{className:"text-cyan-400 font-bold mb-4 font-mono",children:"\u26a1 Power Intervals (W/kg)"}),(0,cb.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[{key:"wkg5",label:"5s",value:t.wkg5},{key:"wkg15",label:"15s",value:t.wkg15},{key:"wkg30",label:"30s",value:t.wkg30},{key:"wkg60",label:"1m",value:t.wkg60},{key:"wkg120",label:"2m",value:t.wkg120},{key:"wkg300",label:"5m",value:t.wkg300},{key:"wkg1200",label:"20m",value:t.wkg1200}].map(e=>(0,cb.jsxs)("div",{className:"text-center",children:[(0,cb.jsx)("div",{className:"text-orange-400 font-mono text-sm font-bold",children:e.label}),(0,cb.jsx)("div",{className:"text-white font-bold text-lg font-mono",children:e.value?e.value.toFixed(2):"N/A"}),(0,cb.jsx)("div",{className:"text-gray-400 text-xs font-mono",children:e.value&&t.weight?"".concat(Math.round(e.value*t.weight),"W"):""})]},e.key))})]}),(0,cb.jsxs)("div",{className:"bg-black/40 p-4 rounded-lg border border-cyan-500/20",children:[(0,cb.jsx)("h3",{className:"text-cyan-400 font-bold mb-4 font-mono",children:"\ud83d\udcc8 vELO Analysis"}),(0,cb.jsxs)("div",{className:"space-y-3",children:[(0,cb.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"Current vs 30-day Max:"}),(0,cb.jsx)("span",{className:"font-bold ".concat(t.velo_current>=t.velo_max30?"text-green-400":"text-orange-400"),children:t.velo_current>=t.velo_max30?"\ud83d\udcc8 At Peak":"\ud83d\udcca ".concat(Math.round(t.velo_max30-t.velo_current)," below peak")})]}),(0,cb.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cb.jsx)("span",{className:"text-gray-300",children:"Current vs 90-day Max:"}),(0,cb.jsx)("span",{className:"font-bold ".concat(t.velo_current>=t.velo_max90?"text-green-400":"text-orange-400"),children:t.velo_current>=t.velo_max90?"\ud83d\udcc8 At Peak":"\ud83d\udcca ".concat(Math.round(t.velo_max90-t.velo_current)," below peak")})]})]})]})]}),(0,cb.jsx)("div",{className:"p-6 border-t border-cyan-500/30 flex justify-end",children:(0,cb.jsx)("button",{onClick:r,className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded font-mono transition-colors duration-200",children:"Close"})})]})});var i,s},Eb=e=>e>=2200?"bg-sky-300":e>=1900?"bg-red-800 text-white":e>=1650?"bg-emerald-500":e>=1450?"bg-blue-600 text-white":e>=1300?"bg-purple-400":e>=1150?"bg-gray-300":e>=1e3?"bg-yellow-400":e>=850?"bg-gray-400":e>=650?"bg-amber-600":"bg-amber-800 text-white",kb=e=>{switch(e){case"A+":return"bg-black text-white";case"A":return"bg-red-500 text-white";case"B":return"bg-green-300";case"C":return"bg-blue-300";case"D":return"bg-yellow-300";default:return"bg-gray-100"}},Nb=(e,t)=>{if(!e||!t)return"text-orange-300";const n=e/t*100;return n>=100?"bg-yellow-400/20 border border-yellow-400/50 text-yellow-300":n>=95?"bg-gray-400/20 border border-gray-400/50 text-gray-200":n>=90?"bg-amber-600/20 border border-amber-600/50 text-amber-300":"text-orange-300"},Cb=()=>{const{riders:e,loading:t,error:n}=yb(),[r,s]=(0,i.useState)(""),[o,a]=(0,i.useState)("All"),[l,c]=(0,i.useState)("velo_current"),[u,d]=(0,i.useState)("desc"),[h,f]=(0,i.useState)(null),[p,m]=(0,i.useState)(!1),[g,y]=(0,i.useState)(null),v=(0,i.useMemo)(()=>{const t={};return["wkg5","wkg15","wkg30","wkg60","wkg120","wkg300","wkg1200"].forEach(n=>{t[n]=Math.max(...e.map(e=>e[n]||0))}),t},[e]),b=(0,i.useMemo)(()=>{let t=g?(n=e,g?n.filter(e=>{var t,n;const r=!g.search||(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(g.search.toLowerCase()))||(null===(n=e.rider_id)||void 0===n?void 0:n.includes(g.search)),i="All"===g.category||e.zpCategory===g.category,s=e.velo_current>=g.veloMin&&e.velo_current<=g.veloMax,o="All"===g.veloTier||(e=>{if(e.velo_category_current)return e.velo_category_current;const t=e.velo_current;return t>=2200?"Diamond":t>=1900?"Ruby":t>=1650?"Emerald":t>=1450?"Sapphire":t>=1300?"Amethyst":t>=1150?"Platinum":t>=1e3?"Gold":t>=850?"Silver":t>=650?"Bronze":"Unranked"})(e)===g.veloTier,a=e.zpFTP>=g.ftpMin&&e.zpFTP<=g.ftpMax,l=e.weight>=g.weightMin&&e.weight<=g.weightMax,c=e.finishes+e.wins+e.podiums+e.dnfs>0,u=null===g.hasRaceData||c===g.hasRaceData;return r&&i&&s&&o&&a&&l&&u}):n):e.filter(e=>{var t,n;const i=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(r.toLowerCase()))||(null===(n=e.rider_id)||void 0===n?void 0:n.includes(r)),s="All"===o||e.zpCategory===o;return i&&s});var n;return t.sort((e,t)=>{const n=e[l],r=t[l];return null===n||void 0===n?1:null===r||void 0===r?-1:"desc"===u?r>n?1:-1:n>r?1:-1}),t},[e,r,o,l,u,g]),w=e=>{l===e?d("desc"===u?"asc":"desc"):(c(e),d("desc"))},x=e=>l!==e?"\u2195\ufe0f":"desc"===u?"\u2193":"\u2191";return(0,cb.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[(0,cb.jsx)(bb,{}),(0,cb.jsxs)("div",{className:"p-6",children:[(0,cb.jsxs)("div",{className:"mb-6",children:[(0,cb.jsx)("h1",{className:"text-3xl font-bold text-transparent bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text mb-4 font-mono",children:"\ud83c\udfc1 RACING DATA MATRIX"}),(0,cb.jsx)(xb,{riders:e,onFiltersChange:e=>{y(e)}}),!g&&(0,cb.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4 bg-black/40 backdrop-blur-sm border border-cyan-500/30 p-4 rounded-lg",children:[(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("label",{className:"text-sm font-medium text-cyan-400 font-mono",children:"SEARCH:"}),(0,cb.jsx)("input",{type:"text",placeholder:"Name or Rider ID...",value:r,onChange:e=>s(e.target.value),className:"px-3 py-2 bg-black/60 border border-cyan-500/50 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("label",{className:"text-sm font-medium text-cyan-400 font-mono",children:"CATEGORY:"}),(0,cb.jsxs)("select",{value:o,onChange:e=>a(e.target.value),className:"px-3 py-2 bg-black/60 border border-cyan-500/50 rounded text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",children:[(0,cb.jsx)("option",{value:"All",children:"All"}),(0,cb.jsx)("option",{value:"A+",children:"A+"}),(0,cb.jsx)("option",{value:"A",children:"A"}),(0,cb.jsx)("option",{value:"B",children:"B"}),(0,cb.jsx)("option",{value:"C",children:"C"}),(0,cb.jsx)("option",{value:"D",children:"D"})]})]})]}),(0,cb.jsxs)("div",{className:"text-sm text-cyan-300 mb-4 bg-black/40 backdrop-blur-sm border border-cyan-500/30 p-3 rounded font-mono",children:["\ud83d\udcca DISPLAYING ",b.length," OF ",e.length," RIDERS \u2022 SORTED BY ",l.toUpperCase()," ","desc"===u?"(HIGH \u2192 LOW)":"(LOW \u2192 HIGH)"]})]}),(0,cb.jsx)("div",{className:"overflow-x-auto bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg shadow-2xl shadow-cyan-500/20",children:(0,cb.jsxs)("table",{className:"min-w-full divide-y divide-cyan-500/30",children:[(0,cb.jsx)("thead",{className:"bg-black/60",children:(0,cb.jsxs)("tr",{children:[(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-cyan-400 uppercase tracking-wider cursor-pointer hover:bg-cyan-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("rider_id"),children:["RIDER ID ",x("rider_id")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-cyan-400 uppercase tracking-wider cursor-pointer hover:bg-cyan-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("rp"),children:["RP ",x("rp")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-cyan-400 uppercase tracking-wider cursor-pointer hover:bg-cyan-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("velo_current"),children:["vELO LIVE ",x("velo_current")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-cyan-400 uppercase tracking-wider cursor-pointer hover:bg-cyan-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("velo_max30"),children:["vELO 30D ",x("velo_max30")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-cyan-400 uppercase tracking-wider cursor-pointer hover:bg-cyan-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("name"),children:["RIDER NAME ",x("name")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-cyan-400 uppercase tracking-wider cursor-pointer hover:bg-cyan-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("zpCategory"),children:["CATEGORY ",x("zpCategory")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-cyan-400 uppercase tracking-wider cursor-pointer hover:bg-cyan-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("zpFTP"),children:["FTP ",x("zpFTP")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-cyan-400 uppercase tracking-wider cursor-pointer hover:bg-cyan-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("weight"),children:["WEIGHT ",x("weight")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-green-400 uppercase tracking-wider cursor-pointer hover:bg-green-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("finishes"),children:["FINISHES ",x("finishes")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-green-400 uppercase tracking-wider cursor-pointer hover:bg-green-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("wins"),children:["WINS ",x("wins")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-green-400 uppercase tracking-wider cursor-pointer hover:bg-green-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("podiums"),children:["PODIUMS ",x("podiums")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-green-400 uppercase tracking-wider cursor-pointer hover:bg-green-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("dnfs"),children:["DNFS ",x("dnfs")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-orange-400 uppercase tracking-wider cursor-pointer hover:bg-orange-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("wkg5"),children:["5S ",x("wkg5")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-orange-400 uppercase tracking-wider cursor-pointer hover:bg-orange-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("wkg15"),children:["15S ",x("wkg15")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-orange-400 uppercase tracking-wider cursor-pointer hover:bg-orange-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("wkg30"),children:["30S ",x("wkg30")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-orange-400 uppercase tracking-wider cursor-pointer hover:bg-orange-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("wkg60"),children:["1M ",x("wkg60")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-orange-400 uppercase tracking-wider cursor-pointer hover:bg-orange-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("wkg120"),children:["2M ",x("wkg120")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-orange-400 uppercase tracking-wider cursor-pointer hover:bg-orange-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("wkg300"),children:["5M ",x("wkg300")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-orange-400 uppercase tracking-wider cursor-pointer hover:bg-orange-500/20 border-r border-cyan-500/30 font-mono",onClick:()=>w("wkg1200"),children:["20M ",x("wkg1200")]}),(0,cb.jsxs)("th",{className:"px-3 py-3 text-left text-xs font-medium text-purple-400 uppercase tracking-wider cursor-pointer hover:bg-purple-500/20 font-mono",onClick:()=>w("zrCS"),children:["zrCS ",x("zrCS")]})]})}),(0,cb.jsx)("tbody",{className:"bg-black/20 divide-y divide-cyan-500/30",children:b.map((e,t)=>{var n,r,i,s,o,a,l;return(0,cb.jsxs)("tr",{className:"".concat(t%2===0?"bg-black/10":"bg-black/20"," hover:bg-cyan-500/10 border-l-2 border-transparent hover:border-l-cyan-400 transition-all duration-200"),children:[(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 text-gray-300 font-mono",children:e.rider_id}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 text-cyan-300 font-bold font-mono",children:Math.floor(e.rp)}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 ".concat(Eb(e.velo_current)," font-semibold text-white font-mono"),children:Math.floor(e.velo_current)}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 ".concat(Eb(e.velo_max30)," font-semibold text-white font-mono"),children:Math.floor(e.velo_max30)}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium border-r border-cyan-500/30 text-white cursor-pointer hover:text-cyan-400 hover:underline transition-colors duration-200",onClick:()=>(e=>{f(e),m(!0)})(e),children:e.name}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 ".concat(kb(e.zpCategory)," font-bold text-center text-white font-mono"),children:e.zpCategory}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 font-medium text-gray-300 font-mono",children:e.zpFTP}),(0,cb.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 font-medium text-gray-300 font-mono",children:[e.weight," kg"]}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 font-medium text-green-300 font-mono",children:e.finishes}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 font-medium text-green-300 font-mono",children:e.wins}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 font-medium text-green-300 font-mono",children:e.podiums}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 font-medium text-green-300 font-mono",children:e.dnfs}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 ".concat(Nb(e.wkg5,v.wkg5)," font-medium font-mono"),title:"".concat(e.w5,"W"),children:null===(n=e.wkg5)||void 0===n?void 0:n.toFixed(2)}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 ".concat(Nb(e.wkg15,v.wkg15)," font-medium font-mono"),title:"".concat(e.w15,"W"),children:null===(r=e.wkg15)||void 0===r?void 0:r.toFixed(2)}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 ".concat(Nb(e.wkg30,v.wkg30)," font-medium font-mono"),title:"".concat(e.w30,"W"),children:null===(i=e.wkg30)||void 0===i?void 0:i.toFixed(2)}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 ".concat(Nb(e.wkg60,v.wkg60)," font-medium font-mono"),title:"".concat(e.w60,"W"),children:null===(s=e.wkg60)||void 0===s?void 0:s.toFixed(2)}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 ".concat(Nb(e.wkg120,v.wkg120)," font-medium font-mono"),title:"".concat(e.w120,"W"),children:null===(o=e.wkg120)||void 0===o?void 0:o.toFixed(2)}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 ".concat(Nb(e.wkg300,v.wkg300)," font-medium font-mono"),title:"".concat(e.w300,"W"),children:null===(a=e.wkg300)||void 0===a?void 0:a.toFixed(2)}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm border-r border-cyan-500/30 ".concat(Nb(e.wkg1200,v.wkg1200)," font-medium font-mono"),title:"".concat(e.w1200,"W"),children:null===(l=e.wkg1200)||void 0===l?void 0:l.toFixed(2)}),(0,cb.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-purple-300 font-mono",children:Math.round(e.zrCS)})]},e.id)})})]})}),(0,cb.jsxs)("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-4 md:grid-cols-2 gap-6",children:[(0,cb.jsx)(_b,{riders:e,filteredRiders:b}),(0,cb.jsxs)("div",{className:"bg-slate-900/80 border border-cyan-500/30 p-4 rounded-lg backdrop-blur-sm shadow-lg shadow-cyan-500/10",children:[(0,cb.jsx)("h3",{className:"font-bold mb-3 text-cyan-400 font-mono",children:"\ud83c\udfc6 vELO Tiers"}),(0,cb.jsxs)("div",{className:"grid grid-cols-1 gap-1 text-sm",children:[(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-5 h-3 bg-sky-300 border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300 font-mono",children:"1. Diamond: 2200+"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-5 h-3 bg-red-800 border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300 font-mono",children:"2. Ruby: 1900-2199"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-5 h-3 bg-emerald-500 border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300 font-mono",children:"3. Emerald: 1650-1899"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-5 h-3 bg-blue-600 border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300 font-mono",children:"4. Sapphire: 1450-1649"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-5 h-3 bg-purple-500 border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300 font-mono",children:"5. Amethyst: 1300-1449"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-5 h-3 bg-slate-300 border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300 font-mono",children:"6. Platinum: 1150-1299"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-5 h-3 bg-yellow-500 border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300 font-mono",children:"7. Gold: 1000-1149"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-5 h-3 bg-gray-400 border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300 font-mono",children:"8. Silver: 850-999"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-5 h-3 bg-amber-700 border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300 font-mono",children:"9. Bronze: 650-849"})]})]})]}),(0,cb.jsxs)("div",{className:"bg-slate-900/80 border border-cyan-500/30 p-4 rounded-lg backdrop-blur-sm shadow-lg shadow-cyan-500/10",children:[(0,cb.jsx)("h3",{className:"font-bold mb-3 text-cyan-400 font-mono",children:"\ud83d\udeb4 ZP Categories"}),(0,cb.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-6 h-4 bg-black border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300",children:"A+"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-6 h-4 bg-red-500 border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300",children:"A"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-6 h-4 bg-green-300 border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300",children:"B"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-6 h-4 bg-blue-300 border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300",children:"C"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-6 h-4 bg-yellow-300 border border-cyan-500/50"}),(0,cb.jsx)("span",{className:"text-gray-300",children:"D"})]})]})]}),(0,cb.jsxs)("div",{className:"bg-slate-900/80 border border-cyan-500/30 p-4 rounded-lg backdrop-blur-sm shadow-lg shadow-cyan-500/10",children:[(0,cb.jsx)("h3",{className:"font-bold mb-3 text-cyan-400 font-mono",children:"\u26a1 Intervals Highlight"}),(0,cb.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-6 h-4 bg-yellow-400/20 border border-yellow-400/50"}),(0,cb.jsx)("span",{className:"text-gray-300",children:"Gold: 100% of max (Yellow text)"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-6 h-4 bg-gray-400/20 border border-gray-400/50"}),(0,cb.jsx)("span",{className:"text-gray-300",children:"Silver: 95-99% (Gray text)"})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cb.jsx)("div",{className:"w-6 h-4 bg-amber-600/20 border border-amber-600/50"}),(0,cb.jsx)("span",{className:"text-gray-300",children:"Bronze: 90-94% (Amber text)"})]})]})]})]}),(0,cb.jsx)(Sb,{rider:h,isOpen:p,onClose:()=>m(!1)})]})]})},Tb=()=>{const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(null),[s,o]=(0,i.useState)([]),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)([]);(0,i.useEffect)(()=>{const e=_m(mp(rb,"system","status"),e=>{e.exists()&&r(e.data())}),t=_m(pp(rb,"refresh_activity"),e=>{const t=e.docs.map(e=>Ht({id:e.id},e.data())).sort((e,t)=>{var n,r;return(null===(n=t.timestamp)||void 0===n?void 0:n.toMillis())-(null===(r=e.timestamp)||void 0===r?void 0:r.toMillis())}).slice(0,10);h(t)});return f(),()=>{e(),t()}},[]);const f=async()=>{try{const e=await vm(mp(rb,"system","priority_riders"));if(e.exists()){const t=e.data();o(t.rider_ids||[])}}catch(Ob){console.error("Failed to load priority riders:",Ob)}},p=async e=>{u(!0);try{await xm(mp(rb,"system","status"),{last_manual_trigger:new Date,manual_trigger_type:e,trigger_user:"admin"}),console.log("Triggering ".concat(e," refresh..."));const t=await fetch("http://localhost:8080/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e})});if(!t.ok)throw new Error("Failed to trigger refresh: ".concat(t.status));{const n=await t.json();console.log("".concat(e," refresh triggered successfully:"),n),alert("\u2705 ".concat(e," refresh started! Check the console for progress."))}}catch(Ob){console.error("Failed to trigger refresh:",Ob),alert("\u274c Error: ".concat(Ob instanceof Error?Ob.message:"Unknown error"))}finally{u(!1)}},m=async()=>{if(!a.trim())return;const e=[...s,a.trim()];try{await xm(mp(rb,"system","priority_riders"),{rider_ids:e,updated_at:new Date,updated_by:"admin"}),o(e),l("")}catch(Ob){console.error("Failed to add priority rider:",Ob)}},g=e=>{if(!e)return"Never";try{return(e.toDate?e.toDate():new Date(e)).toLocaleString()}catch(t){return"Invalid date"}};return(0,cb.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,cb.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"\ud83d\udd04 Hybrid API Refresh Control"}),(0,cb.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,cb.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,cb.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"\ud83d\udcca System Status"}),n?(0,cb.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{children:"Status:"}),(0,cb.jsx)("span",{className:"font-medium ".concat("online"===n.status?"text-green-600":"text-red-600"),children:n.status})]}),(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{children:"Data Status:"}),(0,cb.jsx)("span",{className:"font-medium ".concat((e=>{if(!e.last_updated)return"text-red-600";try{const t=e.last_updated.toDate?e.last_updated.toDate():new Date(e.last_updated),n=(Date.now()-t.getTime())/36e5;return n<2?"text-green-600":n<6?"text-yellow-600":"text-red-600"}catch(t){return"text-red-600"}})(n)),children:n.data_status})]}),(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{children:"Last Updated:"}),(0,cb.jsx)("span",{children:g(n.last_updated)})]}),(0,cb.jsxs)("div",{className:"flex justify-between",children:[(0,cb.jsx)("span",{children:"Method:"}),(0,cb.jsx)("span",{className:"font-mono text-xs bg-gray-200 px-2 py-1 rounded",children:n.refresh_method||"N/A"})]}),n.api_efficiency&&(0,cb.jsxs)("div",{className:"pt-2 border-t",children:[(0,cb.jsxs)("p",{className:"text-xs text-gray-600",children:["\ud83d\udca1 ",n.api_efficiency]}),n.time_saved_minutes&&(0,cb.jsxs)("p",{className:"text-xs text-green-600",children:["\u23f1\ufe0f Saved ",n.time_saved_minutes]})]})]}):(0,cb.jsx)("p",{className:"text-gray-500",children:"Loading system status..."})]}),(0,cb.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,cb.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"\u26a1 Refresh Options"}),(0,cb.jsxs)("div",{className:"space-y-3",children:[(0,cb.jsx)("button",{onClick:()=>p("bulk"),disabled:c,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded text-sm font-medium transition-colors",children:"\ud83d\ude80 Bulk Refresh All (POST)"}),(0,cb.jsx)("button",{onClick:()=>p("priority"),disabled:c,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-2 rounded text-sm font-medium transition-colors",children:"\ud83c\udfaf Priority Riders (GET)"}),(0,cb.jsx)("button",{onClick:()=>p("smart"),disabled:c,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-2 rounded text-sm font-medium transition-colors",children:"\ud83e\udde0 Smart Refresh"})]}),(0,cb.jsxs)("div",{className:"mt-4 p-3 bg-white rounded border text-xs",children:[(0,cb.jsxs)("p",{children:[(0,cb.jsx)("strong",{children:"Bulk (POST):"})," All 63 riders in 1 call (~30s)"]}),(0,cb.jsxs)("p",{children:[(0,cb.jsx)("strong",{children:"Priority (GET):"})," Selected riders individually"]}),(0,cb.jsxs)("p",{children:[(0,cb.jsx)("strong",{children:"Smart:"})," Decides based on data age & availability"]})]})]})]}),(0,cb.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg mb-6",children:[(0,cb.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"\ud83c\udfaf Priority Riders"}),(0,cb.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,cb.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Enter Rider ID (e.g., 150437)",className:"flex-1 px-3 py-2 border border-gray-300 rounded text-sm",onKeyPress:e=>"Enter"===e.key&&m()}),(0,cb.jsx)("button",{onClick:m,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm font-medium",children:"Add"})]}),(0,cb.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>(0,cb.jsxs)("div",{className:"bg-white border border-yellow-300 rounded-lg px-3 py-1 flex items-center gap-2 text-sm",children:[(0,cb.jsx)("span",{className:"font-mono",children:e}),(0,cb.jsx)("button",{onClick:()=>(async e=>{const t=s.filter(t=>t!==e);try{await xm(mp(rb,"system","priority_riders"),{rider_ids:t,updated_at:new Date,updated_by:"admin"}),o(t)}catch(Ob){console.error("Failed to remove priority rider:",Ob)}})(e),className:"text-red-500 hover:text-red-700 text-xs",children:"\u2715"})]},e))}),0===s.length&&(0,cb.jsx)("p",{className:"text-gray-500 text-sm",children:"No priority riders set. Add rider IDs above for faster individual updates."})]}),(0,cb.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,cb.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"\ud83d\udccb Recent Refresh Activity"}),d.length>0?(0,cb.jsx)("div",{className:"space-y-2",children:d.slice(0,5).map((e,t)=>(0,cb.jsxs)("div",{className:"bg-white p-3 rounded border text-sm",children:[(0,cb.jsxs)("div",{className:"flex justify-between items-start",children:[(0,cb.jsxs)("span",{className:"font-medium",children:["bulk_success"===e.type&&"\ud83d\ude80 Bulk Refresh","bulk_failed"===e.type&&"\u274c Bulk Failed","priority"===e.type&&"\ud83c\udfaf Priority Refresh","smart"===e.type&&"\ud83e\udde0 Smart Refresh"]}),(0,cb.jsx)("span",{className:"text-gray-500 text-xs",children:g(e.timestamp)})]}),e.result&&(0,cb.jsx)("p",{className:"text-gray-600 text-xs mt-1",children:e.result.message||JSON.stringify(e.result)})]},e.id||t))}):(0,cb.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent activity logged."})]}),(0,cb.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[(0,cb.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"\u26a1 API Efficiency Comparison"}),(0,cb.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,cb.jsxs)("div",{className:"bg-white p-3 rounded",children:[(0,cb.jsx)("h4",{className:"font-medium text-red-600",children:"\u274c Old Method (GET only)"}),(0,cb.jsx)("p",{children:"63 individual calls \xd7 12s = 12+ minutes"})]}),(0,cb.jsxs)("div",{className:"bg-white p-3 rounded",children:[(0,cb.jsx)("h4",{className:"font-medium text-green-600",children:"\u2705 New Method (POST bulk)"}),(0,cb.jsx)("p",{children:"1 bulk call = 30 seconds (24x faster!)"})]})]})]})]})},Ib=()=>{const{user:e,isAdmin:t,isOwner:n}=mb(),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)(!0),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(new Set),[h,f]=(0,i.useState)(!1),[p,m]=(0,i.useState)(null),[g,y]=(0,i.useState)(null),v=t||n,[b,w]=(0,i.useState)({id:"",firstName:"",lastName:"",countryCode:"",weight:0});(0,i.useEffect)(()=>{if(!v)return;a(!0);const e=im(pp(rb,"riders_data"),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=em("orderBy",e);return am._create(n,t)}("name","asc")),t=_m(e,e=>{const t=e.docs.map(e=>{var t,n,r,i,s;const o=e.data(),a=(o.name||(null!==(t=o.profile)&&void 0!==t&&t.firstName?"".concat(null===(n=o.profile)||void 0===n?void 0:n.firstName," ").concat(null===(r=o.profile)||void 0===r?void 0:r.lastName):"")).split(" "),l=a[0]||"",c=a.slice(1).join(" ")||"";return{id:e.id,firstName:l,lastName:c,countryCode:o.countryCode||(null===(i=o.profile)||void 0===i?void 0:i.countryCode)||o.country||"",weight:o.weight||(null===(s=o.profile)||void 0===s?void 0:s.weight)||0}});s(t),a(!1)},e=>{console.error("Error loading riders:",e),m("Failed to load riders from database"),a(!1)});return()=>t()},[v]),(0,i.useEffect)(()=>{if(p){const e=setTimeout(()=>m(null),5e3);return()=>clearTimeout(e)}},[p]),(0,i.useEffect)(()=>{if(g){const e=setTimeout(()=>y(null),5e3);return()=>clearTimeout(e)}},[g]);const x=r.filter(e=>{var t;const n=l.toLowerCase();return"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(n)||e.id.toString().includes(l)||(null===(t=e.countryCode)||void 0===t?void 0:t.toLowerCase().includes(n))}),_=()=>{w({id:"",firstName:"",lastName:"",countryCode:"",weight:0}),f(!1)};return v?(0,cb.jsx)("div",{className:"space-y-6",children:(0,cb.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-6",children:[(0,cb.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,cb.jsx)("h3",{className:"text-lg font-semibold text-cyan-400 font-mono",children:"\ud83c\udfc1 Rider Management"}),(0,cb.jsxs)("div",{className:"text-sm text-gray-400 font-mono",children:[r.length," total riders"]})]}),p&&(0,cb.jsx)("div",{className:"bg-red-900/50 border border-red-500 text-red-400 px-4 py-3 rounded-lg font-mono mb-4",children:(0,cb.jsxs)("div",{className:"flex justify-between items-center",children:[(0,cb.jsxs)("span",{children:["\u274c ",p]}),(0,cb.jsx)("button",{onClick:()=>m(null),className:"text-red-400 hover:text-red-300 font-bold ml-4",children:"\u2715"})]})}),g&&(0,cb.jsx)("div",{className:"bg-green-900/50 border border-green-500 text-green-400 px-4 py-3 rounded-lg font-mono mb-4",children:(0,cb.jsxs)("div",{className:"flex justify-between items-center",children:[(0,cb.jsxs)("span",{children:["\u2705 ",g]}),(0,cb.jsx)("button",{onClick:()=>y(null),className:"text-green-400 hover:text-green-300 font-bold ml-4",children:"\u2715"})]})}),(0,cb.jsxs)("div",{className:"flex flex-wrap gap-4 items-center mb-6",children:[(0,cb.jsx)("input",{type:"text",placeholder:"Search riders by name, ID, or country...",value:l,onChange:e=>c(e.target.value),className:"flex-1 min-w-64 px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent font-mono"}),(0,cb.jsx)("button",{onClick:()=>f(!h),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-mono",children:h?"\u274c Cancel":"\u2795 Add Rider"}),u.size>0&&(0,cb.jsxs)("button",{onClick:async()=>{if(0===u.size)return;const e=Array.from(u).map(e=>r.find(t=>t.id===e)).filter(Boolean).map(e=>"".concat(e.firstName," ").concat(e.lastName)).join(", ");if(window.confirm("Are you sure you want to delete ".concat(u.size," rider(s)?\n\n").concat(e)))try{const e=function(e){return xp(e=No(e,wp)),new km(e,t=>Sm(e,t))}(rb);Array.from(u).forEach(t=>{e.delete(mp(rb,"riders_data",t))}),await e.commit(),s(e=>e.filter(e=>!u.has(e.id))),d(new Set),y("".concat(u.size," rider(s) deleted successfully"))}catch(t){console.error("Error deleting riders:",t),m("Failed to delete riders. Please try again.")}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-mono",children:["\ud83d\uddd1\ufe0f Delete (",u.size,")"]})]}),h&&(0,cb.jsxs)("div",{className:"bg-gray-800/50 border border-gray-600 rounded-lg p-6 mb-6",children:[(0,cb.jsx)("h4",{className:"text-lg font-semibold text-white mb-4 font-mono",children:"\u2795 Add New Rider"}),(0,cb.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,cb.jsxs)("div",{children:[(0,cb.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1 font-mono",children:["Rider ID ",(0,cb.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,cb.jsx)("input",{type:"text",placeholder:"e.g. 150437",value:b.id,onChange:e=>w(t=>Ht(Ht({},t),{},{id:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-500 rounded text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 font-mono"})]}),(0,cb.jsxs)("div",{children:[(0,cb.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1 font-mono",children:["First Name ",(0,cb.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,cb.jsx)("input",{type:"text",placeholder:"First name",value:b.firstName,onChange:e=>w(t=>Ht(Ht({},t),{},{firstName:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-500 rounded text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 font-mono"})]}),(0,cb.jsxs)("div",{children:[(0,cb.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1 font-mono",children:["Last Name ",(0,cb.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,cb.jsx)("input",{type:"text",placeholder:"Last name",value:b.lastName,onChange:e=>w(t=>Ht(Ht({},t),{},{lastName:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-500 rounded text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 font-mono"})]}),(0,cb.jsxs)("div",{children:[(0,cb.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1 font-mono",children:"Country Code"}),(0,cb.jsx)("input",{type:"text",placeholder:"e.g. NL, US, GB",value:b.countryCode,onChange:e=>w(t=>Ht(Ht({},t),{},{countryCode:e.target.value.toUpperCase()})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-500 rounded text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 font-mono",maxLength:3})]}),(0,cb.jsxs)("div",{children:[(0,cb.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1 font-mono",children:"Weight (kg)"}),(0,cb.jsx)("input",{type:"number",placeholder:"Weight in kg",value:b.weight||"",onChange:e=>w(t=>Ht(Ht({},t),{},{weight:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-500 rounded text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-500 font-mono",min:"0",max:"200",step:"0.1"})]})]}),(0,cb.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,cb.jsx)("button",{onClick:async()=>{if(b.id&&b.firstName&&b.lastName)if(r.some(e=>e.id===b.id))m("Rider ID already exists. Please use a different ID.");else try{const t={profile:{firstName:b.firstName,lastName:b.lastName,countryCode:b.countryCode||null,weight:b.weight||0},metadata:{createdAt:new Date,createdBy:(null===e||void 0===e?void 0:e.email)||"admin",lastUpdated:new Date,source:"manual_admin"}};await wm(mp(rb,"riders_data",b.id),t);const n={id:b.id,firstName:b.firstName,lastName:b.lastName,countryCode:b.countryCode,weight:b.weight};s(e=>[...e,n].sort((e,t)=>e.lastName.localeCompare(t.lastName))),_(),y("Rider ".concat(b.firstName," ").concat(b.lastName," added successfully"))}catch(t){console.error("Error adding rider:",t),m("Failed to add rider. Please try again.")}else m("Please fill in all required fields (ID, First Name, Last Name)")},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-mono",children:"\u2795 Add Rider"}),(0,cb.jsx)("button",{onClick:_,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-mono",children:"\u274c Cancel"})]})]}),o?(0,cb.jsxs)("div",{className:"text-center py-8",children:[(0,cb.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto"}),(0,cb.jsx)("p",{className:"mt-4 text-gray-400 font-mono",children:"Loading riders..."})]}):(0,cb.jsxs)("div",{className:"bg-gray-800/50 rounded-lg overflow-hidden",children:[(0,cb.jsx)("div",{className:"overflow-x-auto",children:(0,cb.jsxs)("table",{className:"min-w-full",children:[(0,cb.jsx)("thead",{className:"bg-gray-700",children:(0,cb.jsxs)("tr",{children:[(0,cb.jsx)("th",{className:"px-4 py-3 text-left",children:(0,cb.jsx)("input",{type:"checkbox",checked:u.size===x.length&&x.length>0,onChange:()=>{u.size===x.length&&x.length>0?d(new Set):d(new Set(x.map(e=>e.id)))},className:"rounded bg-gray-600 border-gray-500"})}),(0,cb.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider font-mono",children:"ID"}),(0,cb.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider font-mono",children:"First Name"}),(0,cb.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider font-mono",children:"Last Name"}),(0,cb.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider font-mono",children:"Country"}),(0,cb.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider font-mono",children:"Weight"}),(0,cb.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider font-mono",children:"Actions"})]})}),(0,cb.jsx)("tbody",{className:"divide-y divide-gray-600",children:x.map(e=>(0,cb.jsxs)("tr",{className:"hover:bg-gray-700/50 transition-colors",children:[(0,cb.jsx)("td",{className:"px-4 py-4",children:(0,cb.jsx)("input",{type:"checkbox",checked:u.has(e.id),onChange:()=>(e=>{const t=new Set(u);t.has(e)?t.delete(e):t.add(e),d(t)})(e.id),className:"rounded bg-gray-600 border-gray-500"})}),(0,cb.jsx)("td",{className:"px-4 py-4 text-sm font-medium text-white font-mono",children:e.id}),(0,cb.jsx)("td",{className:"px-4 py-4 text-sm text-white font-mono",children:e.firstName}),(0,cb.jsx)("td",{className:"px-4 py-4 text-sm text-white font-mono",children:e.lastName}),(0,cb.jsx)("td",{className:"px-4 py-4 text-sm text-white font-mono",children:e.countryCode||"-"}),(0,cb.jsx)("td",{className:"px-4 py-4 text-sm text-white font-mono",children:e.weight?"".concat(e.weight," kg"):"-"}),(0,cb.jsx)("td",{className:"px-4 py-4 text-sm",children:(0,cb.jsx)("button",{onClick:()=>{window.confirm("Delete rider ".concat(e.firstName," ").concat(e.lastName,"?"))&&function(e){return Sm(No(e.firestore,wp),[new eu(e._key,zc.none())])}(mp(rb,"riders_data",e.id)).then(()=>{s(t=>t.filter(t=>t.id!==e.id)),y("Rider deleted successfully")}).catch(e=>{console.error("Error deleting rider:",e),m("Failed to delete rider")})},className:"text-red-400 hover:text-red-300 font-mono",title:"Delete rider",children:"\ud83d\uddd1\ufe0f"})})]},e.id))})]})}),0===x.length&&(0,cb.jsx)("div",{className:"text-center py-8 text-gray-400 font-mono",children:l?"\ud83d\udd0d No riders found matching your search.":"\ud83d\udced No riders found."})]}),(0,cb.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-400 font-mono mt-4",children:[(0,cb.jsxs)("div",{className:"space-x-4",children:[(0,cb.jsxs)("span",{children:["\ud83d\udcca Showing ",x.length," of ",r.length," riders"]}),u.size>0&&(0,cb.jsxs)("span",{className:"text-cyan-400",children:["\u2713 ",u.size," selected"]})]}),(0,cb.jsxs)("span",{children:["\ud83d\udd52 Last updated: ",(new Date).toLocaleTimeString()]})]})]})}):(0,cb.jsx)("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-6",children:(0,cb.jsxs)("div",{className:"text-center py-8",children:[(0,cb.jsx)("h3",{className:"text-lg font-semibold text-red-400 mb-2 font-mono",children:"\ud83d\udeab Access Denied"}),(0,cb.jsx)("p",{className:"text-gray-400 font-mono",children:"You need admin privileges to manage riders."})]})})},Ab=()=>{var e;const{adminUser:t,isAdmin:n,isOwner:r,signOut:s}=mb(),{riders:o,loading:a}=yb(),[l,c]=(0,i.useState)(null),[u,d]=(0,i.useState)([]),[h,f]=(0,i.useState)(!0),[p,m]=(0,i.useState)("overview");(0,i.useEffect)(()=>{if(!n)return;f(!0);const e=_m(pp(rb,"riders_data"),e=>{const t=e.size;c(e=>{var n,r,i;return{totalRiders:t,totalAdmins:null!==(n=null===e||void 0===e?void 0:e.totalAdmins)&&void 0!==n?n:0,lastDataUpdate:null!==(r=null===e||void 0===e?void 0:e.lastDataUpdate)&&void 0!==r?r:"Never",systemStatus:null!==(i=null===e||void 0===e?void 0:e.systemStatus)&&void 0!==i?i:"offline"}}),f(!1)}),r=_m(pp(rb,"admin_users"),e=>{const t=e.size;c(e=>{var n,r,i;return{totalAdmins:t,totalRiders:null!==(n=null===e||void 0===e?void 0:e.totalRiders)&&void 0!==n?n:0,lastDataUpdate:null!==(r=null===e||void 0===e?void 0:e.lastDataUpdate)&&void 0!==r?r:"Never",systemStatus:null!==(i=null===e||void 0===e?void 0:e.systemStatus)&&void 0!==i?i:"offline"}})}),i=_m(mp(rb,"system","status"),e=>{if(e.exists()){const t=e.data();c(e=>{var n,r,i,s,o;return{systemStatus:t.status||"online",lastDataUpdate:(null===(n=t.last_updated)||void 0===n||null===(r=n.toDate)||void 0===r||null===(i=r.call(n))||void 0===i?void 0:i.toLocaleString())||"Unknown",totalRiders:null!==(s=null===e||void 0===e?void 0:e.totalRiders)&&void 0!==s?s:0,totalAdmins:null!==(o=null===e||void 0===e?void 0:e.totalAdmins)&&void 0!==o?o:0}})}});return d([{id:"1",timestamp:new Date,level:"info",message:"Admin dashboard accessed",details:{user:null===t||void 0===t?void 0:t.email}},{id:"2",timestamp:new Date(Date.now()-36e5),level:"info",message:"Data sync completed successfully",details:{riders_processed:null===l||void 0===l?void 0:l.totalRiders}},{id:"3",timestamp:new Date(Date.now()-72e5),level:"warning",message:"High API usage detected",details:{requests_per_hour:450}}]),()=>{e(),r(),i()}},[n]);const g=e=>{switch(e){case"info":return"text-blue-400";case"warning":return"text-yellow-400";case"error":return"text-red-400";default:return"text-gray-400"}};return n?(0,cb.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[(0,cb.jsx)("div",{className:"bg-black/40 backdrop-blur-sm border-b border-cyan-500/30",children:(0,cb.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,cb.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cb.jsxs)("div",{className:"flex items-center gap-4",children:[(0,cb.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-full flex items-center justify-center",children:(0,cb.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cb.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,cb.jsxs)("div",{children:[(0,cb.jsx)("h1",{className:"text-2xl font-bold text-transparent bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text font-mono",children:"Admin Dashboard"}),(0,cb.jsxs)("p",{className:"text-gray-400 text-sm font-mono",children:["Welcome back, ",null===t||void 0===t?void 0:t.displayName," (",null===t||void 0===t?void 0:t.role,")"]})]})]}),(0,cb.jsxs)("div",{className:"flex items-center gap-4",children:[(null===t||void 0===t?void 0:t.photoURL)&&(0,cb.jsx)("img",{src:t.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full border border-cyan-500/50"}),(0,cb.jsx)("button",{onClick:s,className:"px-4 py-2 bg-red-600/20 border border-red-500/50 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors duration-200 font-mono text-sm",children:"Sign Out"})]})]})})}),(0,cb.jsx)("div",{className:"bg-black/40 backdrop-blur-sm border-b border-cyan-500/30",children:(0,cb.jsx)("div",{className:"max-w-7xl mx-auto px-6",children:(0,cb.jsx)("nav",{className:"flex space-x-8",children:[{id:"overview",name:"Overview",icon:"\ud83d\udcca"},{id:"users",name:"User Management",icon:"\ud83d\udc65"},{id:"riders",name:"Rider Management",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{id:"data",name:"Data Control",icon:"\ud83d\uddc3\ufe0f"},{id:"refresh",name:"API Refresh",icon:"\ud83d\udd04"},{id:"system",name:"System Settings",icon:"\u2699\ufe0f"}].map(e=>(0,cb.jsxs)("button",{onClick:()=>m(e.id),className:"py-4 px-2 border-b-2 font-medium text-sm font-mono transition-colors duration-200 ".concat(p===e.id?"border-cyan-400 text-cyan-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300"),children:[e.icon," ",e.name]},e.id))})})}),(0,cb.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:["overview"===p&&(0,cb.jsxs)("div",{className:"space-y-6",children:[(0,cb.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,cb.jsx)("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-6",children:(0,cb.jsxs)("div",{className:"flex items-center",children:[(0,cb.jsx)("div",{className:"flex-shrink-0",children:(0,cb.jsx)("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:(0,cb.jsx)("span",{className:"text-blue-400 text-xl",children:"\ud83d\udc65"})})}),(0,cb.jsxs)("div",{className:"ml-4",children:[(0,cb.jsx)("p",{className:"text-sm font-medium text-gray-400 font-mono",children:"Total Riders"}),(0,cb.jsx)("p",{className:"text-2xl font-bold text-white font-mono",children:(null===l||void 0===l?void 0:l.totalRiders)||"..."})]})]})}),(0,cb.jsx)("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-6",children:(0,cb.jsxs)("div",{className:"flex items-center",children:[(0,cb.jsx)("div",{className:"flex-shrink-0",children:(0,cb.jsx)("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:(0,cb.jsx)("span",{className:"text-purple-400 text-xl",children:"\ud83d\udee1\ufe0f"})})}),(0,cb.jsxs)("div",{className:"ml-4",children:[(0,cb.jsx)("p",{className:"text-sm font-medium text-gray-400 font-mono",children:"Admin Users"}),(0,cb.jsx)("p",{className:"text-2xl font-bold text-white font-mono",children:(null===l||void 0===l?void 0:l.totalAdmins)||"..."})]})]})}),(0,cb.jsx)("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-6",children:(0,cb.jsxs)("div",{className:"flex items-center",children:[(0,cb.jsx)("div",{className:"flex-shrink-0",children:(0,cb.jsx)("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center",children:(0,cb.jsx)("span",{className:"text-green-400 text-xl",children:"\ud83d\udfe2"})})}),(0,cb.jsxs)("div",{className:"ml-4",children:[(0,cb.jsx)("p",{className:"text-sm font-medium text-gray-400 font-mono",children:"System Status"}),(0,cb.jsx)("p",{className:"text-xl font-bold font-mono ".concat((e=>{switch(e){case"online":return"text-green-400";case"maintenance":return"text-yellow-400";case"offline":return"text-red-400";default:return"text-gray-400"}})((null===l||void 0===l?void 0:l.systemStatus)||"offline")),children:(null===l||void 0===l||null===(e=l.systemStatus)||void 0===e?void 0:e.toUpperCase())||"UNKNOWN"})]})]})}),(0,cb.jsx)("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-6",children:(0,cb.jsxs)("div",{className:"flex items-center",children:[(0,cb.jsx)("div",{className:"flex-shrink-0",children:(0,cb.jsx)("div",{className:"w-10 h-10 bg-cyan-500/20 rounded-lg flex items-center justify-center",children:(0,cb.jsx)("span",{className:"text-cyan-400 text-xl",children:"\ud83d\udd04"})})}),(0,cb.jsxs)("div",{className:"ml-4",children:[(0,cb.jsx)("p",{className:"text-sm font-medium text-gray-400 font-mono",children:"Last Update"}),(0,cb.jsx)("p",{className:"text-sm font-bold text-white font-mono",children:(null===l||void 0===l?void 0:l.lastDataUpdate)||"Never"})]})]})})]}),(0,cb.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-6",children:[(0,cb.jsx)("h3",{className:"text-lg font-semibold text-cyan-400 mb-4 font-mono",children:"Recent System Activity"}),(0,cb.jsx)("div",{className:"space-y-3",children:u.map(e=>(0,cb.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-black/30 rounded border border-gray-700",children:[(0,cb.jsx)("span",{className:"text-sm font-mono ".concat(g(e.level)),children:e.level.toUpperCase()}),(0,cb.jsxs)("div",{className:"flex-1",children:[(0,cb.jsx)("p",{className:"text-gray-300 font-mono text-sm",children:e.message}),(0,cb.jsx)("p",{className:"text-gray-500 font-mono text-xs mt-1",children:e.timestamp.toLocaleString()})]})]},e.id))})]})]}),"users"===p&&(0,cb.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-6",children:[(0,cb.jsx)("h3",{className:"text-lg font-semibold text-cyan-400 mb-4 font-mono",children:"User Management"}),r?(0,cb.jsx)("p",{className:"text-gray-300 font-mono",children:"User management features coming soon..."}):(0,cb.jsx)("p",{className:"text-red-400 font-mono",children:"\ud83d\udeab Only owners can manage users"})]}),"riders"===p&&(0,cb.jsx)(Ib,{}),"data"===p&&(0,cb.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-6",children:[(0,cb.jsx)("h3",{className:"text-lg font-semibold text-cyan-400 mb-4 font-mono",children:"Data Control"}),(0,cb.jsx)("p",{className:"text-gray-300 font-mono",children:"Data management features coming soon..."})]}),"refresh"===p&&(0,cb.jsx)("div",{children:(0,cb.jsx)(Tb,{})}),"system"===p&&(0,cb.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-lg p-6",children:[(0,cb.jsx)("h3",{className:"text-lg font-semibold text-cyan-400 mb-4 font-mono",children:"System Settings"}),r?(0,cb.jsx)("p",{className:"text-gray-300 font-mono",children:"System configuration features coming soon..."}):(0,cb.jsx)("p",{className:"text-red-400 font-mono",children:"\ud83d\udeab Only owners can modify system settings"})]})]})]}):(0,cb.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center",children:(0,cb.jsxs)("div",{className:"text-center",children:[(0,cb.jsx)("h1",{className:"text-3xl font-bold text-red-400 font-mono mb-4",children:"\ud83d\udeab Access Denied"}),(0,cb.jsx)("p",{className:"text-gray-400 font-mono",children:"You don't have admin privileges"})]})})},Pb=()=>(0,cb.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:(0,cb.jsxs)(ge,{children:[(0,cb.jsx)(pe,{path:"/",element:(0,cb.jsx)(Cb,{})}),(0,cb.jsx)(pe,{path:"/manage",element:(0,cb.jsx)(wb,{})}),(0,cb.jsx)(pe,{path:"/riders",element:(0,cb.jsx)(Cb,{})}),(0,cb.jsx)(pe,{path:"/admin",element:(0,cb.jsx)(Ab,{})}),(0,cb.jsx)(pe,{path:"/team",element:(0,cb.jsx)(Cb,{})}),(0,cb.jsx)(pe,{path:"/excel",element:(0,cb.jsx)(Cb,{})})]})});const Rb=function(){return(0,cb.jsx)(Me,{store:mr,children:(0,cb.jsx)(db,{children:(0,cb.jsx)(gb,{children:(0,cb.jsx)(xe,{children:(0,cb.jsx)(Pb,{})})})})})};o.createRoot(document.getElementById("root")).render((0,cb.jsx)(i.StrictMode,{children:(0,cb.jsx)(Rb,{})}))})();
//# sourceMappingURL=main.44d797ff.js.map