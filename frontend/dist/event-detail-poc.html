<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>POC - Event Results</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #f5f7fa;
      padding: 20px;
    }
    .container { max-width: 1400px; margin: 0 auto; }
    .header {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    h1 {
      font-size: 24px;
      color: #1a1a1a;
      margin-bottom: 10px;
    }
    .event-meta {
      font-size: 14px;
      color: #666;
    }
    table {
      width: 100%;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      border-collapse: collapse;
    }
    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }
    th {
      background: #f8f9fa;
      font-weight: 600;
      font-size: 11px;
      color: #666;
      text-transform: uppercase;
    }
    td { font-size: 14px; }
    .velo-badge {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 13px;
      font-weight: 600;
    }
    .velo-amethyst { background: #c79dff; color: #fff; }
    .velo-sapphire { background: #4d9eff; color: #fff; }
    .velo-emerald { background: #00d084; color: #fff; }
    .medal { font-size: 18px; }
    .rider-name {
      font-weight: 600;
      color: #1a1a1a;
    }
    .team-badge {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
      margin-left: 5px;
    }
    .team-hero { background: #ff6b35; color: white; }
    .team-teamnl { background: #ff8c00; color: white; }
    .time { font-family: 'SF Mono', monospace; }
    .power-cell { font-family: 'SF Mono', monospace; font-size: 13px; }
    .highlight { background: #fff3cd; }
    .back-link {
      display: inline-block;
      margin-bottom: 15px;
      color: #0066ff;
      text-decoration: none;
    }
    .back-link:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="container">
    <a href="rider-history-poc.html" class="back-link">‚Üê Back to Rider History</a>
    
    <div class="header">
      <h1 id="event-name">Loading...</h1>
      <div class="event-meta" id="event-meta"></div>
    </div>

    <table>
      <thead>
        <tr>
          <th>vELO</th>
          <th>Result</th>
          <th>Name</th>
          <th>Time (gap)</th>
          <th>Avg</th>
          <th>5s</th>
          <th>15s</th>
          <th>30s</th>
          <th>1m</th>
          <th>2m</th>
          <th>5m</th>
          <th>20m</th>
          <th>RP</th>
        </tr>
      </thead>
      <tbody id="results-table">
        <!-- Data wordt hier geladen -->
      </tbody>
    </table>
  </div>

  <script>
    const mockEvents = {
      'mock-1': {
        eventName: 'Club Ladder // Herd of Honey Badgers v TeamNL_Cloud9 Spark',
        date: 'Friday, December 29, 2025 @ 6:00 PM',
        results: [
          {
            position: 1,
            velo: 1821,
            name: 'Iain Thistlethwaite',
            team: 'HERO',
            teamClass: 'team-hero',
            timeSeconds: 2176,
            deltaSeconds: 0,
            avgWkg: 3.583,
            power: { wkg5: 9.48, wkg15: 8.72, wkg30: 7.55, wkg60: 6.55, wkg120: 6.30, wkg300: 5.42, wkg1200: 3.75 },
            rp: 141.07
          },
          {
            position: 2,
            velo: 1532,
            name: 'Freek Zwart',
            team: 'TeamNL',
            teamClass: 'team-teamnl',
            timeSeconds: 2184,
            deltaSeconds: 8,
            avgWkg: 3.122,
            power: { wkg5: 9.61, wkg15: 8.49, wkg30: 7.07, wkg60: 5.24, wkg120: 4.54, wkg300: 4.22, wkg1200: 3.24 },
            rp: 130.45
          },
          {
            position: 3,
            velo: 1493,
            name: 'Matt Reamsbottom',
            team: 'HERO',
            teamClass: 'team-hero',
            timeSeconds: 2184,
            deltaSeconds: 8,
            avgWkg: 3.139,
            power: { wkg5: 8.47, wkg15: 8.08, wkg30: 7.53, wkg60: 5.72, wkg120: 5.06, wkg300: 4.39, wkg1200: 3.33 },
            rp: 124.24
          },
          {
            position: 4,
            velo: 1616,
            name: 'Hans Saris',
            team: 'TeamNL',
            teamClass: 'team-teamnl',
            timeSeconds: 2184,
            deltaSeconds: 8,
            avgWkg: 3.200,
            power: { wkg5: 10.71, wkg15: 8.91, wkg30: 7.99, wkg60: 6.05, wkg120: 4.84, wkg300: 4.41, wkg1200: 3.31 },
            rp: 119.84
          },
          {
            position: 7,
            velo: 1436,
            name: 'JR√∏ne | CloudRacer-9 @YouTube',
            team: 'TeamNL',
            teamClass: 'team-teamnl',
            isTarget: true,
            timeSeconds: 2185,
            deltaSeconds: 9,
            avgWkg: 2.959,
            power: { wkg5: 8.99, wkg15: 8.05, wkg30: 7.31, wkg60: 5.45, wkg120: 4.66, wkg300: 4.07, wkg1200: 3.07 },
            rp: 111.26
          }
        ]
      }
    };

    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = seconds % 60;
      const ms = Math.round((seconds - Math.floor(seconds)) * 1000);
      return `${mins}:${secs.toString().padStart(2, '0')}.${ms.toString().padStart(3, '0')}`;
    }

    function formatDelta(seconds) {
      if (seconds === 0) return '+00.000';
      return `+${formatTime(seconds)}`;
    }

    function getMedal(position) {
      if (position === 1) return '<span class="medal">üèÜ</span>';
      if (position === 2) return '<span class="medal">ü•à</span>';
      if (position === 3) return '<span class="medal">ü•â</span>';
      return position;
    }

    function getVeloClass(velo) {
      if (velo >= 1800) return 'velo-sapphire';
      if (velo >= 1500) return 'velo-emerald';
      return 'velo-amethyst';
    }

    function renderEvent() {
      const params = new URLSearchParams(window.location.search);
      const eventId = params.get('eventId') || 'mock-1';
      const event = mockEvents[eventId];

      if (!event) {
        document.getElementById('event-name').textContent = 'Event not found';
        return;
      }

      document.getElementById('event-name').textContent = event.eventName;
      document.getElementById('event-meta').textContent = event.date;

      const tbody = document.getElementById('results-table');
      tbody.innerHTML = event.results.map(result => `
        <tr ${result.isTarget ? 'style="background: #fff8dc;"' : ''}>
          <td>
            <span class="velo-badge ${getVeloClass(result.velo)}">
              ‚ë§ ${result.velo}
            </span>
          </td>
          <td>${getMedal(result.position)}</td>
          <td>
            <span class="rider-name">${result.name}</span>
            <span class="team-badge ${result.teamClass}">${result.team}</span>
          </td>
          <td class="time">
            ${formatTime(result.timeSeconds)}
            <span style="font-size: 11px; color: #999;">${formatDelta(result.deltaSeconds)}</span>
          </td>
          <td class="power-cell">${result.avgWkg.toFixed(3)}</td>
          <td class="power-cell ${result.power.wkg5 > 9 ? 'highlight' : ''}">${result.power.wkg5.toFixed(2)}</td>
          <td class="power-cell">${result.power.wkg15.toFixed(2)}</td>
          <td class="power-cell ${result.isTarget ? 'highlight' : ''}">${result.power.wkg30.toFixed(2)}</td>
          <td class="power-cell ${result.isTarget ? 'highlight' : ''}">${result.power.wkg60.toFixed(2)}</td>
          <td class="power-cell ${result.isTarget ? 'highlight' : ''}">${result.power.wkg120.toFixed(2)}</td>
          <td class="power-cell ${result.isTarget ? 'highlight' : ''}">${result.power.wkg300.toFixed(2)}</td>
          <td class="power-cell">${result.power.wkg1200.toFixed(2)}</td>
          <td style="color: #0066ff; font-weight: 600;">${result.rp.toFixed(2)}</td>
        </tr>
      `).join('');
    }

    renderEvent();
  </script>
</body>
</html>
